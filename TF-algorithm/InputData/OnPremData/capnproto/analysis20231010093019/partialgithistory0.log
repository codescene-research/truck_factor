--21e7b91e	2015-08-14T10:09:04-07:00	Kenton Varda	kenton@sandstorm.io	Regenerate bootstraps for previous commit.

21e7b91e
145	145	c++/src/capnp/compiler/grammar.capnp.h
27	27	c++/src/capnp/compiler/lexer.capnp.h
97	97	c++/src/capnp/rpc.capnp.h
122	122	c++/src/capnp/schema.capnp.h

--6b9ac4dd	2015-08-14T10:08:49-07:00	Kenton Varda	kenton@sandstorm.io	Fixes #233

6b9ac4dd
4	1	c++/src/capnp/compiler/capnpc-c++.c++
9	0	c++/src/capnp/test.capnp

--e50f9571	2015-08-07T18:39:20-07:00	Kenton Varda	kenton@sandstorm.io	Fix JSON struct handler glue.

e50f9571
1	1	c++/src/capnp/compat/json.h

--316d7252	2015-08-05T22:37:05-07:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

316d7252
--e3e9ce8d	2015-08-05T22:15:53-07:00	Kenton Varda	kenton@sandstorm.io	WIP JSON encoder/decoder library. Currently only encodes.

The library allows for registering special handlers for specific types or fields. This is particluarly useful for overriding the way `Data` is encoded (since many approaches exist) or supporting encodings like EJSON or Q which extend JSON with special types encoded as objects with field names perfixed by dollar signs.

Not integrated into build system yet (but builds nicely with Ekam). I think this is going to need to be a separate library, e.g. libcapnp-json, because clearly a lot of Cap'n Proto users don't need it at all.

For the moment, this was written for use inside Sandstorm. There is no current need for a decoder, so I have not written that yet and have no immediate plans to do so. But it will be added before any official Cap'n Proto release, certainly. A simple recursive descent parser should be easy...

e3e9ce8d
21	0	c++/src/capnp/common-test.c++
36	0	c++/src/capnp/common.h
230	0	c++/src/capnp/compat/json-test.c++
394	0	c++/src/capnp/compat/json.c++
58	0	c++/src/capnp/compat/json.capnp
403	0	c++/src/capnp/compat/json.h
5	0	c++/src/capnp/compiler/capnpc-c++.c++
6	0	c++/src/capnp/dynamic.h
39	1	c++/src/capnp/schema.c++
2	0	c++/src/capnp/schema.h

--68d0116e	2015-08-02T22:07:53-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #232 from skarab/master

Fix bug dereferencing nullptr when forwarding a large skip
68d0116e
--589cac45	2015-08-02T01:41:24+01:00	Hunter Morris	hunter@binaryclub.com	Fix minor style issue with nullptr assignment in large stream skip

589cac45
1	1	c++/src/kj/io.c++

--33ebc2a4	2015-07-31T15:58:36-07:00	Kenton Varda	kenton@sandstorm.io	The previous commit didn't actually work, but I read the wrong test results. Fixed now. Issue #204.

33ebc2a4
2	1	c++/src/kj/async-unix-test.c++

--35d7e170	2015-07-31T13:14:20-07:00	Kenton Varda	kenton@sandstorm.io	Make tests work on mipsel, maybe. Hopefully fixes #204. I don't know since I don't have a mipsel machine.

35d7e170
16	2	c++/src/kj/async-unix-test.c++

--82ead55c	2015-07-28T20:51:51-07:00	Kenton Varda	kenton@sandstorm.io	Add 'embed' keyword for wholesale embedding of external files as constant values.

Example:

    const data :Data = embed "some-file.dat";

Files are looked up the same way an import would be.

You can use embed when Data or Text is expected. You can also use it when a struct type is expected -- the file will be interpreted as a message using standard binary serialization.

82ead55c
6	1	c++/src/capnp/compiler/capnp.c++
16	0	c++/src/capnp/compiler/compiler.c++
3	0	c++/src/capnp/compiler/compiler.h
4	0	c++/src/capnp/compiler/evolution-test.c++
3	0	c++/src/capnp/compiler/grammar.capnp
70	55	c++/src/capnp/compiler/grammar.capnp.c++
65	0	c++/src/capnp/compiler/grammar.capnp.h
43	6	c++/src/capnp/compiler/module-loader.c++
75	1	c++/src/capnp/compiler/node-translator.c++
7	2	c++/src/capnp/compiler/node-translator.h
9	0	c++/src/capnp/compiler/parser.c++
21	0	c++/src/capnp/encoding-test.c++
8	0	c++/src/capnp/schema-parser.c++
4	0	c++/src/capnp/test.capnp
3	0	c++/src/capnp/testdata/errors.capnp.nobuild
2	0	c++/src/capnp/testdata/errors.txt
35	0	c++/src/kj/array-test.c++
21	0	c++/src/kj/array.h

--6bdd0aaf	2015-07-23T20:51:13-07:00	Kenton Varda	kenton@sandstorm.io	Add a way to concatenate lists without losing data when one or more of the lists was written using a newer version of the protocol.

6bdd0aaf
85	0	c++/src/capnp/layout.c++
23	0	c++/src/capnp/layout.h
4	0	c++/src/capnp/list.h
173	0	c++/src/capnp/orphan-test.c++
33	0	c++/src/capnp/orphan.h

--96e9663a	2015-07-23T10:01:22-07:00	Kenton Varda	kenton@sandstorm.io	Fix link errors.

96e9663a
0	2	c++/src/capnp/capability.c++
8	0	c++/src/capnp/layout.c++

--d4cd01e9	2015-07-23T00:28:02-07:00	Kenton Varda	kenton@sandstorm.io	Fix bug causing exception: "'Disembargo' of type 'senderLoopback' sent to an object that does not point back to the sender."

The problem happened when pipelined calls were made on a promised capability, but then that capability turned out to be null. The promise resolving code incorrectly interpreted this as the remote promise having resolved to a local capability (because the "null" stub capability looks local), and so it would send a Disembargo message to flush the pipeline as required. However, the remote end would receive this Disembargo message and find it is addressed to a null capability, not a capability pointing back to the sender. This was treated as a protocol error, causing the receiver to close the connection.

The solution is to explicitly identity "null" capabilities so that we can distinguish this case. This change also has the benefit that now when you copy a null capability between messages with foo.setCap(bar.getCap()), the pointer will be set null in the destination, rather than becoming a reference to a local broken capability.

Thanks to David Renshaw for narrowing this down.

d4cd01e9
1	0	c++/src/capnp/arena.h
16	8	c++/src/capnp/capability.c++
7	0	c++/src/capnp/capability.h
5	1	c++/src/capnp/layout.c++
28	0	c++/src/capnp/rpc-test.c++
4	2	c++/src/capnp/rpc.c++
4	0	c++/src/capnp/test-util.c++
2	0	c++/src/capnp/test-util.h
3	0	c++/src/capnp/test.capnp

--684a7f34	2015-07-21T19:28:58-07:00	Kenton Varda	kenton@sandstorm.io	Pass the inner capability into the membrane filter callbacks.

Also introduce a way to copy a struct or list which applies membranes to all embedded capabilities, since this seems like it will be needed in conjuction with the above.

684a7f34
3	3	c++/src/capnp/any.h
11	2	c++/src/capnp/layout.c++
7	1	c++/src/capnp/layout.h
50	3	c++/src/capnp/membrane-test.c++
56	7	c++/src/capnp/membrane.c++
53	2	c++/src/capnp/membrane.h
8	2	c++/src/capnp/orphan.h
5	0	c++/src/capnp/test.capnp

--8f614cc4	2015-07-17T14:55:15-07:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

8f614cc4
--98b4c4f5	2015-07-17T14:55:05-07:00	Kenton Varda	kenton@sandstorm.io	Add style rule about implicit lambda captures.

98b4c4f5
6	0	style-guide.md

--185f2763	2015-07-17T13:42:53-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #226 from geofft/doc-bootstrap

Update RPC docs for the change to a single bootstrap interface
185f2763
--ec585f1a	2015-07-17T02:20:01-04:00	Geoffrey Thomas	geofft@ldpreload.com	Update RPC docs for the change to a single bootstrap interface (9a32fa73).

ec585f1a
6	10	doc/cxxrpc.md

--e93ff72e	2015-07-12T16:34:42-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #225 from dwrensha/update-comment

Update comment: MessageReader::reset() has not existed for a very long time.
e93ff72e
--3f2448d0	2015-07-12T11:15:10-04:00	David Renshaw	dwrenshaw@gmail.com	Update comment: MessageReader::reset() has not existed for a very long time.

3f2448d0
2	4	c++/src/capnp/message.h

--c3b381ee	2015-07-08T00:40:44-07:00	Kenton Varda	kenton@sandstorm.io	Add framework for capability membranes.

c3b381ee
3	0	c++/Makefile.am
3	0	c++/src/capnp/CMakeLists.txt
6	0	c++/src/capnp/capability.h
4	0	c++/src/capnp/layout.c++
3	0	c++/src/capnp/layout.h
286	0	c++/src/capnp/membrane-test.c++
438	0	c++/src/capnp/membrane.c++
151	0	c++/src/capnp/membrane.h
6	3	c++/src/capnp/rpc-twoparty.c++
4	1	c++/src/capnp/rpc-twoparty.h
16	0	c++/src/capnp/test.capnp

--cbd18b28	2015-07-03T13:09:03-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #223 from mrdomino/no-eproto

Workaround nonexistent EPROTO on OpenBSD
cbd18b28
--156efd49	2015-07-01T13:34:22-04:00	Steven Dee	steve@smartercode.net	Workaround nonexistent EPROTO on OpenBSD

Fixes #221.

156efd49
3	0	c++/src/kj/async-io.c++

--5413038b	2015-07-03T01:13:48-07:00	Kenton Varda	kenton@sandstorm.io	Refactor how messages are imbued with a capability table.

**The problem**

The methods MessageReader::initCapTable() and MessageBuilder::getCapTable() always felt rather hacky. initCapTable() in particular feels like something that should be handled by the constructor. However, in practice, the cap table is often initialized based on a table encoded within the message itself. That is, an RPC message contains a "payload" which includes both the application-level message structure and a table of capabilities. The cap table has to be processed first, then initCapTable() is called on the overall message, before the application structure can safely be read.

The really weird part about this is that even though the cap table only applies to one branch of the message (the payload), it is set on the *whole* MessageReader. This implies, for example, that it would be impossible to have a message that contains multiple payloads. We haven't had any need for such a thing, but an implemnetation that has such artificial limitations feels very wrong.

MessageBuilder has similar issues going in the opposite direction.

All of this ugliness potentially gets worse when we introduce "membranes". We want a way to intercept capabilities as they are being read from or written to an RPC payload. Currently, the only plausible way to do that is, again, to apply a transformation to all capabilities in the message. In practice it seems like this would work out OK, but it again feels wrong -- we really want to take a single Reader or Builder and "wrap" it so that transformations are applied on capabilities read/written through it.

**The solution**

This change fixes the problem by adding a new pointer to each struct/list Reader/Builder that tracks the current cap table. So, now a Reader or Builder for a particular sub-object can be "imbued" with a cap table without affecting any other existing Readers/Builders pointing into the same message. The cap table is inherited by child Readers/Builders obtained through the original one.

This approach matches up nicely with membranes, which should make their implementation nice and clean.

This change unfortunately means that Readers and Builders are now bigger, possibly with some performance impact.

5413038b
8	0	c++/src/capnp/any.h
3	15	c++/src/capnp/arena.c++
27	35	c++/src/capnp/arena.h
41	5	c++/src/capnp/capability.c++
69	1	c++/src/capnp/capability.h
3	3	c++/src/capnp/dynamic.c++
4	3	c++/src/capnp/dynamic.h
9	6	c++/src/capnp/layout-test.c++
324	215	c++/src/capnp/layout.c++
122	50	c++/src/capnp/layout.h
17	13	c++/src/capnp/message.c++
0	20	c++/src/capnp/message.h
22	13	c++/src/capnp/orphan.h
0	8	c++/src/capnp/rpc-test.c++
0	8	c++/src/capnp/rpc-twoparty.c++
27	16	c++/src/capnp/rpc.c++
0	6	c++/src/capnp/rpc.h

--9fc1590b	2015-06-28T14:21:48-07:00	Kenton Varda	kenton@sandstorm.io	Fix inaccurate doc comments on ClientHook::call().

9fc1590b
6	6	c++/src/capnp/capability.h

--bcba0f71	2015-06-26T14:39:57-07:00	Kenton Varda	kenton@sandstorm.io	OCD style tweaks.

bcba0f71
2	3	c++/src/capnp/compiler/lexer.c++

--ff90d639	2015-06-26T14:35:44-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #218 from zarvox/allow_trailing_commas

Allow trailing commas in parenthesized and bracketed lists.
ff90d639
--949f7353	2015-06-22T21:51:03-07:00	Kenton Varda	kenton@sandstorm.io	Fix bug where calling a list setter using a list obtained from a similarly-typed getter, but where the underlying pointer was null, would write an incorrectly-typed pointer in the destination (specifically, an empty List(Void)). Now it sets an empty list of the correct type.

949f7353
6	6	c++/src/capnp/any.h
3	3	c++/src/capnp/dynamic.h
74	0	c++/src/capnp/encoding-test.c++
4	4	c++/src/capnp/layout.c++
6	5	c++/src/capnp/layout.h
8	8	c++/src/capnp/list.h

--2ed4b4e7	2015-06-22T18:00:53-07:00	Kenton Varda	kenton@sandstorm.io	Really update bootstraps for previous commit.

2ed4b4e7
8	6	c++/src/capnp/c++.capnp.c++
494	375	c++/src/capnp/compiler/grammar.capnp.c++
92	66	c++/src/capnp/compiler/lexer.capnp.c++
79	60	c++/src/capnp/persistent.capnp.c++
36	28	c++/src/capnp/rpc-twoparty.capnp.c++
322	246	c++/src/capnp/rpc.capnp.c++
577	436	c++/src/capnp/schema.capnp.c++

--db7ca960	2015-06-22T17:20:00-07:00	Kenton Varda	kenton@sandstorm.io	Fixes #219, with POSSIBLE (but obscure) WIRE FORMAT BREAKAGE.

Unfortunately, the layout algorithm had a bug which caused incorrect layout when declaring a union whose lowest-ordinal field was of type Void and nested in an inner union. That is:

    union {
      a :union {
        b @0 :Void
        ...
      }
      ...
    }

In this case, all the fields in the struct after the Void field -- including both unions' discriminants -- would end up misplaced. Although they did not end up overlapping (and therefore the incorrect layout "worked"), the result broke schema evolution rules around "retroactive unionization".

Unfortunately, we must break compatibility with any protocol that happened to contain the above pattern. Luckily, it's a fairly obscure case. Unluckily, Cap'n Proto's own schema format contains such a pattern. Luckily, the use of this pattern was introduced in v0.6.x and therefore has not been in any release build so far.

db7ca960
13	3	c++/src/capnp/compiler/node-translator.c++
16	0	c++/src/capnp/encoding-test.c++
14	14	c++/src/capnp/schema.capnp.c++
36	36	c++/src/capnp/schema.capnp.h
17	0	c++/src/capnp/test.capnp

--9a40b101	2015-06-22T14:08:28-07:00	Drew Fisher	drew@sandstorm.io	Allow trailing commas in parenthesized and bracketed lists

And add a test to verify this behavior.

9a40b101
13	0	c++/src/capnp/compiler/lexer-test.c++
9	2	c++/src/capnp/compiler/lexer.c++

--9473dff0	2015-06-22T12:56:22-07:00	Drew Fisher	drew@sandstorm.io	Add missing tests to autotools/CMake testsuites

9473dff0
1	0	c++/Makefile.am
1	0	c++/src/capnp/CMakeLists.txt

--1d0b60c8	2015-06-14T14:04:52-07:00	Kenton Varda	kenton@sandstorm.io	.gitignore should not ignore bootstrap files, which are not build artifacts. Possibly related to #216.

1d0b60c8
1	1	.gitignore

--cb7f2d04	2015-06-12T15:24:47-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #215 from jparyani/fix-realm-gateway

Fix problem with some RealmGateway template helpers
cb7f2d04
--51490784	2015-06-12T00:18:40-07:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

51490784
--cc9459da	2015-06-12T00:18:32-07:00	Kenton Varda	kenton@sandstorm.io	Simplify stack trace generation.

cc9459da
8	8	c++/src/kj/exception.c++

--5254a41a	2015-06-11T16:21:02-07:00	Jason Paryani	github@jparyani.com	Fix problem with some RealmGateway template helpers

It turns out that somehow these templates were missing InternalOwner and
ExternalOwner definitions, which was causing problems if a RealmGateway
was defined with them.

5254a41a
8	4	c++/src/capnp/rpc-prelude.h

--aa0f575b	2015-06-11T14:58:28-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #214 from jparyani/fix-anypointer-capability

Allow setting dynamic AnyPointer fields with a capability
aa0f575b
--6cf2b5a7	2015-06-11T00:56:32-07:00	Kenton Varda	kenton@sandstorm.io	Don't kill the connection just because someone pipelined on a capability pointer that turned out to be null.

6cf2b5a7
2	4	c++/src/capnp/rpc.c++

--74e497c0	2015-06-11T00:55:50-07:00	Kenton Varda	kenton@sandstorm.io	Prevent accidental reuse of Request objects, which otherwise leads to crazy errors.

74e497c0
1	0	c++/src/capnp/capability.h

--1e463655	2015-06-10T15:53:15-07:00	Jason Paryani	github@jparyani.com	Allow setting dynamic AnyPointer fields with a capability

1e463655
1	0	c++/src/capnp/dynamic.c++

--320f4ef1	2015-06-08T20:06:05-07:00	Kenton Varda	kenton@sandstorm.io	Maybe::emplace() should return the newly-constructed value so that you don't have to immediately KJ_ASSERT_NONNULL it.

320f4ef1
5	3	c++/src/kj/common.h

--17020509	2015-05-29T17:11:16-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #211 from Fraser999/install_schema_files

Fixed installation of schema files via CMake.
17020509
--960a4f6b	2015-05-29T16:40:40-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #208 from a-richardson/fix-kate

Fix Syntax highlighting for Kate/KDevelop
960a4f6b
--5bd8f541	2015-05-29T03:10:27+01:00	Fraser Hutchison	fraser.hutchison@maidsafe.net	Fixed installation of schema files via CMake.

5bd8f541
11	10	c++/src/capnp/CMakeLists.txt

--25be62be	2015-05-26T12:44:22-07:00	Kenton Varda	kenton@sandstorm.io	sed -r is a GNU extension, apparently, and due to stars aligning, this didn't break the build, but led to a totally bogus soname on non-GNU systems. Argh.

Apparently most systems (including GNU, undocumentedly) support -E instead, but perhaps the safest thing is to use a basic regular expression. Unfortunately on many systems ? and + are not available in basic regexes, but using * instead happens to work in our case.

Thanks to @neverpanic for catching this.

Fixes #210

25be62be
1	1	c++/Makefile.am

--79f278e0	2015-05-21T17:41:13+01:00	Alex Richardson	arichardson.kde@gmail.com	Fix Syntax highlighting for Kate

Apparently Kate requires the <itemDatas> to be inside the <highlighting>
tag whereas QtCreator also accepts it a level higher.

Tested using this DTD:
https://github.com/jgm/highlighting-kate/blob/master/xml/language.dtd

79f278e0
1	1	highlighting/qtcreator/capnp.xml

--6315eaed	2015-05-20T13:43:27-07:00	Kenton Varda	kenton@sandstorm.io	Fix some warnings.

6315eaed
1	1	c++/src/capnp/rpc-twoparty-test.c++
1	1	c++/src/kj/async-test.c++

--50313e41	2015-05-20T13:27:29-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #207 from emaste/master

Fix -Werror build without KJ_HAS_BACKTRACE
50313e41
--e34af35b	2015-05-20T15:28:18-04:00	Ed Maste	emaste@freebsd.org	Fix -Werror build without KJ_HAS_BACKTRACE

This avoids an unused function warning for crashHandler.

e34af35b
5	2	c++/src/kj/exception.c++

--01b6d1a9	2015-05-16T12:22:58-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #202 from thomaslee/tom_fix_hurd_i386

Fall back to sysconf(_SC_IOV_MAX) if both IOV_MAX and UIO_MAXIOV are undefined
01b6d1a9
--690c5ad9	2015-05-16T05:31:26-07:00	Tom Lee	github@tomlee.co	PR feedback #1

690c5ad9
1	2	c++/Makefile.am
3	3	c++/src/kj/async-io.c++
1	2	c++/src/kj/io.c++
0	64	c++/src/kj/iovmax.h
34	0	c++/src/kj/miniposix.h

--5a958fb7	2015-05-15T10:50:55-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #203 from dwrensha/update

LocalAddress and RemoteAddress were apparently merged into NetworkAddress long ago.
5a958fb7
--562f5417	2015-05-10T10:19:38-07:00	Tom Lee	github@tomlee.co	Add errno.h to iovmax.h

562f5417
1	0	c++/src/kj/iovmax.h

--5f86fe9f	2015-05-09T14:47:44-04:00	David Renshaw	dwrenshaw@gmail.com	LocalAddress and RemoteAddress were apparently merged into NetworkAddress long ago.

5f86fe9f
4	15	c++/src/kj/async-io.h

--dff57347	2015-05-08T22:20:00-07:00	Tom Lee	github@tomlee.co	Fall back to sysconf(_SC_IOV_MAX) if both IOV_MAX and UIO_MAXIOV are undefined.

Fixes a build error on GNU/Hurd.

dff57347
3	0	c++/Makefile.am
10	11	c++/src/kj/async-io.c++
5	10	c++/src/kj/io.c++
63	0	c++/src/kj/iovmax.h

--9eac2a34	2015-05-07T16:02:24-07:00	Kenton Varda	kenton@sandstorm.io	For unimplemented methods, return the exception (turning it into a promise) rather than throw.

9eac2a34
5	20	c++/src/capnp/capability.c++

--b32a53bd	2015-05-07T13:57:41-07:00	Kenton Varda	kenton@sandstorm.io	Fix bug where capability pointers were corrupted when 'transferred', e.g. using adoptWithCaveats() or truncate().

b32a53bd
24	0	c++/src/capnp/capability-test.c++
5	6	c++/src/capnp/layout.c++
8	0	c++/src/capnp/test.capnp

--eae03397	2015-05-06T16:20:26-07:00	Kenton Varda	kenton@sandstorm.io	Cleanup: Replace use of _::StructReader in RPC interfaces with AnyStruct::Reader.

eae03397
3	5	c++/src/capnp/rpc-prelude.h
4	4	c++/src/capnp/rpc.c++
3	3	c++/src/capnp/rpc.h

--b8431197	2015-05-06T15:50:56-07:00	Kenton Varda	kenton@sandstorm.io	Add ability to construct a new bootstrap capability for each connecting client based on their authenticated VatId.

b8431197
12	1	c++/src/capnp/rpc-prelude.h
5	0	c++/src/capnp/rpc-test.c++
49	0	c++/src/capnp/rpc-twoparty-test.c++
10	1	c++/src/capnp/rpc-twoparty.c++
2	0	c++/src/capnp/rpc-twoparty.h
40	16	c++/src/capnp/rpc.c++
92	0	c++/src/capnp/rpc.h
4	0	c++/src/capnp/test.capnp

--1262c429	2015-05-05T22:06:56-07:00	Kenton Varda	kenton@sandstorm.io	Throw exception on null Own<> dereference in debug mode.

1262c429
6	4	c++/src/kj/memory.h

--83b582ba	2015-05-05T00:10:50-07:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

83b582ba
--ecd15f7d	2015-05-05T00:09:47-07:00	Kenton Varda	kenton@sandstorm.io	Assert in destructor needs to be recoverable.

ecd15f7d
1	1	c++/src/kj/async-unix.c++

--c6e65641	2015-05-04T23:50:32-07:00	Kenton Varda	kenton@sandstorm.io	Improve backtraces:
- Reduce noise.
- Trace through async callbacks.

c6e65641
5	0	c++/src/capnp/rpc.c++
79	2	c++/src/kj/async-inl.h
7	2	c++/src/kj/async.c++
6	0	c++/src/kj/common.h
2	2	c++/src/kj/debug.c++
1	1	c++/src/kj/debug.h
83	20	c++/src/kj/exception.c++
24	3	c++/src/kj/exception.h
1	1	c++/src/kj/test.c++

--880041bb	2015-05-04T16:00:43-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #201 from jparyani/add-bootstrap-twopartyclient

Allow TwoPartyClient to define a bootstrap interface
880041bb
--bfa8e397	2015-05-04T15:26:41-07:00	Jason Paryani	github@jparyani.com	Allow TwoPartyClient to define a bootstrap interface

bfa8e397
6	0	c++/src/capnp/rpc-twoparty.c++
1	0	c++/src/capnp/rpc-twoparty.h

--0c0ed1d3	2015-05-03T15:44:08-07:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

0c0ed1d3
--cf8c0e00	2015-05-03T15:44:00-07:00	Kenton Varda	kenton@sandstorm.io	Fix Orphan::truncate() to work on null pointers.

cf8c0e00
2	0	c++/src/capnp/dynamic.h
30	5	c++/src/capnp/layout.c++
8	1	c++/src/capnp/layout.h
70	0	c++/src/capnp/orphan-test.c++
32	2	c++/src/capnp/orphan.h

--9e66d012	2015-05-03T11:28:46-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #200 from thomaslee/tom_hppa_nan_fix

Canonicalize NaN on the hppa architecture
9e66d012
--a25e6c98	2015-05-03T01:56:32-07:00	Tom Lee	github@tomlee.co	Canonicalize NaN on the hppa architecture

a25e6c98
1	1	c++/src/capnp/layout.h

--b51e1b61	2015-05-01T20:02:37-07:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

b51e1b61
--e2e412a0	2015-05-01T20:02:27-07:00	Kenton Varda	kenton@sandstorm.io	Fight common misconception that Cap'n Proto doesn't validate input.

e2e412a0
26	0	doc/faq.md
11	1	doc/index.md

--4f05f0f2	2015-04-30T14:59:17-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #198 from dwrensha/update

Update obsolete comments.
4f05f0f2
--5bb73b48	2015-04-30T14:58:41-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #197 from dwrensha/max-bytes-exception

Fix incorrect, confusing comment.
5bb73b48
--4ba9c513	2015-04-30T14:55:12-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #199 from abyss7/fix-overrides

Add missing keywords "override".
4ba9c513
--facc5a51	2015-04-29T12:14:22+03:00	Ivan Lezhankin	ilezhankin@yandex-team.ru	Add missing keywords "override".

facc5a51
2	2	c++/src/capnp/capability.c++

--65bb5404	2015-04-27T22:38:11-04:00	David Renshaw	dwrenshaw@gmail.com	Fix incorrect, confusing comment.

65bb5404
1	4	c++/src/kj/io.h

--ada65448	2015-04-26T14:01:21-04:00	David Renshaw	dwrenshaw@gmail.com	UnixEventLoop is no longer a thing.

ada65448
1	1	c++/src/kj/async-unix.c++

--7ac565b3	2015-04-25T17:19:49-04:00	David Renshaw	dwrenshaw@gmail.com	PRE_STATE1 no longer exists.

7ac565b3
1	1	c++/src/kj/async-inl.h

--bc0b20fb	2015-02-26T17:45:17-05:00	David Renshaw	dwrenshaw@gmail.com	update some comments

bc0b20fb
1	1	c++/src/capnp/ez-rpc.h
1	1	c++/src/kj/async-io.h
1	1	c++/src/kj/async.h

--b0599220	2015-04-20T20:27:57-07:00	Kenton Varda	kenton@sandstorm.io	Work around Clang bug 22354.

https://llvm.org/bugs/show_bug.cgi?id=22354

At the time DisallowConstCopy was introduced, GCC 4.7 and Clang 3.2 refused to allow the non-const copy constructors to be defaulted inline. This must have been concluded to be a compiler bug, as GCC 4.8 and Clang 3.4 seem fine with it. So, we can clean this up.

Meanwhile, the above-linked Clang bug triggered when a DisallowConstCopy derivative is captured by value in a C++14 generic lambda. capnp::CallContext in particular tended to be hit by this a lot. The bug only affects non-default (or out-of-line default) copy constructors, and thus is conveniently sidestepped by this change.

b0599220
2	6	c++/src/kj/common.h

--497605ae	2015-04-20T08:37:17-07:00	Kenton Varda	kenton@sandstorm.io	Reduce noise when dumping stack traces.

497605ae
1	1	c++/src/kj/exception.c++

--915284ad	2015-04-20T08:36:09-07:00	Kenton Varda	kenton@sandstorm.io	Add notes that UnixEventPort doesn't work after fork().

915284ad
6	0	c++/src/kj/async-io.h
6	0	c++/src/kj/async-unix.h

--1859b718	2015-04-16T21:24:10-07:00	Kenton Varda	kenton@sandstorm.io	Fully implement Orphan::truncate() and allow it to be used even to extend lists.

1859b718
15	0	c++/src/capnp/arena.h
113	15	c++/src/capnp/layout.c++
1	0	c++/src/capnp/layout.h
2	2	c++/src/capnp/list.h
437	1	c++/src/capnp/orphan-test.c++
17	7	c++/src/capnp/orphan.h
1	0	c++/src/kj/exception.c++

--959ad296	2015-04-15T13:41:41-07:00	Kenton Varda	kenton@sandstorm.io	Clean up style and fix compile error occurring with just the right GCC flags.

959ad296
14	12	c++/src/capnp/layout.c++

--895ffa48	2015-04-14T18:56:39-07:00	Kenton Varda	kenton@sandstorm.io	add TwoPartyClient::onDisconnect()

895ffa48
2	0	c++/src/capnp/rpc-twoparty.h

--822d2399	2015-04-14T18:48:26-07:00	Kenton Varda	kenton@sandstorm.io	Add simple convenience classes for using TwoPartyVatNetwork as client or server, since I find myself rewriting this code over and over.

822d2399
28	0	c++/src/capnp/rpc-twoparty-test.c++
45	0	c++/src/capnp/rpc-twoparty.c++
36	0	c++/src/capnp/rpc-twoparty.h

--4bbc78b8	2015-04-12T15:42:31-07:00	Kenton Varda	kenton@sandstorm.io	AnyList::operator== is not inline but was declared as such. Also made formatting of operator declarations consistent.

4bbc78b8
1	1	c++/src/capnp/any.h

--7d5a40bb	2015-04-12T15:35:13-07:00	Kenton Varda	kenton@sandstorm.io	Make logging more readable by removing noisy prefixes on filenames.

7d5a40bb
3	1	c++/src/kj/debug-test.c++
1	1	c++/src/kj/debug.c++
4	0	c++/src/kj/exception-test.c++
24	2	c++/src/kj/exception.c++
4	0	c++/src/kj/exception.h

--41773d2f	2015-04-10T20:02:48-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #192 from joshuawarner32/equal

Add equal / operator == method
41773d2f
--69dea08e	2015-04-10T20:42:51-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	correct KJ_UNREACHABLE usage, remove unused PointerType::OTHER enum value

69dea08e
6	12	c++/src/capnp/any.c++
1	4	c++/src/capnp/common.h

--9f42d66a	2015-04-04T15:19:15-07:00	Kenton Varda	kenton@sandstorm.io	Add way to check if a refcounted object has other references.

9f42d66a
5	0	c++/src/kj/refcount-test.c++
4	0	c++/src/kj/refcount.h

--6d580639	2015-04-04T14:58:27-07:00	Kenton Varda	kenton@sandstorm.io	Add thisCap() method to capability servers which returns a capability to itself. Remove CapabilityServerSet's weak pointers since this supersedes them.

6d580639
43	8	c++/src/capnp/capability-test.c++
9	33	c++/src/capnp/capability.c++
19	54	c++/src/capnp/capability.h
16	4	c++/src/capnp/compiler/capnpc-c++.c++
10	0	c++/src/capnp/persistent.capnp.h
3	0	c++/src/kj/thread.h

--3e966900	2015-04-03T18:41:08-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	rename StructEqualityResult to Equality

3e966900
13	13	c++/src/capnp/any-test.c++
37	37	c++/src/capnp/any.c++
8	8	c++/src/capnp/any.h

--6ad2e914	2015-04-03T18:38:54-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	only return UNKNOWN_CONTAINS_CAPS when everything else is equal

6ad2e914
16	5	c++/src/capnp/any.c++

--3cf0023c	2015-04-03T18:33:28-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	add useful message on UNKNOWN_CONTAINS_CAPS

3cf0023c
6	3	c++/src/capnp/any.c++

--21b98dad	2015-04-03T18:30:41-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	use KJ_UNREACHABLE

21b98dad
7	1	c++/src/capnp/any.c++

--41e87ab5	2015-04-03T18:26:27-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	use switch/cases instead of if/else blocks

41e87ab5
8	19	c++/src/capnp/any.c++

--24747af2	2015-04-03T18:20:46-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	fix switch formatting

24747af2

--96eb7cec	2015-04-03T18:19:30-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	move equals / == / != from functions to methods

96eb7cec
15	13	c++/src/capnp/any-test.c++
43	21	c++/src/capnp/any.c++
54	16	c++/src/capnp/any.h

--1cc41227	2015-04-03T17:47:57-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	fix latent sizeof(word) bug

1cc41227
1	1	c++/src/capnp/any.c++

--d80ee5e4	2015-04-03T17:45:00-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	deinline KJ_STRINGIFY StructEqualityResult

d80ee5e4
11	0	c++/src/capnp/any.c++
1	10	c++/src/capnp/any.h

--341eac28	2015-04-03T17:39:46-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	adjust data section method types & names

341eac28
1	1	c++/src/capnp/any.c++
3	3	c++/src/capnp/any.h
3	3	c++/src/capnp/layout.c++
7	7	c++/src/capnp/layout.h

--67009d41	2015-04-03T17:21:29-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	correct pointer nullptr check

67009d41
1	1	c++/src/capnp/layout.c++

--4e89daf5	2015-03-26T21:28:21-06:00	joshuawarner32@gmail.com	joshuawarner32@gmail.com	Implement equals / operator ==/!= for AnyPointer

4e89daf5
50	0	c++/src/capnp/any-test.c++
125	0	c++/src/capnp/any.c++
43	18	c++/src/capnp/any.h
14	0	c++/src/capnp/common.h
40	24	c++/src/capnp/layout.c++
6	6	c++/src/capnp/layout.h

--69850c1e	2015-03-30T16:03:05-07:00	Kenton Varda	kenton@sandstorm.io	Print stack trace on signal for all processes using KJ_MAIN.

69850c1e
68	0	c++/src/kj/exception.c++
5	0	c++/src/kj/exception.h
3	1	c++/src/kj/main.c++
3	65	c++/src/kj/test.c++
1	0	c++/src/kj/thread.h

--ab775828	2015-03-30T16:02:09-07:00	Kenton Varda	kenton@sandstorm.io	Fix build problem with pipelining on generic fields.

ab775828
3	0	c++/src/capnp/any.h

--98f17577	2015-03-30T15:59:49-07:00	Kenton Varda	kenton@sandstorm.io	Make it possible to skip the fuzz test with an environment variable. (It's very long.)

98f17577
12	0	c++/src/capnp/fuzz-test.c++

--09759e9f	2015-03-23T15:37:03-07:00	Kenton Varda	kenton@sandstorm.io	Work around apparent bug in Debian GCC 4.9.2.

https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=781060

09759e9f
8	0	c++/src/capnp/capability-test.c++

--c83add40	2015-03-23T13:37:36-07:00	Kenton Varda	kenton@sandstorm.io	Fix bug in test filters where if you specified only a single test rather than a range, all tests after it in the same file would run.

c83add40
1	0	c++/src/kj/test.c++

--95a1d853	2015-03-22T17:21:09-07:00	Kenton Varda	kenton@sandstorm.io	Increase exception stack trace length, because short traces are getting annoying.

95a1d853
1	1	c++/src/kj/exception.c++
1	1	c++/src/kj/exception.h

--ec86305e	2015-03-22T16:36:07-07:00	Kenton Varda	kenton@sandstorm.io	Fix but where interface server's transitive superclass's methods weren't dispatched correctly -- ouch.

ec86305e
19	1	c++/src/capnp/compiler/capnpc-c++.c++
1	1	c++/src/capnp/test-util.h
2	0	c++/src/capnp/test.capnp

--9dc88268	2015-03-22T14:23:38-07:00	Kenton Varda	kenton@sandstorm.io	CapabilityServerSet::getLocalServer() really needs to throw if given a broken promise capability.

9dc88268
15	1	c++/src/capnp/capability-test.c++
20	10	c++/src/capnp/capability.c++

--f1ccc201	2015-03-22T13:19:31-07:00	Kenton Varda	kenton@sandstorm.io	Revert "Replaced fixed -j parm with call to nproc"

Not everyone has `nproc`. In particular it does not appear to be present on my OSX build. Better to leave a fixed number here. This is just a suggestion anyhow.

This reverts commit 9c18f2adc537a7cf9718b4eccd9ce7620eb3e249.

f1ccc201
1	1	c++/setup-autotools.sh

--2d5efc24	2015-03-22T13:19:14-07:00	Kenton Varda	kenton@sandstorm.io	Add asGeneric() methods to generic readers, builders, and interfaces which casts them to the same type but with different generic parameters.

2d5efc24
8	1	c++/src/capnp/capability-test.c++
24	4	c++/src/capnp/compiler/capnpc-c++.c++
16	0	c++/src/capnp/encoding-test.c++
42	0	c++/src/capnp/persistent.capnp.h

--f0970f96	2015-03-21T20:23:21-07:00	Kenton Varda	kenton@sandstorm.io	Make kj::defer work correctly when the input is a lambda with non-copyable captures.

f0970f96
3	3	c++/src/kj/common.h

--dbac82e8	2015-03-21T17:08:15-07:00	Kenton Varda	kenton@sandstorm.io	Provide a way to get the ClientHook out of a Capability::Client, needed by third-party RPC/storage/etc systems.

dbac82e8
3	0	c++/src/capnp/capability.h

--28ce8f3d	2015-03-20T10:51:52-07:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

28ce8f3d
--9c18f2ad	2015-03-18T18:11:22-04:00	Ark M. Degtiarov	adegtiarov@amcloud.co	Replaced fixed -j parm with call to nproc

9c18f2ad
1	1	c++/setup-autotools.sh

--cb88ef62	2015-03-18T18:09:03-04:00	Ark M. Degtiarov	adegtiarov@amcloud.co	Fix for build failure with gcc v5.00

cb88ef62
1	1	c++/src/capnp/schema.c++

--99dfaa76	2015-03-17T10:41:58-07:00	Kenton Varda	temporal@gmail.com	Add CVE numbers to security advisories. Source: http://www.openwall.com/lists/oss-security/2015/03/17/3

99dfaa76
5	0	security-advisories/2015-03-02-0-c++-integer-overflow.md
5	0	security-advisories/2015-03-02-1-c++-integer-underflow.md
5	0	security-advisories/2015-03-02-2-all-cpu-amplification.md
5	0	security-advisories/2015-03-05-0-c++-addl-cpu-amplification.md

--c79f0d77	2015-03-16T10:20:52-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #190 from dwrensha/capnpc-bin-cat

Hardcode /bin/cat output option for `capnp compile`.
c79f0d77
--33af12c0	2015-03-16T11:42:52-04:00	David Renshaw	dwrenshaw@gmail.com	Use '-o -' instead of '-o /bin/cat'.

33af12c0
3	4	c++/src/capnp/compiler/capnp.c++

--ee7c1b0c	2015-03-15T00:18:59-07:00	Kenton Varda	kenton@sandstorm.io	Actually test weak pointers (and make them work).

ee7c1b0c
10	0	c++/src/capnp/capability-test.c++
1	1	c++/src/capnp/compiler/node-translator.c++
19	4	c++/src/kj/common.h
19	4	c++/src/kj/memory.h

--8b8f8a2f	2015-03-14T22:43:30-07:00	Kenton Varda	kenton@sandstorm.io	Implement CapabilityServerSet which provides a way to unwrap loopback capabilities to get the underlying server object, and also implements weak references.

8b8f8a2f
63	0	c++/src/capnp/capability-test.c++
86	2	c++/src/capnp/capability.c++
129	0	c++/src/capnp/capability.h

--d104b7e1	2015-03-14T10:24:13-04:00	David Renshaw	dwrenshaw@gmail.com	Hardcode /bin/cat output option for `capnp compile`.

d104b7e1
9	2	c++/src/capnp/compiler/capnp.c++

--dd662130	2015-03-13T04:13:36-07:00	Kenton Varda	kenton@sandstorm.io	Make KJ_ASSERT_NONNULL support move semantics.

dd662130
4	2	c++/src/kj/common.h

--12866d01	2015-03-07T11:56:25-08:00	Kenton Varda	kenton@sandstorm.io	Update comparison blog post to note that proto3 removes unknown field retention, for some ridiculous reason.

12866d01
2	2	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--cbdcd183	2015-03-06T14:05:50-08:00	Kenton Varda	kenton@sandstorm.io	Fix link.

cbdcd183
1	1	doc/encoding.md

--ff8d50d0	2015-03-06T14:45:20-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #187 from johnkdoe/master

zero warnings: use KJ_UNUSED for unused constexpr & local vars
ff8d50d0
--ec94c3dc	2015-03-06T13:02:28-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #186 from benlaurie/fix-ignore

Ignore stuff that needs ignoring.
ec94c3dc
--dc8078a3	2015-03-05T11:32:53-08:00	Kenton Varda	kenton@sandstorm.io	Blog about additional security issue.

dc8078a3
16	0	doc/_posts/2015-03-05-another-cpu-amplification.md

--0bbac93d	2015-03-05T11:07:32-08:00	Kenton Varda	kenton@sandstorm.io	Add security advisory for previous commit.

0bbac93d
62	0	security-advisories/2015-03-05-0-c++-addl-cpu-amplification.md

--80149744	2015-03-05T10:27:29-08:00	Kenton Varda	kenton@sandstorm.io	SECURITY: Additional CPU amplification case.

Unfortunately, commit 104870608fde3c698483fdef6b97f093fc15685d missed a case of CPU amplification via struct lists with zero-sized elements.

See advisory: https://github.com/sandstorm-io/capnproto/blob/master/security-advisories/2015-03-05-0-c++-addl-cpu-amplification.md

80149744
14	7	c++/src/capnp/encoding-test.c++
11	5	c++/src/capnp/layout.c++

--64f35316	2015-03-02T13:45:23-08:00	Kirk Beitz	kirk@twitter.com	zero warnings: use KJ_UNUSED for unused constexpr & local vars

one function in arena.c++ and several snprintf_result local vars
in string.c++ get optimized away because they're only used in
KJ_DASSERT() invocations.

this patch thus identifies those unused declarations with KJ_UNUSED

64f35316
1	1	c++/src/kj/arena.c++
4	4	c++/src/kj/string.c++

--63187bd4	2015-03-02T19:27:32-08:00	Kenton Varda	kenton@sandstorm.io	Fix commit link.

63187bd4
2	2	security-advisories/2015-03-02-2-all-cpu-amplification.md

--f31ae49e	2015-03-02T17:34:34-08:00	Kenton Varda	kenton@sandstorm.io	Remove misdated files now that links have mostly updated.

f31ae49e
0	1	security-advisories/2014-03-02-0-c++-integer-overflow.md
0	1	security-advisories/2014-03-02-1-c++-integer-underflow.md
0	1	security-advisories/2014-03-02-2-all-cpu-amplification.md

--dc3b6563	2015-03-02T17:32:43-08:00	Kenton Varda	kenton@sandstorm.io	Deep-clear target object when overwriting pointer. (Minor bug I noticed while working on other things.)

dc3b6563
3	0	c++/src/capnp/layout.c++

--c48020ad	2015-03-02T15:52:19-08:00	Kenton Varda	kenton@sandstorm.io	typo

c48020ad
1	1	doc/_posts/2015-03-02-security-advisory-and-integer-overflow-protection.md

--cbbe944c	2015-03-02T14:13:46-08:00	Kenton Varda	kenton@sandstorm.io	Oops, it's 2015 now.

cbbe944c
5	5	doc/_posts/2015-03-02-security-advisory-and-integer-overflow-protection.md

--e4c67f90	2015-03-02T13:20:46-08:00	Kenton Varda	kenton@sandstorm.io	Fix link.

e4c67f90
4	4	doc/_posts/2015-03-02-security-advisory-and-integer-overflow-protection.md

--cb10a9a0	2015-03-02T11:14:16-08:00	Kenton Varda	kenton@sandstorm.io	Let's put advisories in a github directory rather than in commit logs.

cb10a9a0
27	6	doc/_posts/2015-03-02-security-advisory-and-integer-overflow-protection.md
2	1	doc/install.md

--b9a63344	2015-03-02T14:34:27-08:00	Kenton Varda	kenton@sandstorm.io	Credit AFL more, and fix formatting.

b9a63344
1	1	security-advisories/2015-03-02-0-c++-integer-overflow.md
1	1	security-advisories/2015-03-02-1-c++-integer-underflow.md
1	1	security-advisories/2015-03-02-2-all-cpu-amplification.md

--65c52a7a	2015-03-02T14:12:47-08:00	Kenton Varda	kenton@sandstorm.io	more oops

65c52a7a
0	0	security-advisories/{2014-03-02-1-all-cpu-amplification.md => 2014-03-02-2-all-cpu-amplification.md}

--bfb618ba	2015-03-02T14:11:46-08:00	Kenton Varda	kenton@sandstorm.io	Aaaarghh, it's 2015 now.

bfb618ba
1	97	security-advisories/2014-03-02-0-c++-integer-overflow.md
1	0	security-advisories/2014-03-02-1-all-cpu-amplification.md
1	105	security-advisories/2014-03-02-1-c++-integer-underflow.md
5	5	security-advisories/{2014-03-02-0-c++-integer-overflow.md => 2015-03-02-0-c++-integer-overflow.md}
2	2	security-advisories/{2014-03-02-1-c++-integer-underflow.md => 2015-03-02-1-c++-integer-underflow.md}
1	1	security-advisories/{2014-03-02-2-all-cpu-amplification.md => 2015-03-02-2-all-cpu-amplification.md}

--af43d376	2015-03-02T11:19:34-08:00	Kenton Varda	kenton@sandstorm.io	Add security-advisories directory.

af43d376
97	0	security-advisories/2014-03-02-0-c++-integer-overflow.md
105	0	security-advisories/2014-03-02-1-c++-integer-underflow.md
69	0	security-advisories/2014-03-02-2-all-cpu-amplification.md
11	0	security-advisories/README.md

--b16350e6	2015-02-28T21:36:24-08:00	Kenton Varda	kenton@sandstorm.io	Extend fuzz test to cover more code paths.

b16350e6
90	13	c++/src/capnp/fuzz-test.c++

--929a537b	2015-02-28T21:33:34-08:00	Kenton Varda	kenton@sandstorm.io	Blog post about security advisory.

929a537b
113	0	doc/_posts/2015-03-02-security-advisory-and-integer-overflow-protection.md
3	1	doc/encoding.md

--bbb7cc69	2015-02-27T21:29:15-08:00	Kenton Varda	kenton@sandstorm.io	Extend release script to support security point releases which do not change the soname.

bbb7cc69
9	5	c++/Makefile.am
1	0	c++/src/capnp/common-test.c++
37	4	release.sh

--10487060	2015-02-27T20:23:13-08:00	Kenton Varda	kenton@sandstorm.io	SECURITY: CPU usage amplification attack.

Details: https://github.com/sandstorm-io/capnproto/tree/master/security-advisories/2014-03-02-0-all-cpu-amplification.md

10487060
1	0	CONTRIBUTORS
11	0	c++/src/capnp/arena.h
30	0	c++/src/capnp/encoding-test.c++
45	3	c++/src/capnp/layout.c++

--26bcceda	2015-02-27T19:53:07-08:00	Kenton Varda	kenton@sandstorm.io	SECURITY: Integer underflow in pointer validation.

Details: https://github.com/sandstorm-io/capnproto/tree/master/security-advisories/2014-03-02-1-c++-integer-underflow.md

26bcceda
8	2	c++/src/capnp/layout.c++

--f343f0db	2015-02-25T13:50:43-08:00	Kenton Varda	kenton@sandstorm.io	SECURITY: Integer overflow in pointer validation.

Details: https://github.com/sandstorm-io/capnproto/tree/master/security-advisories/2014-03-02-0-c++-integer-overflow.md

f343f0db
4	3	c++/src/capnp/layout.c++

--3a717467	2015-02-25T12:46:10-08:00	Kenton Varda	kenton@sandstorm.io	Add a simple fuzz test for pointer validation.

3a717467
1	0	c++/Makefile.am
1	0	c++/src/capnp/CMakeLists.txt
170	0	c++/src/capnp/fuzz-test.c++

--ba957e06	2015-02-25T11:21:10+00:00	Ben Laurie	ben@links.org	Ignore build stuff.

ba957e06
36	0	.gitignore

--b2496f3a	2015-02-25T01:38:54-08:00	Kenton Varda	kenton@sandstorm.io	Fix AnyStruct::getPointerSection(), which was totally broken and not tested.

b2496f3a
14	0	c++/src/capnp/any-test.c++
3	3	c++/src/capnp/layout.h

--db268884	2015-02-22T17:38:08-08:00	Kenton Varda	kenton@sandstorm.io	Fix and clarify instructions for building address book example.

db268884
8	3	c++/samples/addressbook.c++

--0e4ae567	2015-02-19T21:42:35-08:00	Kenton Varda	kenton@sandstorm.io	Clean up formatting.

0e4ae567
4	4	c++/src/kj/test.c++

--d1760d03	2015-02-19T21:40:22-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #183 from benlaurie/fix-cast

Cast mmap to char *.
d1760d03
--2287eb5f	2015-02-19T21:39:04-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #181 from jparyani/add-abortRead

Add abortRead to AyncIoStream
2287eb5f
--79cedd09	2015-02-20T04:42:47+00:00	Ben Laurie	ben@links.org	Cast mmap to char *.

79cedd09
4	2	c++/src/kj/test.c++

--55ab49d0	2015-02-19T15:53:39-08:00	Kenton Varda	kenton@sandstorm.io	Fix #182.

55ab49d0
4	1	c++/src/kj/async-inl.h
4	0	c++/src/kj/async.c++

--554e7a0e	2015-02-19T15:43:29-08:00	Kenton Varda	kenton@sandstorm.io	Add KJ-test macros for expecting exceptions and log messages.

554e7a0e
35	0	c++/src/kj/test.c++
42	0	c++/src/kj/test.h

--3864b685	2015-02-19T15:42:44-08:00	Kenton Varda	kenton@sandstorm.io	Another KJ_WARN_UNUSED_RESULT.

3864b685
1	1	c++/src/capnp/rpc.h

--bb386f1b	2015-02-18T18:09:29-08:00	Kenton Varda	kenton@sandstorm.io	Add various convenience features to async APIs:

- Promise<T>::catch_() method which is equivalent to then() but you only specify an error handler; the non-error continuation is the identity function.
- kj::evalNow() function which synchronously calls a function and returns a promise for the result, or a broken promise if the function threw an exception. This is convenient for making sure exceptions get pushed into the promise chain.
- KJ_WARN_UNUSED_RESULT on various methods that return promises.

bb386f1b
51	9	c++/src/kj/async-inl.h
12	1	c++/src/kj/async.h
2	2	c++/src/kj/time.h

--628559ad	2015-02-18T18:08:52-08:00	Kenton Varda	kenton@sandstorm.io	Add getsockname() and getpeername() methods to AsyncIoStream.

628559ad
18	0	c++/src/kj/async-io.c++
12	0	c++/src/kj/async-io.h

--0a032e17	2015-02-18T11:29:13-08:00	Jason Paryani	github@jparyani.com	Add abortRead to AyncIoStream

This is analagous to shutdownWrite, but for the read end of the stream

0a032e17
6	0	c++/src/kj/async-io.c++
4	0	c++/src/kj/async-io.h

--c9332ebe	2015-02-07T11:48:01-08:00	Kenton Varda	kenton@sandstorm.io	Arrrrgghhh, remove line that I only added while debugging something.

c9332ebe
0	1	c++/src/kj/async-io-test.c++

--6148a1c5	2015-02-02T14:53:15-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

6148a1c5
--d73bc221	2015-02-02T14:52:49-08:00	Kenton Varda	kenton@sandstorm.io	Update woefully outdated readme for the c++ package.

Fixes #175.

d73bc221
4	9	c++/README.txt

--843f0a12	2015-02-02T13:31:58-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #177 from a-richardson/fix-cmake-version

Also set the version for the CMake build
843f0a12
--7afed085	2015-02-01T19:29:34+00:00	Alex Richardson	arichardson.kde@gmail.com	Also set the version for the CMake build

Otherwise the installed pkgconfig files are broken. The release script
has also been changed to update the version for CMakeLists.txt.

Fixes issue #162

7afed085
1	0	c++/CMakeLists.txt
1	0	release.sh

--bd6f4d58	2015-01-28T23:32:27-08:00	Kenton Varda	kenton@sandstorm.io	Define standard 'persistent' annotation.

bd6f4d58
17	3	c++/src/capnp/persistent.capnp
30	0	c++/src/capnp/persistent.capnp.c++
1	0	c++/src/capnp/persistent.capnp.h

--3a01c67c	2015-01-28T23:31:45-08:00	Kenton Varda	kenton@sandstorm.io	A 'using' alias for an annotation should not be required to start with a capital letter.

3a01c67c
35	1	c++/src/capnp/compiler/node-translator.c++

--80e97114	2015-01-28T19:14:10-08:00	Kenton Varda	kenton@sandstorm.io	Finish tests for AnyStruct/AnyPointer/Capability field types.

80e97114
28	0	c++/src/capnp/any-test.c++

--2ab1bd51	2015-01-28T19:03:52-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

2ab1bd51
--3d8c403e	2015-01-28T19:03:48-08:00	Kenton Varda	kenton@sandstorm.io	WIP: Implement AnyStruct/AnyList/Capability types. Need to pull Jason's fixes; oops.

3d8c403e
7	0	c++/src/capnp/any-test.c++
17	7	c++/src/capnp/any.h
6	8	c++/src/capnp/c++.capnp.c++
63	5	c++/src/capnp/compiler/capnpc-c++.c++
10	0	c++/src/capnp/compiler/capnpc-capnp.c++
3	0	c++/src/capnp/compiler/grammar.capnp
417	486	c++/src/capnp/compiler/grammar.capnp.c++
102	0	c++/src/capnp/compiler/grammar.capnp.h
66	92	c++/src/capnp/compiler/lexer.capnp.c++
10	1	c++/src/capnp/compiler/node-translator.c++
27	1	c++/src/capnp/generated-header-support.h
57	75	c++/src/capnp/persistent.capnp.c++
28	36	c++/src/capnp/rpc-twoparty.capnp.c++
246	322	c++/src/capnp/rpc.capnp.c++
7	3	c++/src/capnp/schema.c++
11	1	c++/src/capnp/schema.capnp
547	588	c++/src/capnp/schema.capnp.c++
273	42	c++/src/capnp/schema.capnp.h
20	1	c++/src/capnp/schema.h
6	0	c++/src/capnp/test.capnp

--754477a8	2015-01-27T14:02:33-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #169 from jparyani/DynamicStructAsAnyStruct

Allow DynamicStruct::Reader/Builder.as<AnyStruct>
754477a8
--c3b6b203	2015-01-27T13:27:03-08:00	Kenton Varda	kenton@sandstorm.io	Add 'package managers' section to installation instructions.

c3b6b203
13	4	doc/install.md

--fa9d0499	2015-01-27T13:22:13-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'install_from_brew' of https://github.com/infynyxx/capnproto

fa9d0499
--eb973fbc	2015-01-26T19:43:39-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

eb973fbc
--28c1e3b3	2015-01-26T19:43:27-08:00	Kenton Varda	kenton@sandstorm.io	Fix bug with generic types containing unions.

28c1e3b3
12	3	c++/src/capnp/compiler/capnpc-c++.c++
18	18	c++/src/capnp/compiler/grammar.capnp.h
4	4	c++/src/capnp/compiler/lexer.capnp.h
16	16	c++/src/capnp/rpc.capnp.h
16	16	c++/src/capnp/schema.capnp.h

--df4ccc37	2015-01-26T17:43:50-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #172 from dwrensha/version-string

fix 'capnp id' version string
df4ccc37
--7230293d	2015-01-26T20:38:51-05:00	David Renshaw	dwrenshaw@gmail.com	fix 'capnp id' version string

7230293d
1	2	c++/src/capnp/compiler/capnp.c++

--687aba5f	2015-01-26T14:36:53-08:00	Kenton Varda	kenton@sandstorm.io	Tweak language on threads.

687aba5f
2	4	style-guide.md

--e80357ef	2015-01-26T11:15:49-08:00	Jason Paryani	github@jparyani.com	Fix stylistic problems with DynamicStruct::as commit

e80357ef
5	5	c++/src/capnp/any-test.c++
2	2	c++/src/capnp/any.h

--23ab833b	2015-01-26T13:46:26-05:00	Prajwal Tuladhar	praj@infynyxx.com	add installation doc from brew for Mac OS X

23ab833b
4	0	doc/install.md

--6197cc1d	2015-01-26T10:36:01-08:00	Kenton Varda	kenton@sandstorm.io	Apparently Morkdown's markdown parser does not actually match Github's. Sigh.

6197cc1d

--9954ca4f	2015-01-26T00:40:58-08:00	Kenton Varda	kenton@sandstorm.io	Apparently neither Morkdown nor Doctoc generates anchor tags consistently with Github itself; each fails in its own special ways.

9954ca4f
2	2	style-guide.md

--6985a47a	2015-01-26T00:37:36-08:00	Kenton Varda	kenton@sandstorm.io	Draft KJ style guide.

6985a47a
620	0	style-guide.md

--cc39a2d8	2015-01-22T21:10:53-08:00	Kenton Varda	kenton@sandstorm.io	Update all repository links to point at sandstorm-io org.

cc39a2d8
1	1	doc/_includes/buttons.html
1	1	doc/_includes/header.html
3	3	doc/cxxrpc.md
1	1	doc/encoding.md
1	1	doc/install.md
3	3	doc/otherlang.md
2	2	doc/rpc.md

--1e881dd4	2015-01-22T21:01:32-08:00	Kenton Varda	kenton@sandstorm.io	Blog about 0.5.1 release.

1e881dd4
16	0	doc/_posts/2015-01-23-capnproto-0.5.1-bugfixes.md

--2f30b475	2015-01-22T19:49:49-08:00	Kenton Varda	kenton@sandstorm.io	Use CryptGenRandom() rather than non-existent /dev/urandom on Windows. Fixes #167.

2f30b475
15	0	c++/src/capnp/compiler/parser.c++

--fbfcb24f	2015-01-21T21:33:30-08:00	Kenton Varda	kenton@sandstorm.io	Make sure kj/common.h always gets included first.

fbfcb24f
1	1	c++/src/capnp/arena.h
1	1	c++/src/kj/std/iostream.h

--6fae8ce9	2015-01-21T21:16:57-08:00	Kenton Varda	kenton@sandstorm.io	Work around incompatibility between various C++ standard libs in C++14 mode on some Linux distros, including Ubuntu 14.04.

6fae8ce9
8	0	c++/src/kj/common.h

--0e7f7116	2015-01-21T17:24:13-08:00	Jason Paryani	github@jparyani.com	Allow DynamicStruct::Reader/Builder.as<AnyStruct>

Also fix AnyStruct::Reader/Builder as methods

0e7f7116
6	0	c++/src/capnp/any-test.c++
9	1	c++/src/capnp/any.h
9	0	c++/src/capnp/dynamic-test.c++
10	0	c++/src/capnp/dynamic.h

--223d5363	2015-01-21T14:15:48-08:00	Kenton Varda	kenton@sandstorm.io	Move benchmarks out of capnp directory to make things more Ekam-friendly.

223d5363
0	0	c++/src/{capnp => }/benchmark/capnproto-carsales.c++
0	0	c++/src/{capnp => }/benchmark/capnproto-catrank.c++
0	0	c++/src/{capnp => }/benchmark/capnproto-common.h
0	0	c++/src/{capnp => }/benchmark/capnproto-eval.c++
0	0	c++/src/{capnp => }/benchmark/carsales.capnp
0	0	c++/src/{capnp => }/benchmark/carsales.proto
0	0	c++/src/{capnp => }/benchmark/catrank.capnp
0	0	c++/src/{capnp => }/benchmark/catrank.proto
0	0	c++/src/{capnp => }/benchmark/common.h
0	0	c++/src/{capnp => }/benchmark/eval.capnp
0	0	c++/src/{capnp => }/benchmark/eval.proto
0	0	c++/src/{capnp => }/benchmark/null-carsales.c++
0	0	c++/src/{capnp => }/benchmark/null-catrank.c++
0	0	c++/src/{capnp => }/benchmark/null-common.h
0	0	c++/src/{capnp => }/benchmark/null-eval.c++
0	0	c++/src/{capnp => }/benchmark/protobuf-carsales.c++
0	0	c++/src/{capnp => }/benchmark/protobuf-catrank.c++
0	0	c++/src/{capnp => }/benchmark/protobuf-common.h
0	0	c++/src/{capnp => }/benchmark/protobuf-eval.c++
0	0	c++/src/{capnp => }/benchmark/runner.c++

--88590c75	2015-01-19T20:52:23-08:00	Kenton Varda	kenton@sandstorm.io	Update Kenton's e-mail address to sandstorm.io.

88590c75
1	1	CONTRIBUTORS
1	1	highlighting/qtcreator/capnp.xml

--fcccdcd9	2015-01-19T11:01:40-08:00	Kenton Varda	kenton@sandstorm.io	Update line that said Cap'n Proto is not affiliated with any company.

fcccdcd9
1	1	doc/index.md

--1e643679	2015-01-18T17:37:53-08:00	Kenton Varda	kenton@sandstorm.io	Add twitter button to front page.

1e643679
2	0	doc/_includes/buttons.html

--afcd03ec	2015-01-18T17:31:25-08:00	Kenton Varda	kenton@sandstorm.io	Add missing file from previous commit.

afcd03ec
51	0	doc/images/twitter.svg

--c095b5b5	2015-01-18T17:17:47-08:00	Kenton Varda	kenton@sandstorm.io	Small site updates:

- Remove obsolete gittip buttons.
- Remove G+ follow crap.
- Indicate that Cap'n Proto is now a sub-project of Sandstorm.io.
- Add Twitter link.
- Update roadmap to not be obsolete.

c095b5b5
3	13	doc/_includes/footer.html
1	5	doc/_layouts/post.html
5	10	doc/faq.md
1	3	doc/news/index.html
7	14	doc/roadmap.md
15	11	doc/stylesheets/stylesheet.css

--16301054	2015-01-18T16:59:20-08:00	Kenton Varda	kenton@sandstorm.io	Fix site javascript for /next.

16301054
7	1	doc/javascripts/main.js

--4a06e298	2015-01-18T16:42:37-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

4a06e298
--aa4d5b7f	2015-01-18T16:40:14-08:00	Kenton Varda	kenton@sandstorm.io	Move Cap'n Proto main site to capnproto.org.

aa4d5b7f
1	1	doc/_config.yml
1	1	doc/_config_next.yml
1	1	doc/_posts/2013-04-01-announcing-capn-proto.md
2	2	doc/javascripts/main.js
1	1	doc/otherlang.md
4	34	doc/push-site.sh

--00a9c39a	2015-01-12T13:56:49-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #168 from netguy204/master

added syntax highlighting for emacs
00a9c39a
--6f45f963	2015-01-12T08:39:18-05:00	Brian Taylor	el.wubo@gmail.com	added syntax highlighting for emacs

6f45f963
1	0	CONTRIBUTORS
13	0	highlighting/emacs/README.md
75	0	highlighting/emacs/capnp-mode.el

--defc469c	2015-01-08T16:37:44-08:00	Kenton Varda	kenton@sandstorm.io	Fix bug where generic methods in generic interfaces didn't compile.

defc469c
32	15	c++/src/capnp/compiler/capnpc-c++.c++
4	0	c++/src/capnp/test.capnp

--3c6daff4	2015-01-07T11:32:31-08:00	Kenton Varda	kenton@sandstorm.io	Make AutoCloseFd stringifiable (broken by operator bool deletion).

3c6daff4
8	0	c++/src/kj/io-test.c++
5	0	c++/src/kj/io.h

--3ce6f4af	2015-01-06T13:33:23-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #166 from mortehu/master

Prevent accidental bool conversion of AutoCloseFd.
3ce6f4af
--50d356a0	2015-01-05T17:31:06-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #165 from dwrensha/typo

fix some typos
50d356a0
--6f97afa7	2015-01-05T09:22:45-05:00	Morten Hustveit	morten.hustveit@gmail.com	Prevent accidental bool conversion of AutoCloseFd.

6f97afa7
4	0	c++/src/kj/io.h

--bf015f61	2015-01-04T16:54:52-08:00	Kenton Varda	kenton@sandstorm.io	Add concept of sealing SturdyRefs to Persistent interface.

bf015f61
51	7	c++/src/capnp/persistent.capnp
127	65	c++/src/capnp/persistent.capnp.c++
462	390	c++/src/capnp/persistent.capnp.h

--517aaa22	2015-01-01T13:36:16-08:00	Kenton Varda	kenton@sandstorm.io	Implement test filtering.

517aaa22
1	0	c++/Makefile.am
1	0	c++/src/kj/CMakeLists.txt
83	0	c++/src/kj/test-test.c++
143	16	c++/src/kj/test.c++
25	1	c++/src/kj/test.h

--6cd25260	2014-12-29T17:11:47-08:00	Kenton Varda	kenton@sandstorm.io	Add a testing framework to KJ and rip out gtest.

A compatibility layer is provided to ease migration.

6cd25260
0	3	.gitignore
14	36	c++/Makefile.am
0	9	c++/configure.ac
1	12	c++/setup-autotools.sh
0	42	c++/src/CMakeLists.txt
2	2	c++/src/capnp/CMakeLists.txt
1	1	c++/src/capnp/any-test.c++
1	1	c++/src/capnp/blob-test.c++
1	1	c++/src/capnp/capability-test.c++
1	1	c++/src/capnp/common-test.c++
2	2	c++/src/capnp/common.h
2	2	c++/src/capnp/compiler/lexer-test.c++
1	1	c++/src/capnp/compiler/md5-test.c++
2	2	c++/src/capnp/dynamic-test.c++
6	13	c++/src/capnp/encoding-test.c++
1	1	c++/src/capnp/endian-reverse-test.c++
1	1	c++/src/capnp/endian-test.c++
1	1	c++/src/capnp/ez-rpc-test.c++
25	0	c++/src/capnp/generated-header-support.h
3	3	c++/src/capnp/layout-test.c++
1	1	c++/src/capnp/message-test.c++
1	1	c++/src/capnp/orphan-test.c++
10	1	c++/src/capnp/rpc-test.c++
10	1	c++/src/capnp/rpc-twoparty-test.c++
1	1	c++/src/capnp/schema-loader-test.c++
1	1	c++/src/capnp/schema-parser-test.c++
10	1	c++/src/capnp/schema-test.c++
8	0	c++/src/capnp/schema.c++
5	0	c++/src/capnp/schema.h
22	13	c++/src/capnp/serialize-async-test.c++
9	44	c++/src/capnp/serialize-packed-test.c++
4	3	c++/src/capnp/serialize-test.c++
1	7	c++/src/capnp/stringify-test.c++
9	0	c++/src/capnp/stringify.c++
1	1	c++/src/capnp/test-util.c++
24	12	c++/src/capnp/test-util.h
17	2	c++/src/kj/CMakeLists.txt
1	1	c++/src/kj/arena-test.c++
1	1	c++/src/kj/array-test.c++
3	3	c++/src/kj/async-io-test.c++
2	2	c++/src/kj/async-test.c++
43	26	c++/src/kj/async-unix-test.c++
6	5	c++/src/kj/common-test.c++
108	0	c++/src/kj/compat/gtest.h
9	14	c++/src/kj/debug-test.c++
10	21	c++/src/kj/debug.c++
15	26	c++/src/kj/debug.h
8	2	c++/src/kj/exception-test.c++
40	25	c++/src/kj/exception.c++
29	4	c++/src/kj/exception.h
1	1	c++/src/kj/function-test.c++
1	1	c++/src/kj/io-test.c++
1	1	c++/src/kj/memory-test.c++
1	1	c++/src/kj/mutex-test.c++
1	1	c++/src/kj/one-of-test.c++
1	1	c++/src/kj/parse/char-test.c++
1	1	c++/src/kj/parse/common-test.c++
1	1	c++/src/kj/refcount-test.c++
1	1	c++/src/kj/std/iostream-test.c++
1	4	c++/src/kj/string-test.c++
1	1	c++/src/kj/string-tree-test.c++
4	0	c++/src/kj/string.c++
4	3	c++/src/kj/string.h
280	0	c++/src/kj/test.c++
77	0	c++/src/kj/test.h
1	1	c++/src/kj/threadlocal-test.c++
1	1	c++/src/kj/tuple-test.c++
3	3	c++/src/kj/units-test.c++
3	12	super-test.sh

--46b2a376	2014-12-29T14:56:58-08:00	Kenton Varda	kenton@sandstorm.io	Fix weird linker issues.

46b2a376
3	13	c++/src/kj/async-inl.h
21	0	c++/src/kj/async.c++

--e22e5641	2014-12-29T14:37:23-08:00	Kenton Varda	kenton@sandstorm.io	Fix joinPromises for Promise<void>.

e22e5641
24	0	c++/src/kj/async-inl.h
2	0	c++/src/kj/async-prelude.h
14	0	c++/src/kj/async-test.c++
1	0	c++/src/kj/async.h

--169b1e51	2014-12-29T10:17:14-08:00	David Renshaw	dwrenshaw@gmail.com	refcount typos

169b1e51
2	2	c++/src/kj/refcount.h

--fe0a24dd	2014-12-29T10:06:16-08:00	David Renshaw	dwrenshaw@gmail.com	more typos

fe0a24dd
2	2	c++/src/capnp/compiler/node-translator.c++
2	2	c++/src/capnp/schema.h

--19b53520	2014-12-29T09:55:17-08:00	David Renshaw	dwrenshaw@gmail.com	typo: mesasge -> message

19b53520
1	1	c++/src/capnp/layout.c++
1	1	c++/src/capnp/rpc.capnp

--68ad3220	2014-12-28T17:47:05-08:00	Kenton Varda	kenton@sandstorm.io	Add interfaces for UDP networking, with support for receiving ancillary data.

68ad3220
146	0	c++/src/kj/async-io-test.c++
322	4	c++/src/kj/async-io.c++
174	16	c++/src/kj/async-io.h
18	0	c++/src/kj/common.h
1	1	super-test.sh

--8b7fdebb	2014-12-23T15:24:04-08:00	Kenton Varda	kenton@sandstorm.io	Fix typo (only a warning, not an error, apparently).

8b7fdebb
1	1	c++/src/kj/debug.c++

--26e6cfd3	2014-12-23T13:56:55-08:00	Kenton Varda	kenton@sandstorm.io	Don't spew errors to the console whenever RPC gets disconnected. Fixes #163.

26e6cfd3
11	2	c++/src/capnp/rpc.c++
10	0	c++/src/kj/debug.c++

--48a5daaa	2014-12-15T10:32:06-08:00	Kenton Varda	kenton@sandstorm.io	Release script fix.

48a5daaa
1	0	release.sh

--67b322da	2014-12-15T10:27:51-08:00	Kenton Varda	kenton@sandstorm.io	Last-minute doc fixes.

67b322da
5	5	doc/_posts/2014-12-15-capnproto-0.5-generics-msvc-java-csharp.md
1	1	doc/encoding.md
5	0	doc/push-site.sh

--cc53e84d	2014-12-15T00:10:16-08:00	Kenton Varda	kenton@sandstorm.io	Add missing file to Makefile.am.

Failed to notice this because only the cmake build refers to it, and this only makes cmake fail on installation, which was never quite tested.

cc53e84d
2	1	c++/Makefile.am
4	4	mega-test.cfg

--181cb384	2014-12-14T13:04:58-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

181cb384
--274088f7	2014-12-13T22:00:14-08:00	Kenton Varda	kenton@sandstorm.io	Document new features in 0.5: Generics and canonicalization.

274088f7
23	7	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md
116	0	doc/_posts/2014-12-15-capnproto-0.5-generics-msvc-java-csharp.md
40	0	doc/cxx.md
8	0	doc/cxxrpc.md
109	66	doc/encoding.md
173	7	doc/language.md
25	6	doc/rpc.md

--9db3d4be	2014-12-14T02:08:27-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #160 from pqu/doc

Tweak installation documentation
9db3d4be
--a5bacee9	2014-12-14T19:07:31+13:00	Philip Quinn	p@partylemon.com	Tweak installation documentation.

a5bacee9
1	0	CONTRIBUTORS
19	13	doc/install.md

--4c7ae535	2014-12-13T18:51:29-08:00	Kenton Varda	kenton@sandstorm.io	Fix test script ugh.

4c7ae535
5	5	mega-test-quick.cfg
1	1	super-test.sh

--14bd8cdc	2014-12-13T18:37:03-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

14bd8cdc
--6aa9cb02	2014-12-13T00:15:22-08:00	Kenton Varda	kenton@sandstorm.io	Twiddle the set of warnings that we test against in super-test.sh.

I've added -Wextra as well as removed some of the -Wno-* flags and fixed issues in the code.

Also fixed the cmake build to put user-defined flags after default flags so that they can be overridden.

6aa9cb02
18	3	c++/CMakeLists.txt
1	1	c++/Makefile.am
3	0	c++/src/capnp/rpc.h
1	1	c++/src/capnp/serialize-test.c++
8	2	c++/src/kj/async-unix.c++
6	6	mega-test.cfg
10	10	super-test.sh

--5b76289b	2014-12-12T12:45:40-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #159 from taralx/patch-1

Minor fixes to comments in rpc.capnp
5b76289b
--ebf43a8c	2014-12-12T02:25:17-08:00	Kenton Varda	kenton@sandstorm.io	Fix upload step of release script.

ebf43a8c
1	1	release.sh

--f2b53c5f	2014-12-12T02:24:32-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

f2b53c5f
--15574960	2014-12-12T02:24:19-08:00	Kenton Varda	kenton@sandstorm.io	Remove obsolete MSVC stuff.

15574960
0	34	c++/msvc/capnproto.sln
0	262	c++/msvc/capnproto.vcxproj
0	5	c++/msvc/gen-test-code.bat
0	19	c++/msvc/readme.txt

--a6505910	2014-12-12T02:08:41-08:00	Kenton Varda	kenton@sandstorm.io	Set mainlaine version to 0.6-dev.

a6505910
1	1	c++/configure.ac
1	1	c++/src/capnp/c++.capnp.h
1	1	c++/src/capnp/common.h
1	1	c++/src/capnp/compiler/grammar.capnp.h
1	1	c++/src/capnp/compiler/lexer.capnp.h
1	1	c++/src/capnp/persistent.capnp.h
1	1	c++/src/capnp/rpc-twoparty.capnp.h
1	1	c++/src/capnp/rpc.capnp.h
1	1	c++/src/capnp/schema.capnp.h

--497ef823	2014-12-12T02:05:04-08:00	Kenton Varda	kenton@sandstorm.io	Tweak release.sh some more.

497ef823
1	1	release.sh

--a66cdcb3	2014-12-12T02:01:08-08:00	Kenton Varda	kenton@sandstorm.io	Tweak release.sh some more.

a66cdcb3
3	3	release.sh

--9fe1aaff	2014-12-12T01:46:57-08:00	Kenton Varda	kenton@sandstorm.io	Revamp installation docs, in particular to include MSVC info.

9fe1aaff
0	15	doc/faq.md
75	101	doc/install.md

--6b167f2b	2014-12-12T01:20:10-08:00	Kenton Varda	kenton@sandstorm.io	Improve release script's windows build.

6b167f2b
4	1	release.sh

--3a24f676	2014-12-12T01:11:15-08:00	Kenton Varda	kenton@sandstorm.io	Apparently distcheck and dist-zip will stomp each other if run in parallel.

3a24f676
2	1	release.sh

--ff93def6	2014-12-12T01:07:42-08:00	Kenton Varda	kenton@sandstorm.io	Resolve TODO(now|soon) and remove KJ_DBG.

ff93def6
2	3	c++/src/capnp/compiler/capnpc-c++.c++
1	1	c++/src/capnp/layout.c++
0	1	c++/src/capnp/message-test.c++
1	1	c++/src/capnp/stringify.c++
1	1	c++/src/kj/async-io.c++
1	1	c++/src/kj/async.c++
2	3	c++/src/kj/exception.c++
1	2	c++/src/kj/exception.h

--e5747a57	2014-12-12T00:57:35-08:00	Kenton Varda	kenton@sandstorm.io	Update release script to build Windows package.

e5747a57
12	4	release.sh

--56f29220	2014-12-12T00:48:00-08:00	Kenton Varda	kenton@sandstorm.io	Include cmake files in automake dist.

56f29220
15	3	c++/Makefile.am
1	1	super-test.sh

--04fd66e2	2014-12-12T00:13:26-08:00	Kenton Varda	kenton@sandstorm.io	Move cmake files into c++ subdir.

The idea behind the directory organization was that we might have official implementations for other languages in other top-level directories, as siblings to the c++ directory. It seems implausible that we'd use CMake as a meta-build-system over all of these.

Another reason for this change is that the release tarball actually contains only the c++ subdirectory. We probably want to include cmake files in the release.

04fd66e2
0	30	CMakeLists.txt
28	0	c++/CMakeLists.txt
0	0	{cmake => c++/cmake}/FindCapnProto.cmake
1	0	super-test.sh

--8ce295c4	2014-12-11T23:10:25-08:00	Kenton Varda	kenton@sandstorm.io	Add cmake to exotic tests.

8ce295c4
12	0	super-test.sh

--e85ee475	2014-12-11T20:39:12-08:00	Kenton Varda	kenton@sandstorm.io	MSVC: Fix issues so cmake build works.

e85ee475
1	1	c++/src/capnp/CMakeLists.txt
62	3	c++/src/capnp/compiler/capnp.c++
1	1	cmake/FindCapnProto.cmake

--52703fcf	2014-12-11T18:13:27-08:00	Kenton Varda	kenton@sandstorm.io	Update bootstraps.

52703fcf
2	0	c++/src/capnp/persistent.capnp.h

--cff03dec	2014-12-11T17:56:06-08:00	Kenton Varda	kenton@sandstorm.io	De-flake timing-dependent test.

cff03dec
9	6	c++/src/capnp/rpc-twoparty-test.c++
6	6	mega-test.cfg

--ff0f1535	2014-12-11T17:30:48-08:00	Kenton Varda	kenton@sandstorm.io	Fix uninitialized memory usage found by valgrind.

ff0f1535
1	1	c++/src/capnp/layout.h
24	13	c++/src/capnp/schema-loader.c++

--dec098cc	2014-12-11T01:21:34-08:00	Kenton Varda	kenton@sandstorm.io	Update mega-test, and make tests pass.

dec098cc
1	0	c++/src/capnp/compiler/capnpc-c++.c++
24	12	c++/src/capnp/rpc-test.c++
26	26	c++/src/capnp/schema-test.c++
3	1	c++/src/capnp/schema.c++
4	3	c++/src/kj/async-io-test.c++
2	0	c++/src/kj/async-unix.c++
2	4	c++/src/kj/std/iostream-test.c++
2	0	c++/src/kj/string.c++
3	3	mega-test.cfg
11	2	super-test.sh

--3b60a4cb	2014-12-10T23:34:48-08:00	Kenton Varda	kenton@sandstorm.io	Add test scripts for MinGW and Android.

3b60a4cb
5	0	c++/src/capnp/rpc-twoparty-test.c++
1	1	c++/src/kj/exception.c++
1	0	mega-test.cfg
87	82	super-test.sh

--13c52b82	2014-12-10T21:18:50-08:00	Kenton Varda	kenton@sandstorm.io	Support Android.

13c52b82
1	1	c++/src/capnp/serialize-test.c++
4	0	c++/src/kj/async-io-test.c++
7	7	c++/src/kj/async-io.c++
5	1	c++/src/kj/async-unix-test.c++
2	1	c++/src/kj/async-unix.h
12	0	c++/src/kj/mutex.c++

--792c66aa	2014-12-10T15:03:09-08:00	taralx	taralx@gmail.com	Minor fixes to comments in rpc.capnp

Remove a reference to Main, add a comment about the legality of acceptFromThirdParty, and fix a few typos and one pervasive grammatical error.
792c66aa
47	47	c++/src/capnp/rpc.capnp

--177fb269	2014-12-09T20:44:01-08:00	Kenton Varda	kenton@sandstorm.io	Fixes #115

177fb269
1	0	c++/src/capnp/rpc-prelude.h
41	0	c++/src/capnp/rpc-test.c++
32	0	c++/src/capnp/rpc-twoparty-test.c++
10	1	c++/src/capnp/rpc-twoparty.c++
3	1	c++/src/capnp/rpc-twoparty.h
13	5	c++/src/capnp/rpc.c++
1	1	c++/src/capnp/rpc.capnp
4	0	c++/src/capnp/rpc.h
4	4	c++/src/kj/debug.h
7	0	c++/src/kj/memory.h

--e2dd39b3	2014-12-09T18:12:29-08:00	Kenton Varda	kenton@sandstorm.io	Extend previous change for flat arrays as well.

e2dd39b3
16	0	c++/src/capnp/serialize-test.c++
7	0	c++/src/capnp/serialize.c++
15	0	c++/src/capnp/serialize.h

--ae225aa7	2014-12-09T17:57:22-08:00	Kenton Varda	kenton@sandstorm.io	Add an easier way to read a message directly into a builder. Requires a copy for security/validation.

ae225aa7
14	0	c++/src/capnp/serialize-test.c++
12	0	c++/src/capnp/serialize.c++
26	2	c++/src/capnp/serialize.h

--02157fcb	2014-12-09T17:44:10-08:00	Kenton Varda	kenton@sandstorm.io	Fix build on GCC.

02157fcb
1	1	c++/src/capnp/message-test.c++

--14c2b08e	2014-12-09T17:34:00-08:00	Kenton Varda	kenton@sandstorm.io	Add hooks allowing a MessageBuilder to be initialized from existing memory.

14c2b08e
27	0	c++/src/capnp/arena.c++
6	4	c++/src/capnp/arena.h
108	0	c++/src/capnp/message-test.c++
6	0	c++/src/capnp/message.c++
29	0	c++/src/capnp/message.h

--4b31d5a2	2014-12-08T22:33:50-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

4b31d5a2
--36df9e4c	2014-12-08T22:30:55-08:00	Kenton Varda	kenton@sandstorm.io	Extend EventPort interface to support cross-thread wakeups.

This is not currently used, but eventually we'll use this to support efficient inter-thread messaging.

That said, I've decided that inter-thread messaging is complicated and I don't want to work on it right now.

36df9e4c
2	2	c++/src/kj/async-test.c++
28	0	c++/src/kj/async-unix-test.c++
53	11	c++/src/kj/async-unix.c++
6	3	c++/src/kj/async-unix.h
13	2	c++/src/kj/async.c++
20	4	c++/src/kj/async.h
2	2	c++/src/kj/io.h

--f86de2e8	2014-12-08T14:36:28-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #154 from pqu/cmake

CMake support for MSVC/Visual Studio
f86de2e8
--9dc1cfa3	2014-12-08T12:35:20-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #156 from dwrensha/typo

fix some typos
9dc1cfa3
--7dd63203	2014-12-08T11:04:29-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #157 from mortehu/master

Wait for writeable, rather than readable, socket on connect.
7dd63203
--938b8f71	2014-12-08T10:36:27-08:00	Morten Hustveit	morten.hustveit@gmail.com	Wait for writeable, rather than readable, socket on connect.

938b8f71
1	1	c++/src/kj/async-io.c++

--dbc64250	2014-12-08T10:43:20-05:00	David Renshaw	dwrenshaw@gmail.com	fix some typos

dbc64250
1	1	c++/src/capnp/layout.c++
1	1	c++/src/capnp/rpc.capnp
2	2	c++/src/capnp/schema.capnp

--d8958a54	2014-12-06T12:10:35-08:00	Kenton Varda	kenton@sandstorm.io	si_addr_lsb is fairly new; only copy if defined.

d8958a54
2	0	c++/src/kj/async-unix.c++

--c50dd602	2014-12-06T02:01:26-08:00	Kenton Varda	kenton@sandstorm.io	Use edge-triggered epoll on Linux.

c50dd602
11	12	c++/src/kj/async-io.c++
52	21	c++/src/kj/async-unix-test.c++
453	142	c++/src/kj/async-unix.c++
58	56	c++/src/kj/async-unix.h

--9ec588a2	2014-12-01T23:04:50+13:00	Philip Quinn	p@partylemon.com	CMake: Simplify gtest library paths and use the default MSVC CRT flags.

9ec588a2
0	5	c++/CMakeLists.txt
18	15	c++/src/CMakeLists.txt

--50b9a529	2014-11-30T19:57:25-08:00	Kenton Varda	kenton@sandstorm.io	Refactor UnixEventPort interface to be edge-triggering-friendly.

50b9a529
88	36	c++/src/kj/async-io.c++
93	18	c++/src/kj/async-unix-test.c++
33	7	c++/src/kj/async-unix.c++
132	6	c++/src/kj/async-unix.h

--d4dc32d6	2014-11-30T13:28:51-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

d4dc32d6
--2a2d82fd	2014-11-30T13:28:40-08:00	Kenton Varda	kenton@sandstorm.io	Fix 32-bit build.

2a2d82fd
79	36	c++/src/capnp/schema-loader.c++
8	5	c++/src/capnp/schema.c++
27	3	c++/src/capnp/schema.h
2	2	c++/src/kj/common.c++

--aa47edcc	2014-12-01T00:36:31+13:00	Philip Quinn	p@partylemon.com	CMake: Reduce MSVC warning level

aa47edcc
1	1	c++/CMakeLists.txt

--1e4fc25f	2014-11-30T18:34:46+13:00	Philip Quinn	p@partylemon.com	CMake: Fix paths to gtest libraries for the Xcode generator.

1e4fc25f
6	0	c++/src/CMakeLists.txt

--4d452c37	2014-11-25T22:43:45+13:00	Philip Quinn	p@partylemon.com	MSVC: Qualify `std::initializer_list` to fix name lookup when compiling 'iostream-test.c++'.

4d452c37
1	1	c++/src/kj/common.h

--a3835b4c	2014-11-25T22:40:05+13:00	Philip Quinn	p@partylemon.com	CMake: Remove redundant MSVC test.

CMake automatically patches the switch character.

a3835b4c
1	3	c++/CMakeLists.txt

--2db5ef63	2014-11-25T22:23:48+13:00	Philip Quinn	p@partylemon.com	CMake: Update CMakeLists with MSVC compiler flags and paths.

2db5ef63
4	0	CMakeLists.txt
18	1	c++/CMakeLists.txt
13	6	c++/src/CMakeLists.txt

--0f9a4777	2014-11-25T00:58:24+13:00	Philip Quinn	p@partylemon.com	CMake: Add support for CAPNP_LITE version of kj to support MSVC builds.

0f9a4777
26	18	c++/src/kj/CMakeLists.txt

--8d9e8a0f	2014-11-29T22:47:24-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #152 from pqu/cmake-fix

CMake: Fix #149.
8d9e8a0f
--a8d0bff8	2014-11-29T22:45:06-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #153 from pqu/_msc_ver-def

Check for the definition of `_MSC_VER`, rather than its value.
a8d0bff8
--d580738c	2014-11-30T18:17:29+13:00	Philip Quinn	p@partylemon.com	Check for the definition of `_MSC_VER`, rather than its value.

d580738c
3	3	c++/src/capnp/compiler/capnpc-c++.c++
24	24	c++/src/capnp/compiler/grammar.capnp.c++
4	4	c++/src/capnp/compiler/lexer.capnp.c++
4	4	c++/src/capnp/persistent.capnp.h
6	6	c++/src/capnp/rpc-twoparty.capnp.c++
20	20	c++/src/capnp/rpc.capnp.c++
32	32	c++/src/capnp/schema.capnp.c++

--3c711c07	2014-11-30T18:06:05+13:00	Philip Quinn	p@partylemon.com	CMake: Fix #149.

3c711c07
1	1	CMakeLists.txt

--fd669b11	2014-11-29T14:01:13-08:00	Kenton Varda	kenton@sandstorm.io	Comment typo.

fd669b11
1	1	c++/src/capnp/serialize.h

--be857cc4	2014-11-29T13:54:11-08:00	Kenton Varda	kenton@sandstorm.io	Fix build on OSX, etc. by checking whether each errno is defined.

be857cc4
42	2	c++/src/kj/debug.c++

--05620fa8	2014-11-28T23:49:30-08:00	Kenton Varda	kenton@sandstorm.io	Throw new 'unimplemented' exception type from unimplemented capability methods.

05620fa8
4	1	c++/src/capnp/capability-test.c++
3	3	c++/src/capnp/capability.c++
8	2	c++/src/kj/debug.c++
34	4	c++/src/kj/debug.h

--0af31360	2014-11-28T23:37:46-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'exception-rewrite'

Conflicts:
	c++/src/kj/common.h

0af31360
--4ee25e43	2014-11-23T18:29:38-08:00	Kenton Varda	kenton@sandstorm.io	Simplify exceptions. Eliminate Durability. Rename Nature to Type and simplify it.

Distinguishing between "local bugs" and "preconditions" was proving difficult in practice, because a precondition failure in one function may very well indicate a bug in a calling function, but the exception may be thrown through that function, thus when caught the classification is nonsensical. The distinction also was not as useful as imagined. So, I eliminated this distinction.

4ee25e43
1	2	c++/src/capnp/capability.c++
0	7	c++/src/capnp/compiler/capnp.c++
1	3	c++/src/capnp/rpc-test.c++
7	42	c++/src/capnp/rpc.c++
75	18	c++/src/capnp/rpc.capnp
67	48	c++/src/capnp/rpc.capnp.c++
41	21	c++/src/capnp/rpc.capnp.h
2	2	c++/src/capnp/schema-parser.c++
1	3	c++/src/kj/async-inl.h
2	13	c++/src/kj/common.c++
3	18	c++/src/kj/common.h
43	19	c++/src/kj/debug-test.c++
47	8	c++/src/kj/debug.c++
47	55	c++/src/kj/debug.h
21	34	c++/src/kj/exception.c++
29	37	c++/src/kj/exception.h
1	3	c++/src/kj/time.c++
4	2	c++/src/kj/time.h

--79a81a09	2014-11-28T18:01:50-08:00	Kenton Varda	kenton@sandstorm.io	Oops.

79a81a09
3	3	c++/src/capnp/serialize.h

--d6ac88f0	2014-11-28T17:58:07-08:00	Kenton Varda	kenton@sandstorm.io	Add asBytes() and asChars() methods to array classes to reinterpret-cast to bytes / chars, since this happens all the time and is otherwise a huge pain.

Use the new methods in a bunch of places.

d6ac88f0
3	1	c++/src/capnp/blob.h
1	2	c++/src/capnp/compiler/capnp.c++
2	4	c++/src/capnp/compiler/lexer.c++
1	1	c++/src/capnp/compiler/md5.h
1	2	c++/src/capnp/compiler/node-translator.c++
2	4	c++/src/capnp/dynamic.c++
1	1	c++/src/capnp/orphan-test.c++
2	4	c++/src/capnp/schema-loader.c++
2	4	c++/src/capnp/serialize-async.c++
2	3	c++/src/capnp/serialize-packed-test.c++
3	3	c++/src/capnp/serialize-test.c++
3	4	c++/src/capnp/serialize.c++
8	0	c++/src/capnp/serialize.h
1	2	c++/src/capnp/stringify.c++
2	2	c++/src/capnp/test-util.h
5	0	c++/src/kj/array.h
120	0	c++/src/kj/common-test.c++
18	0	c++/src/kj/common.h
8	2	c++/src/kj/parse/char.h
3	0	c++/src/kj/string.h

--47c9e18e	2014-11-28T17:36:51-08:00	Kenton Varda	kenton@sandstorm.io	Update outdated bootstrap files.

47c9e18e
10	10	c++/src/capnp/persistent.capnp.c++

--10c4fb31	2014-11-28T12:57:17-08:00	Kenton Varda	kenton@sandstorm.io	Merge branch 'master' of github.com:kentonv/capnproto

10c4fb31
--acc26a34	2014-11-28T12:56:58-08:00	Kenton Varda	kenton@sandstorm.io	Fixes #150

acc26a34
8	0	c++/src/capnp/compiler/compiler.c++

--d6a45490	2014-11-27T22:11:48-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #148 from zombiezen/patch-1

Add missing semicolon in Interfaces example
d6a45490
--12ae2b6e	2014-11-24T01:04:23-08:00	Kenton Varda	kenton@sandstorm.io	MSVC: Work around some cases where templates nested in templates trigger compiler bugs.

12ae2b6e
24	1	c++/src/capnp/compiler/capnpc-c++.c++

--8d6ca6e0	2014-11-24T00:11:58-08:00	Kenton Varda	kenton@sandstorm.io	Fix build on non-MSVC compilers.

8d6ca6e0
2	2	c++/src/capnp/layout.h
4	4	c++/src/capnp/test-util.h
11	3	c++/src/kj/common.h

--ebce4aa6	2014-11-23T23:55:42-08:00	Kenton Varda	kenton@sandstorm.io	MSVC: All lite-mode tests pass.

The project file still only compiles a test binary, but it should be easy to separate out a library project from here.

Thanks again to Bryan Boreham <bjboreham@gmail.com> for much help getting this working.

ebce4aa6
122	2	c++/msvc/capnproto.vcxproj
5	0	c++/msvc/gen-test-code.bat
9	0	c++/msvc/readme.txt
8	0	c++/src/capnp/any-test.c++
24	16	c++/src/capnp/any.h
2	0	c++/src/capnp/blob.h
34	4	c++/src/capnp/common.h
1	35	c++/src/capnp/encoding-test.c++
18	0	c++/src/capnp/endian.h
3	1	c++/src/capnp/layout-test.c++
15	12	c++/src/capnp/layout.c++
17	1	c++/src/capnp/layout.h
1	2	c++/src/capnp/message.c++
10	11	c++/src/capnp/serialize-packed-test.c++
6	1	c++/src/capnp/serialize-test.c++
6	4	c++/src/capnp/serialize.c++
2	2	c++/src/capnp/test-util.c++
28	11	c++/src/capnp/test-util.h
10	0	c++/src/kj/common.c++
19	3	c++/src/kj/common.h
8	4	c++/src/kj/mutex-test.c++
1	1	c++/src/kj/mutex.c++
1	1	c++/src/kj/thread.h
10	0	c++/src/kj/units.h

--ead1a3b3	2014-11-23T18:50:45-08:00	Kenton Varda	kenton@sandstorm.io	MSVC: Work around constexpr bugs in generated code.

ead1a3b3
28	6	c++/src/capnp/compiler/capnpc-c++.c++
96	24	c++/src/capnp/compiler/grammar.capnp.c++
16	4	c++/src/capnp/compiler/lexer.capnp.c++
23	6	c++/src/capnp/generated-header-support.h
2	10	c++/src/capnp/layout.h
20	4	c++/src/capnp/persistent.capnp.h
24	6	c++/src/capnp/rpc-twoparty.capnp.c++
80	20	c++/src/capnp/rpc.capnp.c++
126	31	c++/src/capnp/schema.capnp.c++

--428f1313	2014-11-23T13:06:26-08:00	Kenton Varda	temporal@gmail.com	Timeouts: Add convenience helpers to kj::Timer interface for adding a timeout to any Promise.

428f1313
2	1	c++/Makefile.am
2	1	c++/src/kj/CMakeLists.txt
12	0	c++/src/kj/async-io-test.c++
34	0	c++/src/kj/time.c++
30	0	c++/src/kj/time.h

--8175968f	2014-11-22T20:50:58-08:00	Kenton Varda	temporal@gmail.com	Fix Windows bug that doesn't happen under wine: stdin defaults to text mode, which of course breaks compiler plugins.

8175968f
20	0	c++/src/kj/main.c++

--13d1baf7	2014-11-22T20:25:56-08:00	Kenton Varda	temporal@gmail.com	Fix MinGW build.

13d1baf7
20	8	c++/src/kj/miniposix.h

--9662a6a5	2014-11-22T19:56:05-08:00	Kenton Varda	kenton@sandstorm.io	MSVC: Build and test parts of KJ needed in lite mode.

Thanks to Bryan Boreham <bjboreham@gmail.com> for much help getting this started.

9662a6a5
2	1	CONTRIBUTORS
1	0	c++/Makefile.am
34	0	c++/msvc/capnproto.sln
142	0	c++/msvc/capnproto.vcxproj
10	0	c++/msvc/readme.txt
1	0	c++/src/kj/CMakeLists.txt
1	1	c++/src/kj/array.h
106	17	c++/src/kj/common.h
29	12	c++/src/kj/debug-test.c++
95	0	c++/src/kj/debug.h
22	2	c++/src/kj/exception.c++
2	8	c++/src/kj/io-test.c++
6	6	c++/src/kj/io.c++
1	1	c++/src/kj/memory-test.c++
54	28	c++/src/kj/{io-test.c++ => miniposix.h}
10	5	c++/src/kj/string.c++
1	1	c++/src/kj/string.h
6	2	c++/src/kj/threadlocal.h

--b7e166c1	2014-11-22T10:35:44-08:00	Ross Light	ross@zombiezen.com	Add missing semicolon in Interfaces example
b7e166c1
1	1	doc/language.md

--0d6b9704	2014-11-22T01:09:18-08:00	Kenton Varda	temporal@gmail.com	Force headers to be treated as system headers when included by application code.

This prevents the compiler from reporting warnings in these headers while compiling application code. Hopefully this will stem the never-ending stream of complaints from people who enable pedantic warnings.

0d6b9704
1	1	c++/Makefile.am
4	0	c++/src/capnp/any.h
4	0	c++/src/capnp/arena.h
4	0	c++/src/capnp/benchmark/capnproto-common.h
4	0	c++/src/capnp/benchmark/common.h
4	0	c++/src/capnp/blob.h
4	0	c++/src/capnp/capability.h
4	0	c++/src/capnp/common.h
4	0	c++/src/capnp/compiler/compiler.h
4	0	c++/src/capnp/compiler/error-reporter.h
4	0	c++/src/capnp/compiler/lexer.h
4	0	c++/src/capnp/compiler/module-loader.h
4	0	c++/src/capnp/compiler/node-translator.h
4	0	c++/src/capnp/compiler/parser.h
4	0	c++/src/capnp/dynamic.h
4	0	c++/src/capnp/endian.h
4	0	c++/src/capnp/ez-rpc.h
4	0	c++/src/capnp/generated-header-support.h
4	0	c++/src/capnp/layout.h
4	0	c++/src/capnp/list.h
4	0	c++/src/capnp/message.h
4	0	c++/src/capnp/orphan.h
4	0	c++/src/capnp/pointer-helpers.h
4	0	c++/src/capnp/pretty-print.h
4	0	c++/src/capnp/rpc-prelude.h
4	0	c++/src/capnp/rpc-twoparty.h
4	0	c++/src/capnp/rpc.h
4	0	c++/src/capnp/schema-lite.h
4	0	c++/src/capnp/schema-loader.h
4	0	c++/src/capnp/schema-parser.h
4	0	c++/src/capnp/schema.h
4	0	c++/src/capnp/serialize-async.h
4	0	c++/src/capnp/serialize-packed.h
4	0	c++/src/capnp/serialize.h
4	0	c++/src/capnp/test-util.h
4	0	c++/src/kj/arena.h
4	0	c++/src/kj/array.h
4	0	c++/src/kj/async-inl.h
4	0	c++/src/kj/async-io.h
4	0	c++/src/kj/async-prelude.h
4	0	c++/src/kj/async-unix.h
4	0	c++/src/kj/async.h
4	0	c++/src/kj/common.h
4	0	c++/src/kj/debug.h
4	0	c++/src/kj/exception.h
4	0	c++/src/kj/function.h
4	0	c++/src/kj/io.h
4	0	c++/src/kj/main.h
4	0	c++/src/kj/memory.h
4	0	c++/src/kj/mutex.h
4	0	c++/src/kj/one-of.h
4	0	c++/src/kj/parse/char.h
4	0	c++/src/kj/parse/common.h
4	0	c++/src/kj/refcount.h
4	0	c++/src/kj/std/iostream.h
4	0	c++/src/kj/string-tree.h
4	0	c++/src/kj/string.h
4	0	c++/src/kj/thread.h
4	0	c++/src/kj/threadlocal.h
4	0	c++/src/kj/time.h
4	0	c++/src/kj/tuple.h
4	0	c++/src/kj/units.h
4	0	c++/src/kj/vector.h
4	0	c++/src/kj/windows-sanity.h

--e7828642	2014-11-22T00:47:38-08:00	Kenton Varda	temporal@gmail.com	Fix bug where EzRpcClient would segfault if the target host resolved to multiple addresses and the connection to the first of those failed.

e7828642
8	3	c++/src/capnp/ez-rpc.c++

--9ea9e4cd	2014-11-22T00:27:23-08:00	Kenton Varda	temporal@gmail.com	Fix todo format.

9ea9e4cd
1	1	c++/src/capnp/any.h
1	1	c++/src/capnp/capability.h

--cc5a6f76	2014-11-22T00:20:47-08:00	Kenton Varda	temporal@gmail.com	Fixes #72.

cc5a6f76
25	3	c++/src/kj/async-io-test.c++

--dc44fee8	2014-11-21T23:58:02-08:00	Kenton Varda	temporal@gmail.com	Treat UTF-8 BOMs as whitespace. Complain if other BOMs or obviously-non-UTF-8 data is seen.

dc44fee8
10	0	c++/src/capnp/compiler/lexer-test.c++
20	5	c++/src/capnp/compiler/lexer.c++

--34734994	2014-11-21T23:28:43-08:00	Kenton Varda	temporal@gmail.com	Fix ekam build.

34734994
1	0	c++/src/capnp/capnpc.ekam-rule

--b2bd5e55	2014-11-21T22:28:29-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

b2bd5e55
--5be1c625	2014-11-21T22:22:15-08:00	Kenton Varda	temporal@gmail.com	MinGW: Eliminate dependency on winpthread.

kernel32.dll and msvcrt.dll are the only remaining dependencies.

5be1c625
5	10	c++/Makefile.am
15	0	c++/configure.ac
39	0	c++/m4/acx_pthread.m4
12	1	c++/src/kj/mutex-test.c++
82	38	c++/src/kj/mutex.c++
15	19	c++/src/kj/mutex.h
41	0	c++/src/kj/thread.c++
10	0	c++/src/kj/thread.h
2	0	c++/src/kj/threadlocal-pthread-test.c++

--b17b5ae8	2014-11-20T14:37:21-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #147 from teobugslayer/msvc

Accommodate code for MSVC
b17b5ae8
--c1d3386d	2014-11-19T18:53:23+02:00	Todor Totev	teobugslayer@gmail.com	Implement KJ_NORETURN in MSVC compatible way
Add __forceinline for MSVC

c1d3386d
1	1	c++/src/kj/async-prelude.h
15	6	c++/src/kj/common.h
1	1	c++/src/kj/debug.h
1	1	c++/src/kj/exception.h
2	2	c++/src/kj/main.c++
6	6	c++/src/kj/main.h

--1745aded	2014-11-17T19:11:22-08:00	Kenton Varda	temporal@gmail.com	MinGW: Entire compiler builds and runs.

1745aded
62	7	c++/src/capnp/compiler/capnp.c++
4	0	c++/src/capnp/compiler/capnpc-c++.c++
20	1	c++/src/capnp/compiler/module-loader.c++
20	1	c++/src/capnp/schema-parser.c++

--90cda34c	2014-11-17T17:14:38-08:00	Kenton Varda	temporal@gmail.com	MinGW: All tests pass in lite mode.

90cda34c
29	0	c++/src/capnp/serialize-test.c++
9	0	c++/src/kj/debug-test.c++
2	0	c++/src/kj/exception-test.c++
6	0	c++/src/kj/io-test.c++
14	1	c++/src/kj/io.c++
3	0	c++/src/kj/string-test.c++
16	0	c++/src/kj/string.c++

--df7d814a	2014-11-17T14:35:35-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

df7d814a
--787130ed	2014-11-17T14:33:35-08:00	Kenton Varda	temporal@gmail.com	Fix lite mode... again.

787130ed
11	5	c++/src/capnp/any.h

--8ebaa614	2014-11-16T16:28:26-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #144 from scottpurdy/std-compat

Adds kj::std as header-only compat layer
8ebaa614
--7868bf9f	2014-11-16T15:45:00-08:00	Scott Purdy	scott@fer.io	Response to comments on #144. Remove 'using namespace std' from header, added additional tests, updated comment style, and added self to CONTRIBUTORS.

7868bf9f
1	0	CONTRIBUTORS
48	1	c++/src/kj/std/iostream-test.c++
12	17	c++/src/kj/std/iostream.h

--01c05f5e	2014-11-16T14:28:32-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #145 from dwrensha/bit-struct-dead-code

remove obsolete list upgrade code for bit structs
01c05f5e
--255cf9b8	2014-11-16T17:06:33-05:00	David Renshaw	dwrenshaw@gmail.com	remove obsolete list upgrade code for bit structs

255cf9b8
0	7	c++/src/capnp/layout.c++

--dfdd49f8	2014-11-13T18:06:36-08:00	Kenton Varda	temporal@gmail.com	Add C# to other languages.

dfdd49f8
1	0	doc/otherlang.md

--847ea2c0	2014-11-13T16:29:38-08:00	Scott Purdy	scott@fer.io	Adds kj::std as header-only compat layer with iostream subclasses of InputStream and OutputStream.

847ea2c0
5	0	c++/Makefile.am
5	0	c++/src/kj/CMakeLists.txt
58	0	c++/src/kj/std/iostream-test.c++
89	0	c++/src/kj/std/iostream.h

--a181ec36	2014-11-12T20:40:20-08:00	Kenton Varda	temporal@gmail.com	Add tests for RealmGateway, fix bugs.

a181ec36
3	1	c++/src/capnp/persistent.capnp
20	0	c++/src/capnp/rpc-prelude.h
100	0	c++/src/capnp/rpc-test.c++
63	5	c++/src/capnp/rpc.c++
12	12	c++/src/capnp/rpc.h

--89b25093	2014-11-09T18:59:33-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'brandDeps' of github.com:pqu/capnproto into pqu-brandDeps

Conflicts:
	c++/src/capnp/rpc-twoparty.capnp.c++
	c++/src/capnp/rpc-twoparty.capnp.h
	c++/src/capnp/rpc.capnp.c++
	c++/src/capnp/rpc.capnp.h

89b25093
--dc982969	2014-11-09T03:32:17-08:00	Kenton Varda	temporal@gmail.com	Finish implementing RealmGateway -- but needs tests still.

dc982969
12	2	c++/src/capnp/rpc.c++

--680b6979	2014-11-09T01:14:07-08:00	Kenton Varda	temporal@gmail.com	More fixes for AnyPointer / AnyList.

680b6979
19	1	c++/src/capnp/any-test.c++
73	56	c++/src/capnp/any.h
48	0	c++/src/capnp/compiler/grammar.capnp.h
8	0	c++/src/capnp/compiler/lexer.capnp.h
8	0	c++/src/capnp/persistent.capnp.h
12	0	c++/src/capnp/rpc-twoparty.capnp.h
40	0	c++/src/capnp/rpc.capnp.h
62	0	c++/src/capnp/schema.capnp.h

--5f07c032	2014-11-09T00:53:20-08:00	Kenton Varda	temporal@gmail.com	Mass-rename capnp::_::FieldSize -> capnp::ElementSize.

5f07c032
3	3	c++/src/capnp/capability.h
30	30	c++/src/capnp/dynamic.c++
10	10	c++/src/capnp/layout-test.c++
97	97	c++/src/capnp/layout.c++
32	37	c++/src/capnp/layout.h
7	7	c++/src/capnp/list.h

--9c54bce6	2014-11-09T00:47:26-08:00	Kenton Varda	temporal@gmail.com	Fix problems with AnyStruct / AnyList change.

9c54bce6
44	32	c++/src/capnp/any.h
15	0	c++/src/capnp/common.h
72	7	c++/src/capnp/layout.c++
15	46	c++/src/capnp/layout.h
0	1	c++/src/capnp/pointer-helpers.h

--fff8e987	2014-11-08T23:34:42-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

fff8e987
--6b35c286	2014-11-08T23:34:37-08:00	Kenton Varda	temporal@gmail.com	Working on RealmGateway support, need AnyStruct, gotta merge.

6b35c286
26	3	c++/src/capnp/any.h
4	0	c++/src/capnp/common.h
1	0	c++/src/capnp/compiler/capnpc-c++.c++
24	0	c++/src/capnp/compiler/grammar.capnp.h
4	0	c++/src/capnp/compiler/lexer.capnp.h
21	1	c++/src/capnp/persistent.capnp
336	38	c++/src/capnp/persistent.capnp.c++
599	9	c++/src/capnp/persistent.capnp.h
3	1	c++/src/capnp/rpc-prelude.h
6	0	c++/src/capnp/rpc-twoparty.capnp.h
86	10	c++/src/capnp/rpc.c++
20	0	c++/src/capnp/rpc.capnp.h
46	3	c++/src/capnp/rpc.h
31	0	c++/src/capnp/schema.capnp.h

--bd763a00	2014-11-07T12:35:28-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #142 from konklone/patch-2

Grammar fix
bd763a00
--ad6349d0	2014-11-07T11:04:44-05:00	Eric Mill	eric@konklone.com	Gramma fix
ad6349d0
1	1	doc/index.md

--352bb995	2014-11-06T00:07:03-08:00	Kenton Varda	temporal@gmail.com	Level 2 RPC: Define 'Persistent' interface, get rid of 'Save' RPC protocol message.

352bb995
6	1	c++/Makefile.am
1	1	c++/regenerate-bootstraps.sh
3	0	c++/src/capnp/CMakeLists.txt
1	1	c++/src/capnp/bootstrap-test.ekam-rule
59	0	c++/src/capnp/persistent.capnp
148	0	c++/src/capnp/persistent.capnp.c++
419	0	c++/src/capnp/persistent.capnp.h
8	27	c++/src/capnp/rpc.capnp
16	82	c++/src/capnp/rpc.capnp.c++
49	215	c++/src/capnp/rpc.capnp.h

--2f835d8b	2014-11-05T23:03:10-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #134 from joshuawarner32/any-struct-list

Add initial implementation of AnyStruct and AnyList
2f835d8b
--9c1c6a87	2014-11-04T14:44:21-08:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #140 from joliss/typo

Fix typos
9c1c6a87
--6c5a3509	2014-11-03T20:52:44-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

6c5a3509
--9a32fa73	2014-11-03T19:10:33-08:00	Kenton Varda	temporal@gmail.com	RPC: Rename 'Restore' to 'Bootstrap' and redefine it to have nothing to do with SturdyRefs.

The 'objectId' field is now deprecated. Long-term, each vat will export no more than one "bootstrap interface" which can be obtained via 'Bootstrap'. Restoring SturdyRefs will be accomplished through higher-level interfaces specific to the VatNetwork in use.

See comments for 'Bootstrap' in rpc.capnp for more discussion.

9a32fa73
1	1	c++/samples/calculator-client.c++
1	2	c++/samples/calculator-server.c++
17	0	c++/src/capnp/ez-rpc-test.c++
70	18	c++/src/capnp/ez-rpc.c++
35	14	c++/src/capnp/ez-rpc.h
12	1	c++/src/capnp/layout.c++
6	8	c++/src/capnp/rpc-prelude.h
10	24	c++/src/capnp/rpc-test.c++
3	3	c++/src/capnp/rpc-twoparty-test.c++
3	20	c++/src/capnp/rpc-twoparty.c++
4	1	c++/src/capnp/rpc-twoparty.capnp
15	17	c++/src/capnp/rpc-twoparty.capnp.c++
13	13	c++/src/capnp/rpc-twoparty.capnp.h
10	11	c++/src/capnp/rpc-twoparty.h
119	88	c++/src/capnp/rpc.c++
159	111	c++/src/capnp/rpc.capnp
105	227	c++/src/capnp/rpc.capnp.c++
192	473	c++/src/capnp/rpc.capnp.h
113	115	c++/src/capnp/rpc.h
5	0	c++/src/capnp/test.capnp

--16eef7e6	2014-11-03T14:16:52+00:00	Jo Liss	joliss42@gmail.com	Fix typos

16eef7e6
2	2	doc/encoding.md

--e3ae211a	2014-11-01T14:52:28+13:00	Philip Quinn	p@partylemon.com	"Move" schema code generation macros into the schema compiler itself.

This removes all instances of the zero-length brand dependencies arrays (04a9c84).

e3ae211a
109	50	c++/src/capnp/compiler/capnpc-c++.c++
192	24	c++/src/capnp/compiler/grammar.capnp.c++
144	24	c++/src/capnp/compiler/grammar.capnp.h
32	4	c++/src/capnp/compiler/lexer.capnp.c++
24	4	c++/src/capnp/compiler/lexer.capnp.h
0	103	c++/src/capnp/generated-header-support.h
48	6	c++/src/capnp/rpc-twoparty.capnp.c++
36	6	c++/src/capnp/rpc-twoparty.capnp.h
184	23	c++/src/capnp/rpc.capnp.c++
138	23	c++/src/capnp/rpc.capnp.h
248	31	c++/src/capnp/schema.capnp.c++
186	31	c++/src/capnp/schema.capnp.h

--121d9176	2014-11-01T14:26:10+13:00	Philip Quinn	p@partylemon.com	Remove unused `FIELD_SIZE_NAMES`.

121d9176
0	4	c++/src/capnp/compiler/capnpc-c++.c++

--a8232380	2014-11-01T14:25:30+13:00	Philip Quinn	p@partylemon.com	CMake: Turn off warnings for uses of the now-deprecated getDependency() in tests (4692a66).

a8232380
4	0	c++/src/capnp/CMakeLists.txt

--98d1ebff	2014-10-30T22:26:56-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #139 from pqu/lite-def

Ensure CAPNP_LITE is always defined to 0 when not used
98d1ebff
--cd4dfddc	2014-10-31T12:59:37+13:00	Philip Quinn	p@partylemon.com	Fix missing field `brand` in `ResolvedDecl` initialisers (-Wmissing-field-initializers).

cd4dfddc
7	7	c++/src/capnp/compiler/compiler.c++

--3743bb88	2014-10-31T12:57:11+13:00	Philip Quinn	p@partylemon.com	Update bootstraps.

3743bb88
2	6	c++/src/capnp/c++.capnp.c++
25	75	c++/src/capnp/compiler/grammar.capnp.c++
4	12	c++/src/capnp/compiler/lexer.capnp.c++
7	21	c++/src/capnp/rpc-twoparty.capnp.c++
24	72	c++/src/capnp/rpc.capnp.c++
33	99	c++/src/capnp/schema.capnp.c++

--69f9c112	2014-10-31T13:47:42+13:00	Philip Quinn	p@partylemon.com	Ensure `CAPNP_LITE` is always defined to `0` when not used.

69f9c112
4	0	c++/src/capnp/common.h

--04a9c84d	2014-10-31T01:25:30+13:00	Philip Quinn	p@partylemon.com	Remove zero-length array of brand dependencies from generated headers when there are none.

Zero-length arrays are a GNU extension.

04a9c84d
17	6	c++/src/capnp/compiler/capnpc-c++.c++

--a6d898a2	2014-10-28T20:56:10-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #137 from pqu/cmake

More CMake Improvements
a6d898a2
--d9b8455a	2014-10-29T14:10:48+13:00	Philip Quinn	p@partylemon.com	CMake: Replace URL_HASH with URL_MD5 for CMake versions <2.8.11.2

d9b8455a
1	1	c++/src/CMakeLists.txt

--10b34e38	2014-10-29T12:55:44+13:00	Philip Quinn	p@partylemon.com	CMake: Consistently quote variables that may contain special characters. Fixes #136.

10b34e38
1	1	CMakeLists.txt
6	6	c++/src/CMakeLists.txt
12	12	c++/src/capnp/CMakeLists.txt
5	5	c++/src/kj/CMakeLists.txt
22	22	cmake/FindCapnProto.cmake

--495319e0	2014-10-28T17:41:36+13:00	Philip Quinn	p@partylemon.com	CMake: Add support for detecting the 'lite' library in 'FindCapnProto.cmake'.

Also, use pkg-config (if available) to get hints about the paths.

495319e0
54	12	cmake/FindCapnProto.cmake

--62b2b775	2014-10-28T17:26:37+13:00	Philip Quinn	p@partylemon.com	CMake: Generate pkgconfig files for installation.

62b2b775
25	0	c++/CMakeLists.txt

--d9f0f2b2	2014-10-28T17:22:27+13:00	Philip Quinn	p@partylemon.com	CMake: Add support for `CAPNP_LITE` option (see c772a70).

With CAPNP_LITE=1, the command-line tools will not be built, and the
tests cannot be built without EXTERNAL_CAPNP=1 (BUILD_TESTING=0 needs to
be set if the tests are not desired).

d9f0f2b2
25	3	c++/CMakeLists.txt
13	314	c++/src/CMakeLists.txt
230	0	c++/src/capnp/CMakeLists.txt
111	0	c++/src/kj/CMakeLists.txt

--46c48dfe	2014-10-28T15:49:22-07:00	Kenton Varda	temporal@gmail.com	Add link to Sublime syntax highlighting.

46c48dfe
2	0	doc/otherlang.md

--bc7113b9	2014-10-28T16:46:42+13:00	Philip Quinn	p@partylemon.com	CMake: Basic check for C++11, and setup global install paths.

bc7113b9
20	0	CMakeLists.txt

--ab7c897f	2014-10-28T16:37:42+13:00	Philip Quinn	p@partylemon.com	Fix 'FindCapnProto.cmake' for CMake versions <2.8.12.

ab7c897f
1	1	cmake/FindCapnProto.cmake

--b0d1b6ca	2014-10-27T17:05:37-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

b0d1b6ca
--7ee4a505	2014-10-27T17:05:26-07:00	Kenton Varda	temporal@gmail.com	Fix occasional evolution-test failure caused by List(Bool)->List(struct) upgrades no longer being allowed.

7ee4a505
3	0	c++/src/capnp/compiler/evolution-test.c++

--ff403547	2014-10-26T23:53:43-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #135 from pqu/lite-fix

Fix `CAPNP_LITE` build
ff403547
--9bc9e6be	2014-10-27T16:17:59+13:00	Philip Quinn	p@partylemon.com	Fix `CAPNP_LITE` build.

The changes to 'capnp/generated-header-support.h' in [b469079] need to
be applied to both sides of the `#if CAPNP_LITE` conditional.

9bc9e6be
6	7	c++/src/capnp/generated-header-support.h

--0a7bc6e5	2014-07-22T18:35:06-06:00	Joshua Warner	joshuawarner32@gmail.com	Add initial implementation of AnyStruct and AnyList

0a7bc6e5
74	0	c++/src/capnp/any-test.c++
343	9	c++/src/capnp/any.h
2	0	c++/src/capnp/compiler/capnpc-c++.c++
30	0	c++/src/capnp/layout.c++
15	0	c++/src/capnp/layout.h
8	0	c++/src/capnp/list.h
10	4	c++/src/capnp/pointer-helpers.h

--3a4203b7	2014-10-26T06:03:47-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

Conflicts:
	c++/src/capnp/generated-header-support.h

3a4203b7
--74e7a1a0	2014-10-26T06:01:04-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #133 from pqu/am

Fix install/uninstall automake hooks for CAPNP_LITE builds
74e7a1a0
--772fa38e	2014-10-26T05:58:46-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #132 from pqu/const

Remove redundant 'const' qualifiers
772fa38e
--44a56220	2014-10-26T04:58:39-07:00	Kenton Varda	temporal@gmail.com	Remove hacks that support List(Bool) -> List(struct) upgrades (no longer allowed).

Extended discussion:
https://groups.google.com/d/msg/capnproto/lRlWBOglQv4/8-Qo96AcZQIJ

44a56220
14	12	c++/src/capnp/encoding-test.c++
39	16	c++/src/capnp/layout.c++
13	37	c++/src/capnp/layout.h

--7b7282eb	2014-10-27T01:30:35+13:00	Philip Quinn	p@partylemon.com	Fix install/uninstall automake hooks for CAPNP_LITE builds.

The command-line tools aren't built in LITE_MODE, so there's nothing
to create a symlink to.

7b7282eb
7	2	c++/Makefile.am

--b469079d	2014-10-26T04:46:53-07:00	Kenton Varda	temporal@gmail.com	Always encode struct lists as INLINE_COMPOSITE per new canonicalization rules.

Extended discussion:
https://groups.google.com/d/msg/capnproto/lRlWBOglQv4/8-Qo96AcZQIJ

b469079d
1	2	c++/src/capnp/compiler/capnpc-c++.c++
1	1	c++/src/capnp/compiler/grammar.capnp.c++
24	24	c++/src/capnp/compiler/grammar.capnp.h
2	2	c++/src/capnp/compiler/lexer.capnp.c++
4	4	c++/src/capnp/compiler/lexer.capnp.h
0	20	c++/src/capnp/compiler/node-translator.c++
1	2	c++/src/capnp/dynamic.c++
22	58	c++/src/capnp/encoding-test.c++
6	8	c++/src/capnp/generated-header-support.h
8	10	c++/src/capnp/layout-test.c++
43	136	c++/src/capnp/layout.c++
20	17	c++/src/capnp/layout.h
1	2	c++/src/capnp/list.h
5	5	c++/src/capnp/rpc-twoparty.capnp.c++
6	6	c++/src/capnp/rpc-twoparty.capnp.h
3	3	c++/src/capnp/rpc.capnp.c++
23	23	c++/src/capnp/rpc.capnp.h
15	104	c++/src/capnp/schema-loader.c++
2	2	c++/src/capnp/schema.capnp.c++
31	31	c++/src/capnp/schema.capnp.h

--7ac277bb	2014-10-27T00:37:19+13:00	Philip Quinn	p@partylemon.com	Remove ineffectual 'const' qualifiers.

7ac277bb
5	5	c++/src/capnp/generated-header-support.h

--3cf513bf	2014-10-25T20:44:05-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

3cf513bf
--c772a700	2014-10-25T17:07:26-07:00	Kenton Varda	temporal@gmail.com	Implement "lite mode", where reflection is disabled.

To use, pass --disable-reflection to the configure script.

This produces a smaller runtime library. However, using it for this purpose is not recommended. The main purpose of lite mode is to define a subset of Cap'n Proto which might plausibly compile under MSVC. MSVC still lacks full support for constexpr and expression SFINAE; luckily, most of our use of these things relates to reflection, and not all users need reflection.

Cap'n Proto lite mode inherits its name from Protocol Buffers' lite mode. However, there are some key differences:

- Protobuf generated code included global constructors related to registering descriptors and extensions. For many people, this was the main reason to use lite mode: to get rid of these global constructors and achieve faster startup times. Cap'n Proto, on the other hand, never had global constructors in the first place.

- Schemas are actually still available in lite mode, though only in their raw (Cap'n Proto structure) form. Only the schema API (which wraps the raw schemas in a more convenient interface) and reflection API (which offers a convenient way to use the schemas) are unavailable.

- Lite mode is enabled in an application by defining CAPNP_LITE rather than by specifying an annotation in the schema file. This better-reflects real-world usage patterns, where you typically want to enable lite mode application-wide anyway.

- We do not build the lite mode library by default. You must request it by passing --disable-reflection to the configure script. Before you can do that, you must have a prebuilt Cap'n Proto compiler binary available, since the compiler can't be built without reflection.

- Relatedly, the lite mode library is built with the same name as the full library. This library is not intended to be installed. If anything it should be statically linked. But, mostly the option only exists on non-MSVC platform to give us a way to test that we haven't broken lite mode.

c772a700
57	21	c++/Makefile.am
1	1	c++/capnp.pc.in
32	0	c++/configure.ac
1	0	c++/src/CMakeLists.txt
7	0	c++/src/capnp/any.c++
8	0	c++/src/capnp/any.h
8	1	c++/src/capnp/arena.c++
23	0	c++/src/capnp/arena.h
6	0	c++/src/capnp/c++.capnp.c++
2	2	c++/src/capnp/c++.capnp.h
5	0	c++/src/capnp/capability.h
14	0	c++/src/capnp/common-test.c++
34	21	c++/src/capnp/common.h
77	22	c++/src/capnp/compiler/capnpc-c++.c++
99	24	c++/src/capnp/compiler/grammar.capnp.c++
209	25	c++/src/capnp/compiler/grammar.capnp.h
16	4	c++/src/capnp/compiler/lexer.capnp.c++
28	4	c++/src/capnp/compiler/lexer.capnp.h
4	1	c++/src/capnp/encoding-test.c++
67	5	c++/src/capnp/generated-header-support.h
26	1	c++/src/capnp/layout.c++
16	4	c++/src/capnp/layout.h
2	0	c++/src/capnp/message.c++
4	0	c++/src/capnp/message.h
4	0	c++/src/capnp/orphan-test.c++
5	3	c++/src/capnp/orphan.h
28	7	c++/src/capnp/rpc-twoparty.capnp.c++
43	7	c++/src/capnp/rpc-twoparty.capnp.h
96	24	c++/src/capnp/rpc.capnp.c++
178	24	c++/src/capnp/rpc.capnp.h
16	21	c++/src/capnp/{common-test.c++ => schema-lite.h}
131	32	c++/src/capnp/schema.capnp.c++
249	33	c++/src/capnp/schema.capnp.h
4	0	c++/src/capnp/schema.h
28	0	c++/src/capnp/test-util.c++
12	1	c++/src/capnp/test-util.h
9	0	super-test.sh

--f8b7a398	2014-10-25T14:06:19-07:00	Kenton Varda	temporal@gmail.com	Adding new generic parameters over time is allowed; removing them is not.

f8b7a398
7	1	c++/src/capnp/schema-loader.c++

--f4981dd9	2014-10-25T10:56:22-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #131 from dwrensha/typo

Result -> Results
f4981dd9
--646da013	2014-10-25T11:20:42-04:00	David Renshaw	dwrenshaw@gmail.com	Result -> Results

646da013
1	1	c++/src/capnp/compiler/capnpc-c++.c++

--bbffb4e0	2014-10-24T20:54:00-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

bbffb4e0
--01200b96	2014-10-24T20:47:40-07:00	Kenton Varda	temporal@gmail.com	Generics: Methods with implicit type parameters.

See changes to test.capnp for example.

Currently only supported through generated code, not in the dynamic API. Not exactly sure how to expose this in the dynamic API...

01200b96
24	0	c++/src/capnp/capability-test.c++
103	50	c++/src/capnp/compiler/capnpc-c++.c++
39	19	c++/src/capnp/compiler/capnpc-capnp.c++
120	120	c++/src/capnp/compiler/grammar.capnp.h
20	20	c++/src/capnp/compiler/lexer.capnp.h
100	28	c++/src/capnp/compiler/node-translator.c++
20	2	c++/src/capnp/compiler/node-translator.h
26	15	c++/src/capnp/compiler/parser.c++
14	5	c++/src/capnp/generated-header-support.h
30	30	c++/src/capnp/rpc-twoparty.capnp.h
115	115	c++/src/capnp/rpc.capnp.h
7	1	c++/src/capnp/schema-loader.c++
19	3	c++/src/capnp/schema.c++
11	0	c++/src/capnp/schema.capnp
131	47	c++/src/capnp/schema.capnp.c++
316	151	c++/src/capnp/schema.capnp.h
19	4	c++/src/capnp/schema.h
4	0	c++/src/capnp/test.capnp

--5319cc3f	2014-10-24T19:31:31-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #130 from michaeledgar/nit

fix copy-paste bug in TestRpc_TailCall: add missing assertion
5319cc3f
--4a604d23	2014-10-24T22:21:27-04:00	Mike Edgar	michael.j.edgar@gmail.com	fix copy-paste bug in TestRpc_TailCall: add missing assertion

4a604d23
1	1	c++/src/capnp/rpc-test.c++

--a211aa60	2014-10-24T04:07:24-07:00	Kenton Varda	temporal@gmail.com	Generics: C++ code generation schema structure cross-linkage.

a211aa60
6	2	c++/src/capnp/c++.capnp.c++
4	0	c++/src/capnp/capability.c++
7	0	c++/src/capnp/capability.h
379	150	c++/src/capnp/compiler/capnpc-c++.c++
75	25	c++/src/capnp/compiler/grammar.capnp.c++
120	240	c++/src/capnp/compiler/grammar.capnp.h
12	4	c++/src/capnp/compiler/lexer.capnp.c++
20	40	c++/src/capnp/compiler/lexer.capnp.h
2	0	c++/src/capnp/compiler/node-translator.c++
175	9	c++/src/capnp/generated-header-support.h
21	7	c++/src/capnp/rpc-twoparty.capnp.c++
30	60	c++/src/capnp/rpc-twoparty.capnp.h
72	24	c++/src/capnp/rpc.capnp.c++
115	230	c++/src/capnp/rpc.capnp.h
23	3	c++/src/capnp/schema-loader-test.c++
52	0	c++/src/capnp/schema-test.c++
96	32	c++/src/capnp/schema.capnp.c++
150	300	c++/src/capnp/schema.capnp.h
14	0	c++/src/capnp/schema.h
11	0	c++/src/capnp/stringify-test.c++
2	1	c++/src/capnp/test.capnp
8	0	c++/src/kj/string-test.c++
5	0	c++/src/kj/string.h

--6f82581e	2014-10-23T16:37:13-07:00	Kenton Varda	temporal@gmail.com	Fix everything that broke due to Jekyll moving from Maruku to Kramdown.

6f82581e
1	1	doc/capnp-tool.md
2	2	doc/cxx.md
2	2	doc/cxxrpc.md
3	3	doc/install.md
1	1	doc/language.md
4	4	doc/otherlang.md
4	4	doc/stylesheets/pygment_trac.css

--a40d20cb	2014-10-23T16:14:57-07:00	Kenton Varda	temporal@gmail.com	Add Tim Popham's Javascript implementation to the list.

a40d20cb
2	1	doc/otherlang.md

--d70d9a66	2014-10-23T05:31:16-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

d70d9a66
--817576c6	2014-10-21T21:30:41-07:00	Kenton Varda	temporal@gmail.com	Generics: C++ code generation.

Note that embedded schema structures in generated code are still incorrect.

817576c6
29	0	c++/src/capnp/any.h
2	0	c++/src/capnp/blob.h
29	0	c++/src/capnp/capability-test.c++
550	185	c++/src/capnp/compiler/capnpc-c++.c++
24	24	c++/src/capnp/compiler/grammar.capnp.c++
48	48	c++/src/capnp/compiler/grammar.capnp.h
4	4	c++/src/capnp/compiler/lexer.capnp.c++
8	8	c++/src/capnp/compiler/lexer.capnp.h
14	0	c++/src/capnp/compiler/node-translator.c++
41	0	c++/src/capnp/encoding-test.c++
42	13	c++/src/capnp/generated-header-support.h
8	0	c++/src/capnp/list.h
6	6	c++/src/capnp/rpc-twoparty.capnp.c++
12	12	c++/src/capnp/rpc-twoparty.capnp.h
23	23	c++/src/capnp/rpc.capnp.c++
46	46	c++/src/capnp/rpc.capnp.h
4	4	c++/src/capnp/schema-loader-test.c++
98	37	c++/src/capnp/schema-loader.c++
10	3	c++/src/capnp/schema-loader.h
144	49	c++/src/capnp/schema.c++
4	0	c++/src/capnp/schema.capnp
90	74	c++/src/capnp/schema.capnp.c++
79	60	c++/src/capnp/schema.capnp.h
185	109	c++/src/capnp/schema.h
8	0	c++/src/capnp/test.capnp

--4ab4080b	2014-10-21T21:51:33-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #128 from pqu/cmake

CMake improvements
4ab4080b
--fe87dad0	2014-10-21T14:08:28-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #122 from joshuawarner32/fix-mingw-build

initial fixes for building kj/main.c++ utilities on mingw
fe87dad0
--8a8072e5	2014-10-21T08:39:25-06:00	Joshua Warner	joshua.warner@readytalk.com	use KJ_STACK_ARRAY for win32 text buffers in main.c++

8a8072e5
11	11	c++/src/kj/main.c++

--9d7b417e	2014-10-20T18:34:37-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #127 from pqu/atos-fix

Remove '-d' flag from call to atos(1)
9d7b417e
--490acec8	2014-10-20T01:39:43-07:00	Kenton Varda	temporal@gmail.com	Generics: Tag generated types using members rather than template specialization.

That is to say, whereas previously we would extend capnp::typeId<T>() to a new type by declaring a specialization of it for that type, now we instead have the type contain a nested class called _capnpPrivate which contains a `typeId` constant.

This is necessary because it is impossible to specialize a template for a type which is itself nested inside a template type. E.g. it's impossible to write a specialization `template <typename T> typeId<Foo<T>::Bar>()`; C++ simply doesn't support this. But with generics, Cap'n Proto will allow types to be nested inside templates, so we need this to work.

490acec8
8	4	c++/src/capnp/any.h
0	2	c++/src/capnp/c++.capnp.c++
2	14	c++/src/capnp/c++.capnp.h
19	0	c++/src/capnp/capability.h
31	18	c++/src/capnp/common.h
45	77	c++/src/capnp/compiler/capnpc-c++.c++
34	50	c++/src/capnp/compiler/grammar.capnp.c++
80	116	c++/src/capnp/compiler/grammar.capnp.h
14	10	c++/src/capnp/compiler/lexer.capnp.c++
19	35	c++/src/capnp/compiler/lexer.capnp.h
12	12	c++/src/capnp/dynamic.c++
26	16	c++/src/capnp/dynamic.h
40	63	c++/src/capnp/generated-header-support.h
6	2	c++/src/capnp/layout.h
2	0	c++/src/capnp/pointer-helpers.h
19	16	c++/src/capnp/rpc-twoparty.capnp.c++
31	51	c++/src/capnp/rpc-twoparty.capnp.h
34	50	c++/src/capnp/rpc.capnp.c++
84	119	c++/src/capnp/rpc.capnp.h
31	64	c++/src/capnp/schema.capnp.c++
111	153	c++/src/capnp/schema.capnp.h

--56493de3	2014-10-19T21:14:56-07:00	Kenton Varda	temporal@gmail.com	Fix GCC 4.8 build.

56493de3
0	3	c++/src/capnp/schema-loader.c++

--330e3fc7	2014-10-19T21:02:31-07:00	Kenton Varda	temporal@gmail.com	Fix build on GCC 4.7.

330e3fc7
5	1	c++/src/capnp/compiler/node-translator.c++
1	1	c++/src/capnp/compiler/node-translator.h
6	0	c++/src/capnp/schema.c++

--7476bc11	2014-10-20T14:13:21+13:00	Philip Quinn	p@partylemon.com	Call atos(1) through xcrun.

7476bc11
1	1	c++/src/kj/exception.c++

--ecafcd6c	2014-10-18T20:33:39+13:00	Philip Quinn	p@partylemon.com	Remove '-d' flag from call to atos(1).

atos(1) doesn't actually have a '-d' flag, but its inclusion was
innocuous (and suppressed a warning) until OS X 10.10.

ecafcd6c
1	1	c++/src/kj/exception.c++

--4692a669	2014-10-19T20:25:43-07:00	Kenton Varda	temporal@gmail.com	Fix build for C++11.

1) Apparently mixing member defaults and initializer lists is a C++14 thing.
2) My test script compiles with -Werror which errors out on calls to now-deprecated getDependency().

4692a669
1	1	c++/Makefile.am
1	1	c++/src/capnp/compiler/capnpc-c++.c++
12	15	c++/src/capnp/compiler/evolution-test.c++
3	6	c++/src/capnp/dynamic-capability.c++
6	6	c++/src/capnp/generated-header-support.h
1	1	c++/src/capnp/schema.c++

--9b91e8ce	2014-10-19T19:38:47-07:00	Kenton Varda	temporal@gmail.com	Tweak EZ RPC ReaderOptions docs.

9b91e8ce
11	9	c++/src/capnp/ez-rpc.h

--202232b3	2014-10-19T19:34:59-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

202232b3
--286b749e	2014-10-19T19:34:47-07:00	Kenton Varda	temporal@gmail.com	Generics: Fix compiler error test and test for new errors.

286b749e
21	9	c++/src/capnp/compiler/node-translator.c++
2	1	c++/src/capnp/compiler/parser.c++
12	2	c++/src/capnp/testdata/errors.capnp.nobuild
10	5	c++/src/capnp/testdata/errors.txt

--122e0619	2014-10-19T19:01:55-07:00	Kenton Varda	temporal@gmail.com	Delete some obsolete TODOs.

122e0619
0	4	c++/src/capnp/generated-header-support.h
0	2	c++/src/capnp/schema.capnp

--9a0fced2	2014-10-16T23:44:06-07:00	Kenton Varda	temporal@gmail.com	Generics: Refactor NodeTranslator and fix alias evaluation.

More refactoring is needed, but this at least makes "using" aliases work correctly with generics.

9a0fced2
69	31	c++/src/capnp/compiler/compiler.c++
480	287	c++/src/capnp/compiler/node-translator.c++
25	14	c++/src/capnp/compiler/node-translator.h
34	0	c++/src/capnp/test.capnp
13	3	c++/src/kj/array.h

--ae36935d	2014-10-20T03:35:13+13:00	Philip Quinn	p@partylemon.com	Support disabling builds of the command-line tools and unit tests, and using an external compiler.

ae36935d
9	0	c++/CMakeLists.txt
42	0	c++/src/CMakeLists.txt

--4157aa8f	2014-10-20T13:22:01+13:00	Philip Quinn	p@partylemon.com	Add 'FindCapnProto' CMake module to locate libraries and compile schemas.

4157aa8f
6	0	CMakeLists.txt
0	2	c++/CMakeLists.txt
12	33	c++/src/CMakeLists.txt
149	0	cmake/FindCapnProto.cmake

--38cbcdc8	2014-10-20T13:21:22+13:00	Philip Quinn	p@partylemon.com	Specify/fix library dependencies.

38cbcdc8
1	1	c++/CMakeLists.txt
6	12	c++/src/CMakeLists.txt

--7fae9544	2014-10-18T23:29:43+13:00	Philip Quinn	p@partylemon.com	Support installing with CMake.

7fae9544
102	0	c++/src/CMakeLists.txt

--f393c0e2	2014-10-18T23:29:00+13:00	Philip Quinn	p@partylemon.com	Add missing target for 'capnpc-capnp'.

f393c0e2
6	0	c++/src/CMakeLists.txt

--975c88d1	2014-10-18T23:24:36+13:00	Philip Quinn	p@partylemon.com	Compile test schemas out-of-source.

975c88d1
0	4	c++/CMakeLists.txt
13	7	c++/src/CMakeLists.txt

--5dd63440	2014-10-18T14:21:55+13:00	Philip Quinn	p@partylemon.com	Don't clobber any CXX_FLAGS from the environment.

5dd63440
2	2	c++/CMakeLists.txt
0	4	c++/src/CMakeLists.txt

--5cf9a211	2014-10-18T14:12:30+13:00	Philip Quinn	p@partylemon.com	Use CMake's ExternalProject to fetch and build googletest.

5cf9a211
0	9	c++/CMakeLists.txt
0	17	c++/setup-cmake.sh
29	0	c++/src/CMakeLists.txt

--c0fbfd9c	2014-10-17T12:12:08-06:00	Joshua Warner	joshua.warner@readytalk.com	fix writeLineToFd for windows console output

This function now (on windows):
* converts \n to \r\n (for both file and console outputs)
* when the output is redirected to a file, uses WriteFile with utf-8 output
* when the output will appear on a console, uses WriteConsole with utf-16 output instead

c0fbfd9c
32	12	c++/src/kj/main.c++

--a19956a6	2014-10-16T22:39:56-07:00	Kenton Varda	temporal@gmail.com	Generics: Rename some things better. (Hardest problem in computer science.)

a19956a6
10	10	c++/src/capnp/compiler/capnpc-c++.c++
28	29	c++/src/capnp/compiler/capnpc-capnp.c++
30	30	c++/src/capnp/compiler/compiler.c++
4	4	c++/src/capnp/compiler/grammar.capnp
25	24	c++/src/capnp/compiler/grammar.capnp.c++
65	65	c++/src/capnp/compiler/grammar.capnp.h
109	114	c++/src/capnp/compiler/node-translator.c++
11	12	c++/src/capnp/compiler/node-translator.h
6	6	c++/src/capnp/compiler/parser.c++
65	64	c++/src/capnp/schema-loader.c++
8	11	c++/src/capnp/schema-loader.h
5	5	c++/src/capnp/schema.c++
21	20	c++/src/capnp/schema.capnp
182	195	c++/src/capnp/schema.capnp.c++
478	479	c++/src/capnp/schema.capnp.h
2	2	c++/src/capnp/schema.h

--87ea5bdb	2014-10-12T04:01:54-07:00	Kenton Varda	temporal@gmail.com	Generics: Schema/dynamic API support.

87ea5bdb
2	2	c++/src/capnp/c++.capnp.c++
1	3	c++/src/capnp/compiler/capnp.c++
1	1	c++/src/capnp/compiler/capnpc-c++.c++
38	32	c++/src/capnp/compiler/capnpc-capnp.c++
43	4	c++/src/capnp/compiler/compiler.c++
40	39	c++/src/capnp/compiler/grammar.capnp.c++
4	4	c++/src/capnp/compiler/lexer.capnp.c++
159	174	c++/src/capnp/compiler/node-translator.c++
39	22	c++/src/capnp/compiler/node-translator.h
69	74	c++/src/capnp/dynamic.c++
1	1	c++/src/capnp/dynamic.h
108	2	c++/src/capnp/generated-header-support.h
7	7	c++/src/capnp/rpc-twoparty.capnp.c++
24	24	c++/src/capnp/rpc.capnp.c++
39	0	c++/src/capnp/schema-loader-test.c++
579	16	c++/src/capnp/schema-loader.c++
19	3	c++/src/capnp/schema-loader.h
11	4	c++/src/capnp/schema-parser-test.c++
206	33	c++/src/capnp/schema.c++
7	1	c++/src/capnp/schema.capnp
64	50	c++/src/capnp/schema.capnp.c++
85	17	c++/src/capnp/schema.capnp.h
197	18	c++/src/capnp/schema.h
2	2	c++/src/capnp/stringify.c++
30	4	c++/src/capnp/test.capnp
8	0	c++/src/kj/common.h

--568d8e2c	2014-10-15T14:30:21-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #126 from joshuawarner32/older-cmake

add fix for older cmake versions
568d8e2c
--9834470d	2014-10-15T10:12:07-06:00	Joshua Warner	joshua.warner@readytalk.com	add fix for older cmake versions

9834470d
5	5	c++/src/CMakeLists.txt

--19784fdd	2014-10-14T08:04:21-06:00	Joshua Warner	joshua.warner@readytalk.com	redefine ERROR from windows.h as a global constant in windows-sanity.h

19784fdd
5	0	c++/src/kj/debug.h
37	0	c++/src/kj/windows-sanity.h

--a959e8f9	2014-10-09T15:25:17-06:00	Joshua Warner	joshua.warner@readytalk.com	initial fixes for building kj/main.c++ utilities on mingw

a959e8f9
4	0	c++/src/kj/debug.c++
29	1	c++/src/kj/main.c++

--7f64b969	2014-10-14T20:51:52-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #124 from joshuawarner32/cmake

Add initial cmake build support
7f64b969
--881a22c3	2014-10-14T21:49:57-06:00	Joshua Warner	joshuawarner32@gmail.com	add myself to CONTRIBUTORS

881a22c3
1	0	CONTRIBUTORS

--d4b14736	2014-10-14T19:52:02-06:00	Joshua Warner	joshuawarner32@gmail.com	improve cmake build

* Move binaries into the bin directory and libs into the lib directory in the output
* Make sure the actual binary output file of capnp-tool is just capnp
* Remove need for deprecated cmake get_property function

d4b14736
4	0	c++/CMakeLists.txt
6	5	c++/src/CMakeLists.txt

--e709a2ec	2014-10-14T08:22:20-06:00	Joshua Warner	joshua.warner@readytalk.com	hyphenate cmake target names

e709a2ec
8	7	c++/src/CMakeLists.txt

--fcb60c30	2014-10-13T20:36:01-06:00	Joshua Warner	joshuawarner32@gmail.com	correct reference to setup-cmake.sh

fcb60c30
1	1	c++/CMakeLists.txt

--416c4c4f	2014-10-13T20:15:37-06:00	Joshua Warner	joshuawarner32@gmail.com	undo setup-autotools.sh -> setup-gtest.sh rename, add setup-cmake.sh instead

416c4c4f
0	4	c++/{setup-gtest.sh => setup-autotools.sh}
1	5	c++/{setup-gtest.sh => setup-cmake.sh}

--41c80e9c	2014-10-11T17:24:23-07:00	Ahmed Charles	acharles@outlook.com	Fix cmake build.

41c80e9c
1	1	c++/CMakeLists.txt
4	5	c++/src/CMakeLists.txt

--c2e48e4d	2014-10-11T16:28:57-06:00	Joshua Warner	joshuawarner32@gmail.com	add helpful error message if gtest isn't set up

c2e48e4d
5	0	c++/CMakeLists.txt

--8174027c	2014-10-10T21:04:49-06:00	Joshua Warner	joshuawarner32@gmail.com	add initial cmake script

8174027c
10	0	c++/CMakeLists.txt
4	0	c++/{setup-autotools.sh => setup-gtest.sh}
194	0	c++/src/CMakeLists.txt

--d7b612a1	2014-10-06T03:20:32-07:00	Kenton Varda	temporal@gmail.com	Generics: Schema parser.

d7b612a1
16	12	c++/src/capnp/c++.capnp.c++
3	20	c++/src/capnp/compiler/capnp.c++
3	3	c++/src/capnp/compiler/capnpc-c++.c++
94	29	c++/src/capnp/compiler/capnpc-capnp.c++
186	144	c++/src/capnp/compiler/compiler.c++
48	40	c++/src/capnp/compiler/evolution-test.c++
64	55	c++/src/capnp/compiler/grammar.capnp
973	765	c++/src/capnp/compiler/grammar.capnp.c++
1300	1171	c++/src/capnp/compiler/grammar.capnp.h
2	1	c++/src/capnp/compiler/lexer.c++
112	82	c++/src/capnp/compiler/lexer.capnp.c++
710	133	c++/src/capnp/compiler/node-translator.c++
48	14	c++/src/capnp/compiler/node-translator.h
191	186	c++/src/capnp/compiler/parser.c++
1	4	c++/src/capnp/compiler/parser.h
75	60	c++/src/capnp/rpc-twoparty.capnp.c++
465	360	c++/src/capnp/rpc.capnp.c++
5	5	c++/src/capnp/schema-loader.c++
7	6	c++/src/capnp/schema.c++
75	2	c++/src/capnp/schema.capnp
1186	508	c++/src/capnp/schema.capnp.c++
1403	96	c++/src/capnp/schema.capnp.h
1	1	c++/src/capnp/stringify.c++
27	0	c++/src/capnp/test.capnp

--bfe76435	2014-10-07T16:32:52-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #120 from maurer/ezrpc-readeroptions

Add ReaderOptions configurability to EzRpc
bfe76435
--ec3ecb7b	2014-09-26T03:03:31-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #121 from ahmedcharles/patch-1

Fix typo in grammar.capnp.
ec3ecb7b
--e498bd3a	2014-09-26T02:24:43-07:00	Ahmed Charles	acharles@outlook.com	Fix typo in grammar.capnp.
e498bd3a
1	1	c++/src/capnp/compiler/grammar.capnp

--f0335e7b	2014-09-24T16:02:15-04:00	Matthew Maurer	maurer@matthewmaurer.org	Add ReaderOptions configurability to EzRpc

Add a defaulted ReaderOptions argument to the constructors for
EzRpcServer and EzRpcClient to allow large/deep message uses more
easily.

f0335e7b
44	36	c++/src/capnp/ez-rpc.c++
29	7	c++/src/capnp/ez-rpc.h

--4023a354	2014-09-15T17:22:28-07:00	Kenton Varda	temporal@gmail.com	Actually, let's use single digits for these otherwise they'll actually be printed in scientific notation with a '.', defeating the purpose of the test.

4023a354
2	2	c++/src/capnp/encoding-test.c++
2	2	c++/src/capnp/test.capnp

--a43a3df6	2014-09-15T17:17:02-07:00	Kenton Varda	temporal@gmail.com	Fix C++ code generation for Float32s with integral defaults.

Appending 'f' to an integer literal doesn't make it a float. We have to add '.0' first.

Fixes #119.

a43a3df6
9	1	c++/src/capnp/compiler/capnpc-c++.c++
10	0	c++/src/capnp/encoding-test.c++
9	0	c++/src/capnp/test.capnp

--6915e4ff	2014-09-10T22:44:28-07:00	Kenton Varda	temporal@gmail.com	Fix bug where returned caps would leak if the request was canceled.

This only happened if the Finish message indicating cancellation and the Return message happened to cross paths. If the Finish arrived before the Return was sent, then the server would send an empty response. If the Return was received before the Finish was sent, the client would properly record caps in the response. But if they crossed paths, the server would send back a full response with caps, but the client would never bother to inspect that response, thus leaking the caps. Fix is to set the flag to release all returned caps in the Finish message when cancelling.

6915e4ff
29	0	c++/src/capnp/rpc-test.c++
10	4	c++/src/capnp/rpc.c++

--afb302de	2014-09-10T21:50:46-07:00	Kenton Varda	temporal@gmail.com	Update apparently-outdated bootstrap files. These have apparently been behind for a long time.

afb302de
15	16	c++/src/capnp/c++.capnp.c++
289	244	c++/src/capnp/compiler/grammar.capnp.c++
45	37	c++/src/capnp/compiler/lexer.capnp.c++
76	69	c++/src/capnp/rpc-twoparty.capnp.c++
182	170	c++/src/capnp/rpc.capnp.c++
221	204	c++/src/capnp/schema.capnp.c++

--26914900	2014-09-10T21:39:28-07:00	Kenton Varda	temporal@gmail.com	Fix obscure bug where the last outgoing message (and any capabilities therein) would not get released (until a new message was sent, replacing it as the last).

This took hours to track down, because it initially looked like "Release" messages weren't being honored in some cases (when they happened to be releasing a capability from the last message, and no subsequent messages were sent). Initial attempts to capture this in a unit test failed because the test of course used a subsequent call to detect if the capability had been released, which succeeded.

26914900
2	1	c++/src/capnp/capability-test.c++
30	1	c++/src/capnp/rpc-test.c++
58	8	c++/src/capnp/rpc-twoparty-test.c++
6	3	c++/src/capnp/rpc-twoparty.c++
16	1	c++/src/capnp/test-util.c++
4	1	c++/src/capnp/test-util.h
6	0	c++/src/capnp/test.capnp

--78283ba3	2014-09-08T15:31:11-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

78283ba3
--fe1ae364	2014-09-08T15:30:51-07:00	Kenton Varda	temporal@gmail.com	Fix another case of Capability Myths Demolished link.

fe1ae364
1	1	doc/rpc.md

--d60e61e7	2014-09-08T15:25:08-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #117 from dharmatech/patch-1

Fix link to 'Capability Myths Demolished' paper
d60e61e7
--aa66f3b7	2014-09-06T17:27:23-05:00	dharmatech	wayo.cavazos@gmail.com	Fix link to 'Capability Myths Demolished' paper

The old link isn't currently working.
aa66f3b7
1	1	doc/faq.md

--be6d2446	2014-08-30T15:55:18-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #114 from puls/patch-1

Fix typo
be6d2446
--2a8b4df0	2014-08-29T15:15:38-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #116 from mortehu/master

Replace AC_PROG_LIBTOOL with LT_INIT in configure.ac
2a8b4df0
--85857ae1	2014-08-29T10:58:59-04:00	Morten Hustveit	morten.hustveit@gmail.com	Replace AC_PROG_LIBTOOL with LT_INIT in configure.ac

AC_PROG_LIBTOOL is a deprecated name for older versions of LT_INIT.[1]

1. http://www.gnu.org/software/libtool/manual/html_node/LT_005fINIT.html

85857ae1
1	1	c++/configure.ac

--c6cff32f	2014-08-27T19:40:35-07:00	Jim Puls	jim@nondifferentiable.com	Fix typo
c6cff32f
1	1	doc/encoding.md

--9e56e694	2014-08-18T21:12:42-07:00	Kenton Varda	temporal@gmail.com	Add missing implementation of rejectIfThrows().

9e56e694
21	0	c++/src/kj/async-inl.h

--1cdcc24b	2014-08-18T20:46:39-07:00	Kenton Varda	temporal@gmail.com	Fix two subtle bugs with embargos, and improve docs.

Bug 1
-----

If a Resolve message indicated that the promise had been rejected, the code would see the error cap as a local cap and erroneously believe that the promise had resolved back to a local capability, thereby requiring a Disembargo to be sent. The peer, on receiving the nonsensical Disembargo, would throw an exception and close the connection.

The error message seen was: "expected target->getBrand() == this; 'Disembargo' of type 'senderLoopback' sent to an object that does not point back to the sender."

Bug 2
-----

Disembargos are sent not only in response to Resolves, but also Returns, since capabilities in a returned message were previously accessible as PromisedAnswers. This means that we must apply the same rule that states that once a promise has been resolved, the promise must from then on forward all messages it receives strictly to the object to which it resolved, even if that object is itself a promise which later resolves to somewhere else. The code which sends Resolve messages was doing this correctly, but the code sending Return messages was not. They now both operate correctly. I've also added more explanation to the documentation in rpc.capnp.

The error message seen was: "expected redirect == nullptr; 'Disembargo' of type 'senderLoopback' sent to an object that does not appear to have been the object of a previous 'Resolve' message."

1cdcc24b
97	0	c++/src/capnp/rpc-test.c++
25	5	c++/src/capnp/rpc.c++
32	0	c++/src/capnp/rpc.capnp

--c5d67deb	2014-08-07T14:46:33-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

c5d67deb
--20f27660	2014-08-07T14:46:23-07:00	Kenton Varda	temporal@gmail.com	Fix typo. Fixes #112.

20f27660
1	1	c++/src/capnp/compiler/capnp.c++

--f536c8cf	2014-07-21T21:54:53-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #111 from partylemon/ExceptionBacktraces

Support for printing exception backtrace symbols on OS X.
f536c8cf
--30b06acb	2014-07-21T00:29:11+12:00	Philip Quinn	p@partylemon.com	Replace 'goto' error handling with KJ_DEFER.

30b06acb
9	14	c++/src/kj/exception.c++

--ef501b1c	2014-07-20T22:31:46+12:00	Philip Quinn	p@partylemon.com	Consolidate Linux and OS X versions of getStackSymbols().

ef501b1c
26	34	c++/src/kj/exception.c++

--29bdbabb	2014-07-16T00:21:27-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #109 from greedy/add-includedir-to-imports

Add configured includedir as a default import path
29bdbabb
--612dddaf	2014-07-15T22:06:10+12:00	Philip Quinn	p@partylemon.com	Support for exception backtraces on OS X.

612dddaf
21	1	c++/src/kj/exception.c++

--a3232d22	2014-07-13T15:06:57-06:00	Geoff Reedy	geoff@programmer-monk.net	Add configured includedir as a default import path

Protected by an ifdef to avoid tripping up non-autotools builds

a3232d22
1	1	c++/Makefile.am
3	0	c++/src/capnp/compiler/capnp.c++

--c8598892	2014-07-12T16:53:37-07:00	Kenton Varda	temporal@gmail.com	Update blog post to reflect that FlatBuffers now supports optional bounds checking.

c8598892
2	2	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--ba5c0d67	2014-07-07T23:38:29-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

ba5c0d67
--9fa79341	2014-07-07T23:38:20-07:00	Kenton Varda	temporal@gmail.com	Fix template method that doesn't actually compile when used.

9fa79341
1	1	c++/src/capnp/capability.h

--b2d752be	2014-07-01T19:40:21-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #107 from jjwchoy/hex-binary-literal

Added hex binary literals
b2d752be
--38d238f7	2014-07-01T14:13:55+01:00	Jason Choy	jjwchoy@gmail.com	Added binary hex literal examples to docs

38d238f7
2	0	doc/language.md

--8bb92c41	2014-07-01T14:03:42+01:00	Jason Choy	jjwchoy@gmail.com	Changed hex integer literal parsing rule

8bb92c41
1	1	c++/src/kj/parse/char.h

--5b84dbaf	2014-07-01T13:59:49+01:00	Jason Choy	jjwchoy@gmail.com	Added test for binary hex literal

5b84dbaf
1	1	c++/src/capnp/test.capnp

--ac0543fa	2014-06-29T17:27:09+01:00	Jason Choy	jjwchoy@gmail.com	oops, whitespace was not being discarded. fixed

ac0543fa
2	3	c++/src/kj/parse/char.h

--1bd4767c	2014-06-29T17:21:13+01:00	Jason Choy	jjwchoy@gmail.com	Allowing whitespace in between octets

1bd4767c
3	1	c++/src/kj/parse/char.h

--3930e460	2014-06-29T17:07:08+01:00	Jason Choy	jjwchoy@gmail.com	Added hex binary literals

3930e460
1	0	c++/src/capnp/compiler/grammar.capnp
298	329	c++/src/capnp/compiler/grammar.capnp.c++
65	0	c++/src/capnp/compiler/grammar.capnp.h
7	0	c++/src/capnp/compiler/lexer.c++
1	0	c++/src/capnp/compiler/lexer.capnp
91	84	c++/src/capnp/compiler/lexer.capnp.c++
65	0	c++/src/capnp/compiler/lexer.capnp.h
7	0	c++/src/capnp/compiler/node-translator.c++
9	0	c++/src/capnp/compiler/parser.c++
6	0	c++/src/kj/parse/char.h

--3865a2f2	2014-06-28T13:37:16-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #106 from jjwchoy/master

Fixed compile --src-prefix help text
3865a2f2
--95b8fb45	2014-06-28T20:23:22+01:00	Jason Choy	jjwchoy@gmail.com	Fixed compile --src-prefix help text

95b8fb45
1	1	c++/src/capnp/compiler/capnp.c++

--8e4943b4	2014-06-25T14:58:17-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #104 from dwrensha/xorshift

switch from linear congruential to Xorshift generator
8e4943b4
--dcf4b945	2014-06-25T16:29:10-04:00	David Renshaw	dwrenshaw@gmail.com	switch from linear congruential to Xorshift generator

dcf4b945
13	5	c++/src/capnp/benchmark/common.h

--7b6ef1d5	2014-06-20T01:24:49-07:00	Kenton Varda	temporal@gmail.com	Fix compiler error message test broken by license change.

Error messages contain line numbers and new license comment is two lines shorter...

7b6ef1d5
2	0	c++/src/capnp/testdata/errors.capnp.nobuild

--02935392	2014-06-20T00:36:14-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

02935392
--889204fe	2014-06-20T00:29:27-07:00	Kenton Varda	temporal@gmail.com	Change license to MIT.

For portions currently copyright by Kenton (most of it), transfer copyright to Sandstorm Development Group, Inc. (Kenton's company).

The license change is practically meaningless, as MIT and BSD 2-clause are legally equivalent. However, the BSD 2-clause license is sometimes confused for its ugly siblings, BSD 3-clause and BSD 4-clause. The MIT license is more immediately recognizeable for what it is.

Rémy Blank and Jason Choy (the two non-trivial contributors) are on record as approving this change:

https://groups.google.com/d/msg/capnproto/xXDd2HUOCcc/gbe_COIuXKYJ

889204fe
1	1	CONTRIBUTORS
17	19	LICENSE
17	19	c++/samples/addressbook.c++
17	19	c++/samples/addressbook.capnp
17	19	c++/samples/calculator-client.c++
17	19	c++/samples/calculator-server.c++
17	19	c++/samples/calculator.capnp
17	19	c++/src/capnp/any-test.c++
17	19	c++/src/capnp/any.c++
17	19	c++/src/capnp/any.h
17	19	c++/src/capnp/arena.c++
17	19	c++/src/capnp/arena.h
17	19	c++/src/capnp/benchmark/capnproto-carsales.c++
17	19	c++/src/capnp/benchmark/capnproto-catrank.c++
17	19	c++/src/capnp/benchmark/capnproto-common.h
17	19	c++/src/capnp/benchmark/capnproto-eval.c++
17	19	c++/src/capnp/benchmark/carsales.capnp
17	19	c++/src/capnp/benchmark/carsales.proto
17	19	c++/src/capnp/benchmark/catrank.capnp
17	19	c++/src/capnp/benchmark/catrank.proto
17	19	c++/src/capnp/benchmark/common.h
17	19	c++/src/capnp/benchmark/eval.capnp
17	19	c++/src/capnp/benchmark/eval.proto
17	19	c++/src/capnp/benchmark/null-carsales.c++
17	19	c++/src/capnp/benchmark/null-catrank.c++
17	19	c++/src/capnp/benchmark/null-common.h
17	19	c++/src/capnp/benchmark/null-eval.c++
17	19	c++/src/capnp/benchmark/protobuf-carsales.c++
17	19	c++/src/capnp/benchmark/protobuf-catrank.c++
17	19	c++/src/capnp/benchmark/protobuf-common.h
17	19	c++/src/capnp/benchmark/protobuf-eval.c++
17	19	c++/src/capnp/benchmark/runner.c++
17	19	c++/src/capnp/blob-test.c++
17	19	c++/src/capnp/blob.c++
17	19	c++/src/capnp/blob.h
17	19	c++/src/capnp/bootstrap-test.ekam-rule
17	19	c++/src/capnp/c++.capnp
17	19	c++/src/capnp/capability-test.c++
17	19	c++/src/capnp/capability.c++
17	19	c++/src/capnp/capability.h
17	19	c++/src/capnp/capnpc.ekam-rule
17	19	c++/src/capnp/common-test.c++
17	19	c++/src/capnp/common.h
17	19	c++/src/capnp/compiler/capnp-test.ekam-rule
17	19	c++/src/capnp/compiler/capnp-test.sh
17	19	c++/src/capnp/compiler/capnp.c++
17	19	c++/src/capnp/compiler/capnpc-c++.c++
17	19	c++/src/capnp/compiler/capnpc-capnp.c++
17	19	c++/src/capnp/compiler/compiler.c++
17	19	c++/src/capnp/compiler/compiler.h
17	19	c++/src/capnp/compiler/error-reporter.c++
17	19	c++/src/capnp/compiler/error-reporter.h
17	19	c++/src/capnp/compiler/evolution-test.c++
17	19	c++/src/capnp/compiler/grammar.capnp
17	19	c++/src/capnp/compiler/lexer-test.c++
17	19	c++/src/capnp/compiler/lexer.c++
17	19	c++/src/capnp/compiler/lexer.capnp
17	19	c++/src/capnp/compiler/lexer.h
17	19	c++/src/capnp/compiler/md5-test.c++
17	19	c++/src/capnp/compiler/module-loader.c++
17	19	c++/src/capnp/compiler/module-loader.h
17	19	c++/src/capnp/compiler/node-translator.c++
17	19	c++/src/capnp/compiler/node-translator.h
17	19	c++/src/capnp/compiler/parser.c++
17	19	c++/src/capnp/compiler/parser.h
17	19	c++/src/capnp/dynamic-capability.c++
17	42	c++/src/capnp/dynamic-test.c++
17	19	c++/src/capnp/dynamic.c++
17	19	c++/src/capnp/dynamic.h
17	19	c++/src/capnp/encoding-test.c++
17	19	c++/src/capnp/endian-fallback-test.c++
17	19	c++/src/capnp/endian-reverse-test.c++
17	19	c++/src/capnp/endian-test.c++
17	19	c++/src/capnp/endian.h
17	19	c++/src/capnp/ez-rpc-test.c++
17	19	c++/src/capnp/ez-rpc.c++
17	19	c++/src/capnp/ez-rpc.h
17	19	c++/src/capnp/generated-header-support.h
17	19	c++/src/capnp/layout-test.c++
17	19	c++/src/capnp/layout.c++
17	19	c++/src/capnp/layout.h
17	19	c++/src/capnp/list.c++
17	19	c++/src/capnp/list.h
17	19	c++/src/capnp/message-test.c++
17	19	c++/src/capnp/message.c++
17	19	c++/src/capnp/message.h
17	19	c++/src/capnp/orphan-test.c++
17	19	c++/src/capnp/orphan.h
17	19	c++/src/capnp/pointer-helpers.h
17	19	c++/src/capnp/pretty-print.h
17	19	c++/src/capnp/rpc-prelude.h
17	19	c++/src/capnp/rpc-test.c++
17	19	c++/src/capnp/rpc-twoparty-test.c++
17	19	c++/src/capnp/rpc-twoparty.c++
17	19	c++/src/capnp/rpc-twoparty.capnp
17	19	c++/src/capnp/rpc-twoparty.h
17	19	c++/src/capnp/rpc.c++
20	22	c++/src/capnp/rpc.capnp
17	19	c++/src/capnp/rpc.h
17	19	c++/src/capnp/schema-loader-test.c++
17	19	c++/src/capnp/schema-loader.c++
17	19	c++/src/capnp/schema-loader.h
17	19	c++/src/capnp/schema-parser-test.c++
17	19	c++/src/capnp/schema-parser.c++
17	19	c++/src/capnp/schema-parser.h
17	19	c++/src/capnp/schema-test.c++
17	19	c++/src/capnp/schema.c++
17	19	c++/src/capnp/schema.capnp
17	19	c++/src/capnp/schema.h
17	19	c++/src/capnp/serialize-async-test.c++
17	19	c++/src/capnp/serialize-async.c++
17	19	c++/src/capnp/serialize-async.h
17	19	c++/src/capnp/serialize-packed-test.c++
17	19	c++/src/capnp/serialize-packed.c++
17	19	c++/src/capnp/serialize-packed.h
17	19	c++/src/capnp/serialize-test.c++
17	19	c++/src/capnp/serialize.c++
17	19	c++/src/capnp/serialize.h
17	42	c++/src/capnp/stringify-test.c++
17	19	c++/src/capnp/stringify.c++
17	19	c++/src/capnp/test-import.capnp
17	19	c++/src/capnp/test-import2.capnp
17	19	c++/src/capnp/test-util.c++
17	19	c++/src/capnp/test-util.h
17	19	c++/src/capnp/test.capnp
17	19	c++/src/capnp/testdata/errors.capnp.nobuild
17	19	c++/src/kj/arena-test.c++
17	19	c++/src/kj/arena.c++
17	19	c++/src/kj/arena.h
17	19	c++/src/kj/array-test.c++
17	19	c++/src/kj/array.c++
17	19	c++/src/kj/array.h
17	19	c++/src/kj/async-inl.h
17	19	c++/src/kj/async-io-test.c++
17	19	c++/src/kj/async-io.c++
17	19	c++/src/kj/async-io.h
17	19	c++/src/kj/async-prelude.h
17	19	c++/src/kj/async-test.c++
17	19	c++/src/kj/async-unix-test.c++
17	19	c++/src/kj/async-unix.c++
17	19	c++/src/kj/async-unix.h
17	19	c++/src/kj/async.c++
20	22	c++/src/kj/async.h
17	19	c++/src/kj/common-test.c++
17	19	c++/src/kj/common.c++
17	19	c++/src/kj/common.h
17	19	c++/src/kj/debug-test.c++
17	19	c++/src/kj/debug.c++
17	19	c++/src/kj/debug.h
17	19	c++/src/kj/exception-test.c++
17	19	c++/src/kj/exception.c++
17	19	c++/src/kj/exception.h
17	19	c++/src/kj/function-test.c++
17	19	c++/src/kj/function.h
17	19	c++/src/kj/io-test.c++
17	19	c++/src/kj/io.c++
17	19	c++/src/kj/io.h
17	19	c++/src/kj/main.c++
20	22	c++/src/kj/main.h
17	19	c++/src/kj/memory-test.c++
17	19	c++/src/kj/memory.c++
17	19	c++/src/kj/memory.h
17	19	c++/src/kj/mutex-test.c++
17	19	c++/src/kj/mutex.c++
17	19	c++/src/kj/mutex.h
17	19	c++/src/kj/one-of-test.c++
17	19	c++/src/kj/one-of.h
17	19	c++/src/kj/parse/char-test.c++
17	19	c++/src/kj/parse/char.c++
17	19	c++/src/kj/parse/char.h
17	19	c++/src/kj/parse/common-test.c++
17	19	c++/src/kj/parse/common.h
17	19	c++/src/kj/refcount-test.c++
17	19	c++/src/kj/refcount.c++
17	19	c++/src/kj/refcount.h
17	19	c++/src/kj/string-test.c++
17	19	c++/src/kj/string-tree-test.c++
17	19	c++/src/kj/string-tree.c++
17	19	c++/src/kj/string-tree.h
17	19	c++/src/kj/string.c++
17	19	c++/src/kj/string.h
17	19	c++/src/kj/thread.c++
17	19	c++/src/kj/thread.h
17	19	c++/src/kj/threadlocal-pthread-test.c++
17	19	c++/src/kj/threadlocal-test.c++
17	19	c++/src/kj/threadlocal.h
17	19	c++/src/kj/time.h
17	19	c++/src/kj/tuple-test.c++
17	19	c++/src/kj/tuple.h
17	19	c++/src/kj/units-test.c++
17	19	c++/src/kj/units.c++
17	19	c++/src/kj/units.h
17	19	c++/src/kj/vector.h
1	2	doc/install.md

--68285ace	2014-06-19T13:08:11-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #102 from emaste/master

Use /usr/bin/env shebang - /bin/bash is not universal
68285ace
--1eb76dc4	2014-06-19T08:50:30-04:00	Ed Maste	emaste@freebsd.org	Use /usr/bin/env shebang - /bin/bash is not universal

On FreeBSD bash is /usr/local/bin/bash.

1eb76dc4
1	1	c++/regenerate-bootstraps.sh
1	1	c++/samples/test.sh
1	1	c++/setup-autotools.sh
1	1	c++/setup-ekam.sh
1	1	doc/push-site.sh
1	1	release.sh
1	1	super-test.sh

--3546fb1b	2014-06-18T16:16:01-07:00	Kenton Varda	temporal@gmail.com	Credit FlatBuffer's reflection API.

3546fb1b
1	1	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--640483bc	2014-06-18T16:04:36-07:00	Kenton Varda	temporal@gmail.com	typo

640483bc
1	1	doc/faq.md

--da4f9be8	2014-06-18T14:26:14-07:00	Kenton Varda	temporal@gmail.com	more tweak

da4f9be8
1	1	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--07bb39c1	2014-06-18T14:24:32-07:00	Kenton Varda	temporal@gmail.com	tweak

07bb39c1
1	1	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--a28bc199	2014-06-18T13:37:30-07:00	Kenton Varda	temporal@gmail.com	Add update link.

a28bc199
2	0	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--e4e6c907	2014-06-18T13:33:58-07:00	Kenton Varda	temporal@gmail.com	Add correrctions to comparison post based on feedback.

e4e6c907
20	14	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--f2a3af6d	2014-06-17T20:48:40-07:00	Kenton Varda	temporal@gmail.com	tweak table colors

f2a3af6d
3	3	doc/stylesheets/stylesheet.css

--9ea44ad3	2014-06-17T18:43:25-07:00	Kenton Varda	temporal@gmail.com	typo

9ea44ad3
1	1	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md

--06d0b37f	2014-06-17T18:19:19-07:00	Kenton Varda	temporal@gmail.com	Add blog post comparing Cap'n Proto, SBE, and FlatBuffers.

06d0b37f
182	0	doc/_posts/2014-06-17-capnproto-flatbuffers-sbe.md
7	0	doc/stylesheets/stylesheet.css

--1f1754e5	2014-06-15T18:00:33-07:00	Kenton Varda	temporal@gmail.com	AAAARRRGGHHHHHH worst change in C++11.

1f1754e5
1	1	c++/src/kj/common.h

--e235866b	2014-06-11T15:33:41-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

e235866b
--c5cf90a9	2014-06-11T15:28:19-07:00	Kenton Varda	temporal@gmail.com	Tweak to build on Android. Fixes #100.

c5cf90a9
1	1	c++/src/kj/exception.c++
1	1	c++/src/kj/main.c++

--35ff4ab0	2014-06-11T14:39:10-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #99 from RLangendam/master

Update doc/README.md to host documentation server
35ff4ab0
--4f2acf5d	2014-06-07T20:46:27+02:00	Ralph Langendam	ralphlangendam@hotmail.com	Update doc/README.md to host documentation server

4f2acf5d
14	4	doc/README.md

--6ca992b3	2014-06-02T20:14:23-07:00	Kenton Varda	temporal@gmail.com	tweak

6ca992b3
1	1	doc/cxxrpc.md

--18d10d23	2014-06-02T20:13:26-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #97 from jjwchoy/doc-fixes

Fixed two examples
18d10d23
--29c3bda4	2014-06-01T20:37:16+01:00	Jason Choy	jjwchoy@gmail.com	Fixed two examples

29c3bda4
2	1	doc/cxxrpc.md

--ae815524	2014-05-30T15:07:49-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

ae815524
--f7a9c94b	2014-05-30T15:07:36-07:00	Kenton Varda	temporal@gmail.com	Promote Erlang to an RPC implementation.

f7a9c94b
2	3	doc/otherlang.md

--f8f277ac	2014-05-29T14:44:14-07:00	Kenton Varda	temporal@gmail.com	Add a way to make an RPC call by ID on a raw capability.

f8f277ac
11	0	c++/src/capnp/capability.h

--da5a1f4b	2014-05-29T01:23:45-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #95 from kaos/patch-2

Close #94: obsolete comment in rpc.capnp
da5a1f4b
--1494d9ec	2014-05-29T06:49:56+02:00	Andreas Stenius	git@astekk.se	Close #94: obsolete comment in rpc.capnp

1494d9ec
8	10	c++/src/capnp/rpc.capnp

--222a77f9	2014-05-28T22:16:27-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #93 from dwrensha/help-message

fix help message in capnpc-c++
222a77f9
--c3a79641	2014-05-28T22:03:26-04:00	David Renshaw	dwrenshaw@gmail.com	fix help message in capnpc-c++

c3a79641
4	5	c++/src/capnp/compiler/capnpc-c++.c++

--b2198041	2014-05-28T19:02:48-07:00	Kenton Varda	kenton@sandstorm.io	Merge pull request #92 from dwrensha/typo

fix typos and remove unused declaration
b2198041
--8449e868	2014-05-28T21:48:00-04:00	David Renshaw	dwrenshaw@gmail.com	fix typos and remove unused declaration

8449e868
2	2	c++/src/capnp/ez-rpc.h
0	2	c++/src/capnp/rpc.c++
4	4	c++/src/kj/string-tree.h

--25509cf4	2014-05-25T13:04:44-07:00	Kenton Varda	temporal@gmail.com	Add David's new Java implementation to web site.

25509cf4
1	0	doc/otherlang.md

--747f78d5	2014-05-20T14:58:50-07:00	Kenton Varda	temporal@gmail.com	Fix bug in previous change.

747f78d5
2	1	c++/src/kj/async-io.c++

--ad133cad	2014-05-20T14:22:26-07:00	Kenton Varda	temporal@gmail.com	Make UnixEventPort accessible through AsyncIoContext.

ad133cad
3	1	c++/src/kj/async-io.c++
6	0	c++/src/kj/async-io.h

--7450fc8b	2014-05-15T14:02:53-07:00	Kenton Varda	temporal@gmail.com	Fixes #90. The bug causes floating-point fields with non-zero defaults to be corrupted if they are set to NaN on a MIPS machine.

7450fc8b
15	1	c++/src/capnp/encoding-test.c++
2	2	c++/src/capnp/layout.h

--55a16ee8	2014-05-13T16:41:51-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #84 from jjwchoy/name-annotations

Added 'name' annotation for the C++ annotation to override the basename ...
55a16ee8
--63ccf60f	2014-05-13T16:27:34-07:00	Kenton Varda	temporal@gmail.com	Update implementation links to add Andreas' wireshark plugin and re-organize.

The previous organization inappropriately made it seem like some implementations weren't ready for production even though they are actually being used in large-scale production already. The problem is that these projects haven't actually implemented 100% of the spec, but they have no need to, because what they have is good enough for their purposes, so their categorization was unlikely to change. I've now simply classified implementations as "Serialization + RPC" vs. "Serialization only", which seems like the most that can be said without getting subjective and ambiguous.

63ccf60f
11	7	doc/otherlang.md

--fc176b80	2014-05-14T00:18:09+01:00	Jason Choy	jjwchoy@gmail.com	Added name annotation support for unions

fc176b80
1	1	c++/src/capnp/c++.capnp
1	1	c++/src/capnp/c++.capnp.c++
8	4	c++/src/capnp/encoding-test.c++
3	1	c++/src/capnp/test.capnp

--eb7da615	2014-05-14T00:07:09+01:00	Jason Choy	jjwchoy@gmail.com	Added name annotation support for groups

eb7da615
1	1	c++/src/capnp/c++.capnp
1	1	c++/src/capnp/c++.capnp.c++
1	1	c++/src/capnp/compiler/capnpc-c++.c++

--f5074edd	2014-05-13T23:14:50+01:00	Jason Choy	jjwchoy@gmail.com	Added name annotation support for interfaces, methods and params

f5074edd
3	3	c++/src/capnp/compiler/capnpc-c++.c++
3	0	c++/src/capnp/encoding-test.c++
4	0	c++/src/capnp/test.capnp

--e8154d95	2014-05-13T22:35:19+01:00	Jason Choy	jjwchoy@gmail.com	Updated CONTRIBUTORS

e8154d95
1	1	CONTRIBUTORS

--31a375f4	2014-05-12T18:46:22-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

31a375f4
--c1329572	2014-05-12T18:41:16-07:00	Kenton Varda	temporal@gmail.com	Treat '-' as a regular argument rather than an option flag.

c1329572
5	3	c++/src/kj/main.c++

--8a2bd42f	2014-05-12T18:40:37-07:00	Kenton Varda	temporal@gmail.com	Add computeSerializedSizeInWords() utility function.

8a2bd42f
13	9	c++/src/capnp/serialize.c++
10	0	c++/src/capnp/serialize.h

--dfc21ebb	2014-05-12T14:37:38+01:00	Jason Choy	jjwchoy@gmail.com	Added test for renamed deeply nested enum

dfc21ebb
1	0	c++/src/capnp/encoding-test.c++
6	0	c++/src/capnp/test.capnp

--9e6f6c0b	2014-05-12T14:34:10+01:00	Jason Choy	jjwchoy@gmail.com	Added name annotation tests for nested structs and named unions

9e6f6c0b
19	2	c++/src/capnp/encoding-test.c++
11	0	c++/src/capnp/test.capnp

--26c91af8	2014-05-12T14:11:07+01:00	Jason Choy	jjwchoy@gmail.com	Added calls to all generated accessors to test name override

26c91af8
8	2	c++/src/capnp/encoding-test.c++

--644f9729	2014-05-12T14:04:38+01:00	Jason Choy	jjwchoy@gmail.com	Added a basic name annotation test

644f9729
10	0	c++/src/capnp/encoding-test.c++
15	0	c++/src/capnp/test.capnp

--8009807e	2014-05-08T20:03:01-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #88 from partylemon/Iterator

Explicitly mark IndexingIterator as a RandomAccessIterator
8009807e
--64462816	2014-05-08T13:09:32+12:00	Philip	p@partylemon.com	Provide a specialisation of std::iterator_traits for IndexingIterator.

Only available when KJ_STD_COMPAT is defined.

64462816
13	1	c++/src/capnp/list.h

--e80de835	2014-05-07T12:30:42-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #86 from kevinwallace/schema-absolute-import

Use absolute import path for c++.capnp
e80de835
--903d5bab	2014-05-07T17:06:59+12:00	Philip	p@partylemon.com	Explicitly mark IndexingIterator as a RandomAccessIterator

903d5bab
2	1	c++/src/capnp/list.h

--4faf56bc	2014-05-04T18:58:55-07:00	Kevin Wallace	kevin@pentabarf.net	Use absolute import path for c++.capnp.

This allows {schema,rpc,rpc-twoparty}.capnp to be used without modification when
relocated outside of the Cap'n Proto codebase.

4faf56bc
1	1	c++/src/capnp/rpc-twoparty.capnp
69	76	c++/src/capnp/rpc-twoparty.capnp.c++
1	1	c++/src/capnp/rpc.capnp
170	182	c++/src/capnp/rpc.capnp.c++
1	1	c++/src/capnp/schema.capnp
204	221	c++/src/capnp/schema.capnp.c++

--c449295b	2014-05-02T21:57:21-07:00	Kenton Varda	temporal@gmail.com	Add loadCompiledTypeAndDependencies() to SchemaParser so that compiled constants can be cast to static types.

c449295b
1	0	c++/src/capnp/compiler/compiler.h
4	0	c++/src/capnp/schema-parser.c++
7	0	c++/src/capnp/schema-parser.h

--87a97a54	2014-05-02T12:59:15+01:00	Jason Choy	jjwchoy@gmail.com	using implicit conversion from nullptr to an empty Maybe

87a97a54
1	1	c++/src/capnp/compiler/capnpc-c++.c++

--9f6e055f	2014-05-02T02:15:05-07:00	Kenton Varda	temporal@gmail.com	Add ability to truncate a list post-allocation and reclaim space. Currently limited to blobs and can only be accessed through the Orphan interface.

9f6e055f
8	0	c++/src/capnp/arena.h
34	0	c++/src/capnp/layout.c++
2	0	c++/src/capnp/layout.h
42	0	c++/src/capnp/orphan-test.c++
20	0	c++/src/capnp/orphan.h
5	1	c++/src/kj/string.h

--f7961072	2014-04-29T22:05:38+01:00	Jason Choy	jjwchoy@gmail.com	Added support for structs to the name annotation and fixed discriminant check names

f7961072
1	1	c++/src/capnp/c++.capnp
20	17	c++/src/capnp/c++.capnp.c++
33	19	c++/src/capnp/compiler/capnpc-c++.c++

--4f888f92	2014-04-28T17:28:08-07:00	Kenton Varda	temporal@gmail.com	Update Go link for new maintainer.

4f888f92
1	1	doc/otherlang.md

--89e2ce1a	2014-04-28T17:24:21-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

89e2ce1a
--4328bc6a	2014-04-28T17:23:16-07:00	Kenton Varda	temporal@gmail.com	Work around MIPS encoding NaNs differently and thus failing tests that compare with golden output.

I decided that consistent output across platforms is an important property, worth sacrificing a little bit of performance on MIPS.

4328bc6a
16	0	c++/src/capnp/layout-test.c++
55	0	c++/src/capnp/layout.h

--fb952aa6	2014-04-29T01:18:44+01:00	Jason Choy	jjwchoy@gmail.com	Add enumerant as a target for the name annotation

fb952aa6
1	1	c++/src/capnp/c++.capnp
1	1	c++/src/capnp/c++.capnp.c++
12	3	c++/src/capnp/compiler/capnpc-c++.c++

--559fd84a	2014-04-28T01:31:15+01:00	Jason Choy	jjwchoy@gmail.com	Added 'name' annotation for the C++ annotation to override the basename used for field accessors

559fd84a
1	0	c++/src/capnp/c++.capnp
32	10	c++/src/capnp/c++.capnp.c++
1	0	c++/src/capnp/c++.capnp.h
9	1	c++/src/capnp/compiler/capnpc-c++.c++

--30c7de63	2014-04-27T16:34:52-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #83 from abyss7/patch-1

Fix problem with the sockaddr struct.
30c7de63
--2e174b22	2014-04-27T21:45:26+04:00	abyss7	abyss.7@gmail.com	Accept `struct sockaddr` as a const pointer.
2e174b22
2	2	c++/src/capnp/ez-rpc.c++

--7aa69c80	2014-04-27T21:42:57+04:00	abyss7	abyss.7@gmail.com	Provide forward declaration for `struct sockaddr`

Otherwise, at least clang++, forward-declares it inside the namespace `::capnp` and doesn't match it with a real `struct sockaddr` from the header 'socket.h'.

Also, accept `const` pointer - there is no point not to do so.
7aa69c80
3	1	c++/src/capnp/ez-rpc.h

--98f9c8fc	2014-04-22T15:53:18-07:00	Kenton Varda	temporal@gmail.com	Fixes #80.

98f9c8fc
4	0	c++/src/kj/common-test.c++
14	0	c++/src/kj/common.h

--9f21a77b	2014-04-22T15:18:20-07:00	Kenton Varda	temporal@gmail.com	Fix style.

9f21a77b
3	2	c++/src/capnp/compiler/capnpc-capnp.c++

--026b8294	2014-04-22T15:17:14-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #82 from kaos/extends

capnpc-capnp: keep list of extended interfaces.
026b8294
--9b9f30b5	2014-04-22T14:54:42+02:00	Andreas Stenius	git@astekk.se	capnpc-capnp: keep list of extended interfaces.

9b9f30b5
12	0	c++/src/capnp/compiler/capnpc-capnp.c++

--871b893f	2014-04-12T13:35:50-07:00	Kenton Varda	temporal@gmail.com	capnproto.org now supports HTTPS; update download links to use it.

871b893f
1	1	doc/_posts/2014-03-11-capnproto-0.4.1-bugfixes.md
1	1	doc/install.md

--51e8b546	2014-04-07T13:42:01-07:00	Kenton Varda	temporal@gmail.com	Fix warning.

51e8b546
1	1	c++/src/capnp/capability-test.c++
5	5	mega-test-quick.cfg

--d1daf075	2014-04-07T13:36:10-07:00	Kenton Varda	temporal@gmail.com	RPC protocol schemas should be installed. Fixes #77.

d1daf075
3	3	c++/Makefile.am

--bbf482f9	2014-04-07T13:25:33-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

bbf482f9
--f850a556	2014-04-07T13:25:24-07:00	Kenton Varda	temporal@gmail.com	Fix bug when writing an array of buffers and the last buffer has zero size.

f850a556
1	0	c++/Makefile.am
60	0	c++/src/kj/io-test.c++
7	2	c++/src/kj/io.c++

--fa0360bd	2014-04-04T17:28:01-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #78 from rblank/bit-ops

Fix two typos in bit operations.
fa0360bd
--56f2fcce	2014-04-05T01:26:25+02:00	Remy Blank	rblank@google.com	Fix two typos in bit operations.

56f2fcce
1	1	c++/src/kj/async-io.c++

--24dc6ae7	2014-04-01T15:16:44-07:00	Kenton Varda	temporal@gmail.com	When an RPC method name matches a C++ keyword, add an underscore to avoid compilation errors.

24dc6ae7
26	0	c++/src/capnp/capability-test.c++
29	3	c++/src/capnp/compiler/capnpc-c++.c++
7	0	c++/src/capnp/test.capnp

--45f3133d	2014-03-31T23:09:18-07:00	Kenton Varda	temporal@gmail.com	Fix Makefile.am.

45f3133d
1	0	c++/Makefile.am

--44e4afcd	2014-03-31T22:10:50-07:00	Kenton Varda	temporal@gmail.com	Fix build on OSX and also GCC 4.7.

44e4afcd
4	5	c++/src/kj/async-unix.c++
1	1	c++/src/kj/async-unix.h
2	2	mega-test-quick.cfg

--5e2f41de	2014-03-31T21:19:35-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

5e2f41de
--6418de1d	2014-03-31T21:16:34-07:00	Kenton Varda	temporal@gmail.com	Tweak timer implementation:

- Define separate times for durations vs. absolute times.
- Make more consistent with existing precedents in KJ style.

6418de1d
1	1	CONTRIBUTORS
3	3	c++/src/kj/async-io.c++
12	2	c++/src/kj/async-io.h
13	14	c++/src/kj/async-unix-test.c++
44	29	c++/src/kj/async-unix.c++
6	10	c++/src/kj/async-unix.h
34	19	c++/src/kj/time.h
61	0	c++/src/kj/units.h

--fbfbccd5	2014-03-30T19:07:07-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #76 from dwrensha/readeroptions

fix some error messages
fbfbccd5
--8df5d72c	2014-03-30T20:52:57-04:00	David Renshaw	dwrenshaw@gmail.com	fix some error messages

8df5d72c
5	5	c++/src/capnp/layout.c++

--8d6b39c8	2014-03-24T01:41:49+01:00	Remy Blank	rblank@google.com	Add timer functionality to the async IO framework.

8d6b39c8
1	0	CONTRIBUTORS
25	1	c++/src/kj/async-io.c++
7	0	c++/src/kj/async-io.h
1	1	c++/src/kj/async-test.c++
34	0	c++/src/kj/async-unix-test.c++
74	1	c++/src/kj/async-unix.c++
18	0	c++/src/kj/async-unix.h
70	0	c++/src/kj/time.h

--00c5f916	2014-03-29T14:39:44-07:00	Kenton Varda	temporal@gmail.com	Add CONTRIBUTORS file.

00c5f916
9	0	CONTRIBUTORS
1	1	LICENSE
2	2	mega-test-quick.cfg

--7b2c629a	2014-03-27T10:01:30-07:00	Kenton Varda	temporal@gmail.com	Add missing include for OSX.

7b2c629a
1	0	c++/src/kj/io.c++

--c7340dfc	2014-03-26T11:25:12-07:00	Kenton Varda	temporal@gmail.com	Fix doc typos.

c7340dfc
1	1	doc/_posts/2014-03-11-capnproto-0.4.1-bugfixes.md
1	1	doc/language.md
1	1	doc/rpc.md

--62c0270a	2014-03-16T19:39:24-07:00	Kenton Varda	temporal@gmail.com	Fix 32-bit build.

62c0270a
1	1	c++/src/capnp/message.h

--1d8e5b67	2014-03-13T22:48:16-07:00	Kenton Varda	temporal@gmail.com	Apparently writev() imposes a limit on the vector size.  Work around that.  Not sure why libc doesn't already do this.

1d8e5b67
11	0	c++/src/kj/io.c++

--6afedf8c	2014-03-12T23:52:16-07:00	Kenton Varda	temporal@gmail.com	Add AutoCloseFd::operator=

6afedf8c
12	0	c++/src/kj/io.h

--1e94279e	2014-03-12T16:02:08-07:00	Kenton Varda	temporal@gmail.com	Extra test line I should have included.

1e94279e
1	0	c++/src/capnp/orphan-test.c++

--bc965cd8	2014-03-12T15:15:53-07:00	Kenton Varda	temporal@gmail.com	Make it possible for a message builder to incorporate a byte array not owned by it without copying.  Useful for injecting large data blobs into a message without copying their contents.  Access this functionality through the Orphanage interface.

bc965cd8
41	18	c++/src/capnp/arena.c++
51	4	c++/src/capnp/arena.h
42	4	c++/src/capnp/layout.c++
10	6	c++/src/capnp/layout.h
1	1	c++/src/capnp/message.h
108	0	c++/src/capnp/orphan-test.c++
26	0	c++/src/capnp/orphan.h

--8caf313b	2014-03-11T15:09:54-07:00	Kenton Varda	temporal@gmail.com	Blog post about 0.4.1.

8caf313b
30	0	doc/_posts/2014-03-11-capnproto-0.4.1-bugfixes.md

--b970cb4a	2014-03-10T19:04:22-07:00	Kenton Varda	temporal@gmail.com	Update test configs

b970cb4a
4	4	mega-test-quick.cfg
5	5	mega-test.cfg
3	2	super-test.sh

--9ecd8c51	2014-03-10T18:05:35-07:00	Kenton Varda	temporal@gmail.com	Work around lack of __thread on iOS.  Based on patch from Jason Choy (@jjwchoy).

9ecd8c51
3	0	c++/Makefile.am
2	1	c++/src/capnp/ez-rpc.c++
2	1	c++/src/kj/async-unix.c++
2	1	c++/src/kj/async.c++
2	1	c++/src/kj/exception.c++
25	0	c++/src/kj/threadlocal-pthread-test.c++
71	0	c++/src/kj/threadlocal-test.c++
130	0	c++/src/kj/threadlocal.h

--665f5bd7	2014-03-10T16:38:42-07:00	Kenton Varda	temporal@gmail.com	Extend FlatArrayMessageReader to indicate where the message actually ended, in case it was not the end of the array.  Useful when reading an mmap'd file with a Cap'n Proto prefix.  Also fix a bug in Maybe dealing with DisallowConstCopy subclasses.

665f5bd7
36	0	c++/src/capnp/serialize-test.c++
4	1	c++/src/capnp/serialize.c++
7	0	c++/src/capnp/serialize.h
7	0	c++/src/kj/common.h

--8e84a527	2014-02-19T18:27:54-08:00	Kenton Varda	temporal@gmail.com	Add Javascript and Lua links.

8e84a527
2	0	doc/otherlang.md

--7efd2aa2	2014-02-10T17:52:00-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

7efd2aa2
--f740a60f	2014-02-10T17:51:27-08:00	Kenton Varda	temporal@gmail.com	Cleaner disconnect handling.  Better fix for issue #71, and also simplifies the interface and improves robustness.

f740a60f
8	3	c++/src/capnp/capability.c++
4	0	c++/src/capnp/capability.h
1	1	c++/src/capnp/ez-rpc.c++
0	9	c++/src/capnp/rpc-twoparty-test.c++
8	32	c++/src/capnp/rpc-twoparty.c++
5	20	c++/src/capnp/rpc-twoparty.h
97	52	c++/src/capnp/rpc.c++

--1fddf5a6	2014-02-10T15:32:42-08:00	Kenton Varda	temporal@gmail.com	Regenerate bootstraps, which have been outdated for a while.

1fddf5a6
1	1	c++/src/capnp/c++.capnp.c++
12	12	c++/src/capnp/compiler/grammar.capnp.c++
4	4	c++/src/capnp/compiler/lexer.capnp.c++
7	7	c++/src/capnp/rpc-twoparty.capnp.c++
22	22	c++/src/capnp/rpc.capnp.c++
13	13	c++/src/capnp/schema.capnp.c++

--0a84a3a7	2014-02-10T15:30:25-08:00	Kenton Varda	temporal@gmail.com	Make TwoPartyVatNetwork::onDrained() work correctly on the server side.  Previously only worked on the client side, where it's actually not very useful.  Fixes #71.  There's a deeper problem, though, that simply holding a capability received from the client will hold the dead connection open.

0a84a3a7
1	0	c++/src/capnp/rpc-twoparty-test.c++
27	7	c++/src/capnp/rpc-twoparty.c++
17	1	c++/src/capnp/rpc-twoparty.h

--8a45a517	2014-02-05T01:12:36-08:00	Kenton Varda	temporal@gmail.com	Fix style.
8a45a517
2	4	c++/src/capnp/dynamic.c++

--28933381	2014-02-05T01:11:06-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #69 from jparyani/master

Allow DynamicEnum fields to be set with int/uint
28933381
--c470d6cb	2014-02-03T18:00:33-08:00	Jason Paryani	github@jparyani.com	Allow DynamicEnum fields to be set with int/uint

c470d6cb
5	1	c++/src/capnp/dynamic.c++

--7405f5cc	2014-01-28T07:13:05-08:00	Kenton Varda	temporal@gmail.com	Fix bug where receiving EOF on the RPC connection could cause RpcConnectionState to go into an infinite promise loop.  Strange that this did not cause trouble earlier.  Also some minor tweaks.

7405f5cc
1	0	c++/src/capnp/dynamic.h
4	3	c++/src/capnp/rpc.c++

--9837177b	2014-01-24T17:27:19-08:00	Kenton Varda	temporal@gmail.com	Some tweaks made while working on v8 bindings.

9837177b
1	1	c++/src/capnp/capability.c++
10	0	c++/src/capnp/compiler/compiler.c++
2	3	c++/src/capnp/dynamic.h
1	0	c++/src/kj/exception.h

--7644d6b1	2014-01-22T16:27:49-08:00	Kenton Varda	temporal@gmail.com	Add OCaml link to implementations list.

7644d6b1
1	0	doc/otherlang.md

--01a7d789	2014-01-22T15:41:02-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

01a7d789
--773fffd6	2014-01-22T15:40:50-08:00	Kenton Varda	temporal@gmail.com	Fixes #67.  Also, prevent people from accidentally making MessageBuilder subclasses copyable/movable as brought up in issue #64.

773fffd6
0	1	c++/src/capnp/layout.c++
1	0	c++/src/capnp/message.h
5	5	c++/src/capnp/rpc.capnp

--20ff3003	2014-01-21T17:57:38-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #68 from dwrensha/typo

fix typos and inconsistencies
20ff3003
--2a87a451	2014-01-21T20:31:14-05:00	David Renshaw	dwrenshaw@gmail.com	fix typos and inconsistencies

2a87a451
1	1	c++/src/capnp/capability.h
3	3	c++/src/capnp/rpc.capnp
1	1	c++/src/kj/async-inl.h
1	1	doc/roadmap.md

--c66458c7	2014-01-12T17:28:06-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #66 from dwrensha/typo

fix two more typos
c66458c7
--533c8afa	2014-01-12T18:36:38-05:00	David Renshaw	dwrenshaw@gmail.com	fix typos

533c8afa
1	1	c++/src/capnp/layout.h
1	1	c++/src/capnp/rpc-twoparty.capnp

--a1160bf7	2014-01-06T18:04:14-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #65 from dwrensha/typo

fix two typos in the docs
a1160bf7
--79f5730b	2014-01-06T21:00:50-05:00	David Renshaw	dwrenshaw@gmail.com	fix two typos in the docs

79f5730b
2	2	doc/cxx.md

--8c5bd340	2014-01-02T21:36:55-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #63 from Ralith/fix-bounds-check

Fix bounds check passing for relative struct pointers with offsets that underflow
8c5bd340
--ce2b276f	2014-01-02T19:41:21-08:00	Benjamin Saunders	besaunde@sfu.ca	Fix containsInterval returning true when 'from' has underflowed

ce2b276f
1	1	c++/src/capnp/arena.h

--e9481681	2014-01-02T09:53:19-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #62 from jmspiewak/master

Fix missing annotations
e9481681
--6e26bb68	2014-01-02T17:33:28+01:00	Jakub Śpiewak	j.m.spiewak@gmail.com	Fix missing annotations on fields (node translator) and methods, params, consts (capnp generator)
6e26bb68
6	3	c++/src/capnp/compiler/capnpc-capnp.c++
1	1	c++/src/capnp/compiler/node-translator.c++

--6beb6946	2014-01-02T13:21:26+01:00	Jakub Śpiewak	j.m.spiewak@gmail.com	doc: Update annotation code sample.

6beb6946
2	2	doc/language.md

--4f4c5a01	2014-01-01T20:48:22-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #61 from fahhem/master

Fix C+1y warnings from Clang.
4f4c5a01
--33d57d1c	2013-12-31T17:29:43-08:00	Fahrzin Hemmati	fahhem@fahhem.com	Fix C+1y warnings from Clang.

warning: 'constexpr' non-static member function will not be implicitly
'const' in C++1y; add 'const' to avoid a change in behavior
[-Wconstexpr-not-const]

33d57d1c
12	12	c++/src/kj/units.h

--2602c0ec	2013-12-22T18:04:41-08:00	Kenton Varda	temporal@gmail.com	Tweak highlighting colors.

2602c0ec
12	5	highlighting/qtcreator/capnp.xml

--ccaff9c9	2013-12-21T22:53:41-08:00	Kenton Varda	temporal@gmail.com	Syntax highlighting for QtCreator.

ccaff9c9
125	0	highlighting/qtcreator/capnp.xml

--fab8c2f7	2013-12-21T16:51:30-08:00	Kenton Varda	temporal@gmail.com	Oops, regenerate bootstraps from two commits ago.

fab8c2f7
3	3	c++/src/capnp/rpc.capnp.c++
1	1	c++/src/capnp/schema.capnp.c++

--a26f5885	2013-12-21T16:51:08-08:00	Kenton Varda	temporal@gmail.com	Fix docs for makeRpcClient()

a26f5885
5	4	c++/src/capnp/rpc.h

--2403cd5e	2013-12-21T16:47:13-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

2403cd5e
--d4ac0550	2013-12-21T16:46:38-08:00	Kenton Varda	temporal@gmail.com	Fixes #59 -- Apparently hadExplicitDefault was never implemented.

d4ac0550
1	0	c++/src/capnp/compiler/node-translator.c++
47	0	c++/src/capnp/schema-test.c++
2	0	c++/src/capnp/test.capnp

--0b253bcc	2013-12-17T11:09:05-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #58 from isn-/master

calculator.capnp style adjusting
0b253bcc
--d6f3cecd	2013-12-17T23:05:20+04:00	Stanislav Ivochkin	isn@extrn.org	calculator.capnp style adjusting

p.s. thanks @cstrahan for vim syntax highlighting

d6f3cecd

--de95af09	2013-12-17T00:38:17-08:00	Kenton Varda	temporal@gmail.com	Delete snappy code.  It relied on an unsubmitted patch to Snappy's interface and it turns out LZ4 is better anyway so we'll probably integrate with that instead, eventually.

de95af09
0	259	c++/src/capnp/serialize-snappy-test.c++
0	218	c++/src/capnp/serialize-snappy.c++
0	113	c++/src/capnp/serialize-snappy.h

--e0ac5f02	2013-12-15T14:53:04-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #57 from isn-/master

Upgrade gtest to 1.7.0
e0ac5f02
--a0b70d4a	2013-12-16T02:08:58+04:00	Stanislav Ivochkin	isn@extrn.org	Upgrade gtest to 1.7.0

a0b70d4a
0	735	c++/gtest-1.6.0-c++11.patch
1	8	c++/setup-autotools.sh

--71493535	2013-12-14T15:46:38-08:00	Kenton Varda	temporal@gmail.com	Update test configs.

71493535
5	5	mega-test-quick.cfg
2	2	mega-test.cfg

--e1e3d140	2013-12-14T14:34:17-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

e1e3d140
--c70c6d38	2013-12-14T14:34:13-08:00	Kenton Varda	temporal@gmail.com	Change pipelining link.

c70c6d38
1	1	doc/rpc.md

--32836bb3	2013-12-14T14:06:38-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #56 from wcn3/master

doc: Fix documentation pseudocode to match description.
32836bb3
--b8ebba7c	2013-12-13T23:43:12-08:00	Bill Neubauer	wcn@google.com	doc: Fix documentation pseudocode to match description.

b8ebba7c
4	4	doc/rpc.md

--f302262a	2013-12-13T17:38:22-08:00	Kenton Varda	temporal@gmail.com	Fix title.

f302262a
1	1	doc/_posts/2013-12-13-promise-pipelining-capnproto-vs-ice.md

--efb07274	2013-12-13T17:37:15-08:00	Kenton Varda	temporal@gmail.com	Add Thrift to b comparison blog post.

efb07274
13	9	doc/_posts/2013-12-13-promise-pipelining-capnproto-vs-ice.md
-	-	doc/images/capnp-vs-thrift-vs-ice.png

--bd2aba98	2013-12-13T15:06:50-08:00	Kenton Varda	temporal@gmail.com	Tweaks.

bd2aba98
14	12	doc/_posts/2013-12-13-promise-pipelining-capnproto-vs-ice.md

--8655d89d	2013-12-13T14:44:11-08:00	Kenton Varda	temporal@gmail.com	Oops.

8655d89d
1	1	doc/_posts/2013-12-13-promise-pipelining-capnproto-vs-ice.md

--a340ba35	2013-12-13T14:42:52-08:00	Kenton Varda	temporal@gmail.com	New blog post, clarifying...

a340ba35
70	0	doc/_posts/2013-12-13-promise-pipelining-capnproto-vs-ice.md
-	-	doc/images/capnp-vs-ice.png

--f6874fdc	2013-12-12T19:56:23-08:00	Kenton Varda	temporal@gmail.com	More clarifications.

f6874fdc
9	1	doc/_posts/2013-12-12-capnproto-0.4-time-travel.md
7	0	doc/rpc.md

--d414eb19	2013-12-12T14:28:13-08:00	Kenton Varda	temporal@gmail.com	Update news post to clarify.

d414eb19
6	0	doc/_posts/2013-12-12-capnproto-0.4-time-travel.md

--bc100753	2013-12-12T13:55:53-08:00	Kenton Varda	temporal@gmail.com	Fix typo.

bc100753
1	1	doc/_posts/2013-12-12-capnproto-0.4-time-travel.md
1	1	doc/rpc.md

--32f82f40	2013-12-12T10:38:00-08:00	Kenton Varda	temporal@gmail.com	Notes on MSVC.

32f82f40
15	0	doc/faq.md
5	0	doc/install.md

--87a93c91	2013-12-12T01:54:33-08:00	Kenton Varda	temporal@gmail.com	Document encoding of capability pointers.

87a93c91
27	0	doc/encoding.md

--f57561b1	2013-12-12T00:58:10-08:00	Kenton Varda	temporal@gmail.com	Fix extends syntax.

f57561b1
2	2	doc/rpc.md

--ee4b392e	2013-12-11T23:40:39-08:00	Kenton Varda	temporal@gmail.com	Fix 32-bit build.

ee4b392e
1	1	c++/src/capnp/message.h

--f6205591	2013-12-11T23:28:44-08:00	Kenton Varda	temporal@gmail.com	Doc tweaks.

f6205591
17	10	doc/_posts/2013-12-12-capnproto-0.4-time-travel.md
11	4	doc/cxxrpc.md
11	7	doc/faq.md
26	19	doc/rpc.md
1	1	doc/stylesheets/stylesheet.css

--b06ff395	2013-12-11T19:20:03-08:00	Kenton Varda	temporal@gmail.com	More doc updates, blog post.

b06ff395
1	0	doc/_config.yml
2	1	doc/{_config.yml => _config_next.yml}
9	0	doc/_includes/header.html
1	1	doc/_layouts/post.html
68	0	doc/_posts/2013-12-12-capnproto-0.4-time-travel.md
3	3	doc/cxxrpc.md
1	2	doc/faq.md
4	0	doc/javascripts/main.js
1	1	doc/news/index.html
34	7	doc/push-site.sh
8	8	doc/rpc.md
22	0	doc/stylesheets/stylesheet.css

--425657bb	2013-12-11T07:32:18-08:00	Kenton Varda	temporal@gmail.com	Lots of documentation updates for 0.5.

425657bb
1	0	doc/_includes/header.html
1	1	doc/cxx.md
7	1	doc/cxxrpc.md
187	0	doc/faq.md
15	49	doc/install.md
14	3	doc/language.md
9	3	doc/otherlang.md
16	17	doc/roadmap.md
1	1	doc/rpc.md

--ab1fc490	2013-12-11T01:46:14-08:00	Kenton Varda	temporal@gmail.com	Update test script for XCode 5, make sure -stdlib gets in pkg-config configs, use pkg-config in test script, and build RPC tests in test script.

ab1fc490
2	2	c++/capnp.pc.in
4	0	c++/configure.ac
32	26	super-test.sh

--a984a0fb	2013-12-10T23:39:32-08:00	Kenton Varda	temporal@gmail.com	Document RPC.

a984a0fb
2	1	doc/_includes/header.html
1	1	doc/_plugins/capnp_lexer.py
11	4	doc/cxx.md
404	0	doc/cxxrpc.md
-	-	doc/images/time-travel.png
5	0	doc/index.md
29	22	doc/language.md
215	19	doc/rpc.md

--3c7efbb4	2013-12-10T21:26:40-08:00	Kenton Varda	temporal@gmail.com	Eliminate the concept of imbuing messages in favor of the simpler concept of setting a cap table directly on MessageReader / getting one from MessageBuilder.  This eliminates capability-context entirely.  This was made possible by the earlier change which moved capabilities to a separate table rather than storing CapDescriptors inline, but I didn't realize it at the time.

3c7efbb4
0	2	c++/Makefile.am
23	0	c++/samples/addressbook.c++
23	0	c++/samples/addressbook.capnp
23	0	c++/samples/calculator-client.c++
30	7	c++/samples/calculator-server.c++
23	0	c++/samples/calculator.capnp
21	165	c++/src/capnp/arena.c++
44	160	c++/src/capnp/arena.h
0	214	c++/src/capnp/capability-context.c++
0	133	c++/src/capnp/capability-context.h
142	11	c++/src/capnp/capability.c++
9	0	c++/src/capnp/capability.h
10	0	c++/src/capnp/ez-rpc.h
3	3	c++/src/capnp/layout-test.c++
10	26	c++/src/capnp/layout.c++
0	16	c++/src/capnp/layout.h
13	5	c++/src/capnp/message.c++
22	5	c++/src/capnp/message.h
27	29	c++/src/capnp/rpc-test.c++
0	1	c++/src/capnp/rpc-twoparty-test.c++
8	0	c++/src/capnp/rpc-twoparty.c++
37	41	c++/src/capnp/rpc.c++
6	0	c++/src/capnp/rpc.h

--bf5dbebf	2013-12-09T22:53:13-08:00	Kenton Varda	temporal@gmail.com	Define additional type aliases AnswerId and ImportId.  In the RPC protocol, always use the type corresponding to the sender's point of view.  In the implementation, always use the type corresponding to the local point of view.

bf5dbebf
6	3	c++/src/capnp/rpc-test.c++
46	35	c++/src/capnp/rpc.c++
109	75	c++/src/capnp/rpc.capnp
22	19	c++/src/capnp/rpc.capnp.c++
84	57	c++/src/capnp/rpc.capnp.h

--b15789d8	2013-12-09T18:54:45-08:00	Kenton Varda	temporal@gmail.com	Add pkg-config support.

b15789d8
3	0	c++/Makefile.am
11	0	c++/capnp-rpc.pc.in
11	0	c++/capnp.pc.in
1	1	c++/configure.ac
6	5	c++/samples/test.sh

--40d86592	2013-12-09T18:28:28-08:00	Kenton Varda	temporal@gmail.com	Lift requirement that releaseParams() be called before tailCall() or allowCancellation() -- this is no longer necessary given the protocol simplification that allowed cap descriptors to be interpreted immediately upon receipt.

40d86592
0	1	c++/src/capnp/capability-test.c++
0	2	c++/src/capnp/capability.c++
0	5	c++/src/capnp/capability.h
0	12	c++/src/capnp/rpc.c++
0	3	c++/src/capnp/test-util.c++

--110ca1c0	2013-12-09T18:10:10-08:00	Kenton Varda	temporal@gmail.com	Hack to make it safe to read capabilities from default values (returning broken caps) without introducing a dependency from libcapnp on libcapnp-rpc.

110ca1c0
0	16	c++/src/capnp/arena.c++
0	8	c++/src/capnp/arena.h
13	2	c++/src/capnp/capability-context.c++
18	8	c++/src/capnp/layout.c++

--fd769d56	2013-12-09T17:24:37-08:00	Kenton Varda	temporal@gmail.com	Oops, regenerate bootstraps.

fd769d56
4	4	c++/src/capnp/compiler/lexer.capnp.h
2	2	c++/src/capnp/schema.capnp.h

--fa34f823	2013-12-09T16:35:06-08:00	Kenton Varda	temporal@gmail.com	Add a sample RPC application, and fix some bugs / add some missing features needed by said app.

fa34f823
1	0	.gitignore
346	0	c++/samples/calculator-client.c++
195	0	c++/samples/calculator-server.c++
97	0	c++/samples/calculator.capnp
12	0	c++/samples/test.sh
6	1	c++/src/capnp/capability-context.h
1	1	c++/src/capnp/capnpc.ekam-rule
2	2	c++/src/capnp/compiler/capnpc-c++.c++
13	13	c++/src/capnp/dynamic.c++
6	1	c++/src/capnp/layout.c++
1	2	c++/src/capnp/pointer-helpers.h
4	4	c++/src/capnp/rpc.c++
1	2	c++/src/kj/array.h
74	0	c++/src/kj/async-inl.h
17	1	c++/src/kj/async-io.c++
8	0	c++/src/kj/async-prelude.h
19	0	c++/src/kj/async-test.c++
0	2	c++/src/kj/async-unix.h
70	0	c++/src/kj/async.c++
6	0	c++/src/kj/async.h
28	2	c++/src/kj/common.h
3	3	mega-test.cfg

--b72dd35a	2013-12-08T16:25:57-08:00	Kenton Varda	temporal@gmail.com	Fix EzRpc example.

b72dd35a
11	10	c++/src/capnp/ez-rpc.h
1	1	c++/src/kj/async-prelude.h
1	1	c++/src/kj/async.c++

--ef2efa98	2013-12-06T22:48:34-08:00	Kenton Varda	temporal@gmail.com	oops

ef2efa98
1	1	release.sh

--5df78948	2013-12-06T22:47:38-08:00	Kenton Varda	temporal@gmail.com	Fixes #52

5df78948
1	1	c++/src/capnp/rpc-twoparty.capnp.h
1	1	c++/src/capnp/rpc.capnp.h
1	4	release.sh

--0407760c	2013-12-06T22:47:10-08:00	Kenton Varda	temporal@gmail.com	Update test configs now that everything passes.

0407760c
3	3	mega-test-quick.cfg
5	5	mega-test.cfg

--ee0c7b0a	2013-12-06T22:02:00-08:00	Kenton Varda	temporal@gmail.com	Set mainlaine version to 0.5-dev.

ee0c7b0a
1	1	c++/configure.ac
1	1	c++/src/capnp/c++.capnp.h
1	1	c++/src/capnp/common.h
1	1	c++/src/capnp/compiler/grammar.capnp.h
1	1	c++/src/capnp/compiler/lexer.capnp.h
1	1	c++/src/capnp/schema.capnp.h

--782b9c4d	2013-12-06T21:32:08-08:00	Kenton Varda	temporal@gmail.com	Skip valgrind on OSX because it's experimental and doesn't fully work yet.

782b9c4d
4	1	super-test.sh

--6beb5910	2013-12-06T21:06:10-08:00	Kenton Varda	temporal@gmail.com	Work around OSX and Cygwin signal issues.

6beb5910
43	26	c++/src/kj/async-unix-test.c++

--b483b77b	2013-12-06T20:19:01-08:00	Kenton Varda	temporal@gmail.com	Fix valgrind issues.

b483b77b
12	2	c++/src/kj/async-io.c++

--2d67f0b8	2013-12-06T19:32:02-08:00	Kenton Varda	temporal@gmail.com	Fix -fno-exceptions tests.

2d67f0b8
2	9	c++/src/capnp/capability-test.c++
0	8	c++/src/capnp/dynamic-test.c++
0	14	c++/src/capnp/encoding-test.c++
0	8	c++/src/capnp/orphan-test.c++
0	8	c++/src/capnp/schema-loader-test.c++
4	9	c++/src/capnp/schema-test.c++
1	0	c++/src/capnp/test-util.c++
14	0	c++/src/capnp/test-util.h
1	1	c++/src/kj/async-test.c++
2	1	c++/src/kj/exception.c++
6	0	c++/src/kj/mutex-test.c++

--aa1bdc3e	2013-12-06T19:10:04-08:00	Kenton Varda	temporal@gmail.com	Allow setting of a different reserved signal than SIGUSR1.

aa1bdc3e
30	7	c++/src/kj/async-unix.c++
8	2	c++/src/kj/async-unix.h

--bc56e509	2013-12-06T18:57:28-08:00	Kenton Varda	temporal@gmail.com	Don't ever auto-define NDEBUG.  Just decide KJ_DEBUG based on optimization mode if neither DEBUG nor NDEBUG is defined.

bc56e509
11	9	c++/src/kj/common.h
4	1	c++/src/kj/debug.h

--43e8ba1a	2013-12-06T18:35:15-08:00	Kenton Varda	temporal@gmail.com	Clarify EventPort docs slightly.

43e8ba1a
5	3	c++/src/kj/async.h

--7a958a11	2013-12-06T07:45:20-08:00	Kenton Varda	temporal@gmail.com	Extend totalSizeInWords() to also return a count of capabilities, which helps when a separate capability table needs to be allocated as well.  Use this in the RPC system.

7a958a11
8	8	c++/src/capnp/any.h
19	7	c++/src/capnp/capability-context.c++
1	2	c++/src/capnp/capability-context.h
12	13	c++/src/capnp/capability.c++
22	18	c++/src/capnp/capability.h
6	0	c++/src/capnp/common.h
1	1	c++/src/capnp/compiler/capnp.c++
6	6	c++/src/capnp/compiler/capnpc-c++.c++
72	72	c++/src/capnp/compiler/grammar.capnp.h
12	12	c++/src/capnp/compiler/lexer.capnp.h
4	4	c++/src/capnp/dynamic-capability.c++
15	15	c++/src/capnp/dynamic.h
7	7	c++/src/capnp/encoding-test.c++
20	14	c++/src/capnp/layout.c++
16	5	c++/src/capnp/layout.h
11	2	c++/src/capnp/message.h
18	18	c++/src/capnp/rpc-twoparty.capnp.h
38	49	c++/src/capnp/rpc.c++
69	69	c++/src/capnp/rpc.capnp.h
1	1	c++/src/capnp/schema-loader.c++
69	69	c++/src/capnp/schema.capnp.h
2	2	c++/src/kj/async-test.c++
3	3	mega-test-quick.cfg

--94f43211	2013-12-06T06:57:29-08:00	Kenton Varda	temporal@gmail.com	Fix Makefile.am

94f43211
3	3	c++/Makefile.am

--281b9faf	2013-12-06T06:24:20-08:00	Kenton Varda	temporal@gmail.com	Optimize promise tail calls by making ChainPromiseNode automatically detect and remove redundant nodes.

281b9faf
14	1	c++/src/kj/async-inl.h
114	0	c++/src/kj/async-test.c++
40	5	c++/src/kj/async.c++
20	0	c++/src/kj/memory-test.c++
24	1	c++/src/kj/memory.h

--fe3f7212	2013-12-06T03:55:08-08:00	Kenton Varda	temporal@gmail.com	Just realized isCanceled() doesn't work.  Remove it.

fe3f7212
3	45	c++/src/capnp/capability-test.c++
7	28	c++/src/capnp/capability.c++
15	17	c++/src/capnp/capability.h
3	7	c++/src/capnp/dynamic.h
4	47	c++/src/capnp/rpc-test.c++
4	7	c++/src/capnp/rpc.c++
6	36	c++/src/capnp/test-util.c++
2	8	c++/src/capnp/test-util.h
1	5	c++/src/capnp/test.capnp
5	2	c++/src/kj/async-prelude.h
11	1	c++/src/kj/async.c++
1	0	c++/src/kj/async.h

--533feaa4	2013-12-06T03:15:05-08:00	Kenton Varda	temporal@gmail.com	Change capability pointers to be indexes into a separate cap list so that CapDescriptors can be interpreted on receipt rather than delaying until the application actually traverses the message.  This massively simplifies a lot of things.

533feaa4
47	30	c++/src/capnp/arena.c++
44	46	c++/src/capnp/arena.h
34	83	c++/src/capnp/capability-context.c++
11	139	c++/src/capnp/capability-context.h
99	126	c++/src/capnp/layout.c++
2	1	c++/src/capnp/layout.h
0	4	c++/src/capnp/orphan.h
20	24	c++/src/capnp/rpc-test.c++
228	585	c++/src/capnp/rpc.c++
81	65	c++/src/capnp/rpc.capnp
195	106	c++/src/capnp/rpc.capnp.c++
340	156	c++/src/capnp/rpc.capnp.h
10	0	c++/src/kj/vector.h

--66e2e032	2013-12-05T13:53:54-08:00	Kenton Varda	temporal@gmail.com	Get rid of 'Advanced' server methods, just have one method that takes a CallContext.  A typedef reduces boilerplate.

66e2e032
6	14	c++/src/capnp/compiler/capnpc-c++.c++
39	41	c++/src/capnp/test-util.c++
20	35	c++/src/capnp/test-util.h

--1460bfb3	2013-12-05T13:09:22-08:00	Kenton Varda	temporal@gmail.com	Deal with remaining TODO(now) / TODO(soon).

1460bfb3
2	2	c++/src/capnp/capability.h
1	1	c++/src/capnp/generated-header-support.h
2	5	c++/src/capnp/rpc.c++
8	8	c++/src/capnp/rpc.capnp
1	1	c++/src/kj/async.c++

--5a2e1bb3	2013-12-05T12:13:57-08:00	Kenton Varda	temporal@gmail.com	Rename Object -> AnyPointer.

5a2e1bb3
22	21	c++/src/capnp/{object-test.c++ => any-test.c++}
5	5	c++/src/capnp/{object.c++ => any.c++}
48	48	c++/src/capnp/{object.h => any.h}
10	10	c++/src/capnp/capability-context.c++
6	6	c++/src/capnp/capability-context.h
1	1	c++/src/capnp/capability-test.c++
20	20	c++/src/capnp/capability.c++
13	13	c++/src/capnp/capability.h
27	27	c++/src/capnp/compiler/capnpc-c++.c++
4	4	c++/src/capnp/compiler/capnpc-capnp.c++
2	1	c++/src/capnp/compiler/grammar.capnp
121	105	c++/src/capnp/compiler/grammar.capnp.c++
82	48	c++/src/capnp/compiler/grammar.capnp.h
8	8	c++/src/capnp/compiler/lexer.capnp.h
21	15	c++/src/capnp/compiler/node-translator.c++
4	4	c++/src/capnp/dynamic-capability.c++
28	24	c++/src/capnp/dynamic-test.c++
61	61	c++/src/capnp/dynamic.c++
72	72	c++/src/capnp/dynamic.h
180	178	c++/src/capnp/encoding-test.c++
3	3	c++/src/capnp/generated-header-support.h
5	5	c++/src/capnp/message.c++
4	4	c++/src/capnp/message.h
87	85	c++/src/capnp/orphan-test.c++
3	3	c++/src/capnp/pointer-helpers.h
6	9	c++/src/capnp/rpc-prelude.h
4	4	c++/src/capnp/rpc-test.c++
1	1	c++/src/capnp/rpc-twoparty-test.c++
4	4	c++/src/capnp/rpc-twoparty.c++
2	2	c++/src/capnp/rpc-twoparty.capnp
21	21	c++/src/capnp/rpc-twoparty.capnp.h
34	34	c++/src/capnp/rpc.c++
11	14	c++/src/capnp/rpc.capnp
152	152	c++/src/capnp/rpc.capnp.h
14	16	c++/src/capnp/rpc.h
11	11	c++/src/capnp/schema-loader.c++
7	7	c++/src/capnp/schema.c++
4	4	c++/src/capnp/schema.capnp
16	14	c++/src/capnp/schema.capnp.c++
105	105	c++/src/capnp/schema.capnp.h
2	2	c++/src/capnp/stringify.c++
5	5	c++/src/capnp/test.capnp
1	1	c++/src/capnp/testdata/errors.capnp.nobuild
1	1	c++/src/capnp/testdata/errors.txt

--4e7967a9	2013-12-04T20:04:32-08:00	Kenton Varda	temporal@gmail.com	Make all Promise methods consistently consume the promise (returning a new promise when it makes sense), rename daemonize -> detach, and make eagerlyEvaluate() require an error handler (this caught several places where I forgot to use one).

4e7967a9
3	6	c++/src/capnp/capability-test.c++
17	24	c++/src/capnp/capability.c++
1	3	c++/src/capnp/ez-rpc.c++
6	12	c++/src/capnp/rpc-test.c++
2	4	c++/src/capnp/rpc-twoparty.c++
22	23	c++/src/capnp/rpc.c++
1	1	c++/src/capnp/test-util.c++
25	11	c++/src/kj/async-inl.h
2	2	c++/src/kj/async-io-test.c++
1	3	c++/src/kj/async-io.c++
1	1	c++/src/kj/async-prelude.h
19	40	c++/src/kj/async-test.c++
6	6	c++/src/kj/async-unix-test.c++
1	1	c++/src/kj/async.c++
25	20	c++/src/kj/async.h
3	3	mega-test-quick.cfg

--8d5f8f9c	2013-12-04T18:59:45-08:00	Kenton Varda	temporal@gmail.com	Fix and test DynamicCapability tail calls.

8d5f8f9c
68	4	c++/src/capnp/capability-test.c++
3	0	c++/src/capnp/dynamic.h

--97687a67	2013-12-04T18:06:16-08:00	Kenton Varda	temporal@gmail.com	Fix stuff.

97687a67
10	6	c++/src/kj/async-io.c++
0	2	c++/src/kj/async-unix.c++
4	3	c++/src/kj/async.h
5	5	mega-test-quick.cfg

--fecb6086	2013-12-04T17:39:59-08:00	Kenton Varda	temporal@gmail.com	Introduce WaitScope for making it clear what functions might wait().

fecb6086
82	66	c++/src/capnp/capability-test.c++
4	4	c++/src/capnp/ez-rpc-test.c++
12	0	c++/src/capnp/ez-rpc.c++
15	6	c++/src/capnp/ez-rpc.h
58	56	c++/src/capnp/rpc-test.c++
12	11	c++/src/capnp/rpc-twoparty-test.c++
6	6	c++/src/capnp/serialize-async-test.c++
2	2	c++/src/kj/async-inl.h
30	29	c++/src/kj/async-io-test.c++
9	5	c++/src/kj/async-io.c++
2	1	c++/src/kj/async-io.h
2	1	c++/src/kj/async-prelude.h
56	30	c++/src/kj/async-test.c++
22	11	c++/src/kj/async-unix-test.c++
24	17	c++/src/kj/async.c++
43	7	c++/src/kj/async.h

--23b792a6	2013-12-04T08:05:23-08:00	Kenton Varda	temporal@gmail.com	Support DNS lookup.

23b792a6
2	2	c++/src/capnp/ez-rpc-test.c++
6	6	c++/src/capnp/ez-rpc.c++
22	18	c++/src/kj/async-io-test.c++
250	88	c++/src/kj/async-io.c++
22	24	c++/src/kj/async-io.h
10	0	c++/src/kj/thread.c++
4	0	c++/src/kj/thread.h

--06fd35c4	2013-12-04T04:53:35-08:00	Kenton Varda	temporal@gmail.com	Split AsyncIoProvider into high-level and low-level interfaces, so that alternate EventPort implementations can implement the low-level interface and reuse the higher-level stuff.

06fd35c4
18	5	c++/src/capnp/ez-rpc.c++
9	1	c++/src/capnp/ez-rpc.h
8	8	c++/src/capnp/rpc-twoparty-test.c++
12	12	c++/src/capnp/serialize-async-test.c++
19	17	c++/src/kj/async-io-test.c++
137	105	c++/src/kj/async-io.c++
78	27	c++/src/kj/async-io.h

--ed03e100	2013-12-04T00:57:56-08:00	Kenton Varda	temporal@gmail.com	EZ RPC interface for quickly setting up clients and servers.

ed03e100
6	2	c++/Makefile.am
58	0	c++/src/capnp/ez-rpc-test.c++
271	0	c++/src/capnp/ez-rpc.c++
177	0	c++/src/capnp/ez-rpc.h
96	0	c++/src/capnp/rpc-prelude.h
6	0	c++/src/capnp/rpc-twoparty.h
94	116	c++/src/capnp/rpc.h
36	12	c++/src/kj/async-io.c++
8	0	c++/src/kj/async-io.h
3	0	c++/src/kj/async.c++

--46475bd7	2013-12-03T19:19:42-08:00	Kenton Varda	temporal@gmail.com	Actually call setRunnable() as documented.

46475bd7
57	0	c++/src/kj/async-test.c++
15	0	c++/src/kj/async.c++
4	0	c++/src/kj/async.h

--a81ce929	2013-12-03T18:54:01-08:00	Kenton Varda	temporal@gmail.com	Fix valgrind bugs.

a81ce929
17	7	c++/src/capnp/compiler/compiler.c++
1	1	c++/src/capnp/dynamic.c++
3	3	mega-test-quick.cfg

--851f51e5	2013-12-03T18:31:06-08:00	Kenton Varda	temporal@gmail.com	Overhaul the way EventLoop is specialized so that it's possible to hook up to an existing event loop infrastructure that is not KJ-aware.  This also makes the async IO API more dependency-injection-friendly.

851f51e5
14	14	c++/src/capnp/capability-test.c++
1	1	c++/src/capnp/rpc-test.c++
15	41	c++/src/capnp/rpc-twoparty-test.c++
1	1	c++/src/capnp/rpc.h
18	24	c++/src/capnp/serialize-async-test.c++
25	43	c++/src/kj/async-inl.h
56	34	c++/src/kj/async-io-test.c++
120	60	c++/src/kj/async-io.c++
107	103	c++/src/kj/async-io.h
12	0	c++/src/kj/async-prelude.h
25	28	c++/src/kj/async-test.c++
116	25	c++/src/kj/async-unix-test.c++
121	71	c++/src/kj/async-unix.c++
12	11	c++/src/kj/async-unix.h
67	118	c++/src/kj/async.c++
60	76	c++/src/kj/async.h

--296f9af1	2013-12-01T17:03:03-08:00	Kenton Varda	temporal@gmail.com	Fix VPATH build.

296f9af1
1	1	c++/src/capnp/capability-test.c++

--5fa2ac1d	2013-11-30T17:59:26-08:00	Kenton Varda	temporal@gmail.com	OSX will actually use a 1-byte socket buffer, apparently.  Better use a bigger number...

5fa2ac1d
13	5	c++/src/capnp/serialize-async-test.c++
5	5	mega-test-quick.cfg

--324b4d0f	2013-11-30T17:06:00-08:00	Kenton Varda	temporal@gmail.com	Update Makefile.am.

324b4d0f
1	3	c++/Makefile.am

--1fcec985	2013-11-30T17:02:03-08:00	Kenton Varda	temporal@gmail.com	Add missing includes, ifdef-out RTTI-requiring debug code when RTTI disabled.

1fcec985
10	1	c++/src/kj/async.c++

--793b2af2	2013-11-30T07:17:43-08:00	Kenton Varda	temporal@gmail.com	Tweak scheduling.

793b2af2
13	14	c++/src/kj/async-inl.h
30	8	c++/src/kj/async-test.c++
42	38	c++/src/kj/async.c++
5	1	c++/src/kj/async.h

--222c3b20	2013-11-30T04:38:50-08:00	Kenton Varda	temporal@gmail.com	Fix bug and slowness affecting evolution-test.

222c3b20
1	10	c++/src/capnp/compiler/compiler.c++

--ba479a7b	2013-11-30T03:59:04-08:00	Kenton Varda	temporal@gmail.com	Remove mention of threads from some comments.

ba479a7b
3	5	c++/src/capnp/arena.c++
3	5	c++/src/capnp/capability.c++
7	21	c++/src/capnp/rpc.c++
0	2	c++/src/capnp/rpc.h
4	4	c++/src/kj/async-inl.h

--2dbf31da	2013-11-30T03:36:06-08:00	Kenton Varda	temporal@gmail.com	Re-arrange async headers a bit to improve organization.

2dbf31da
2	0	c++/Makefile.am
1	1	c++/src/capnp/capability.c++
1	1	c++/src/capnp/compiler/evolution-test.c++
2	2	c++/src/capnp/rpc.c++
797	0	c++/src/kj/async-inl.h
3	3	c++/src/kj/async-io-test.c++
178	0	c++/src/kj/async-prelude.h
3	3	c++/src/kj/async-test.c++
4	4	c++/src/kj/async-unix-test.c++
20	8	c++/src/kj/async.c++
165	1079	c++/src/kj/async.h

--4158ca9f	2013-11-30T02:30:24-08:00	Kenton Varda	temporal@gmail.com	Remove most of EventLoop interface in favor of equivalent Promise methods.

4158ca9f
42	42	c++/src/capnp/capability-test.c++
2	3	c++/src/capnp/capability.c++
12	14	c++/src/capnp/rpc-twoparty-test.c++
3	2	c++/src/capnp/rpc.c++
2	2	c++/src/capnp/test-util.c++
7	3	c++/src/kj/async-io-test.c++
2	2	c++/src/kj/async-io.c++
4	4	c++/src/kj/async-io.h
26	4	c++/src/kj/async-test.c++
8	4	c++/src/kj/async-unix-test.c++
33	29	c++/src/kj/async.c++
143	170	c++/src/kj/async.h

--6def52fd	2013-11-30T01:17:24-08:00	Kenton Varda	temporal@gmail.com	Misc tweaks.

6def52fd
33	37	c++/src/capnp/rpc.c++
6	8	c++/src/kj/async.h

--0d849158	2013-11-29T23:23:26-08:00	Kenton Varda	temporal@gmail.com	Use non-atomic refcounting.

0d849158
29	57	c++/src/capnp/rpc.c++
2	20	c++/src/kj/refcount-test.c++
1	21	c++/src/kj/refcount.c++
14	29	c++/src/kj/refcount.h

--aa9c3115	2013-11-29T22:46:17-08:00	Kenton Varda	temporal@gmail.com	Remove some more mutexes and atomics that I missed.

aa9c3115
7	4	c++/src/capnp/compiler/compiler.c++
4	6	c++/src/capnp/compiler/module-loader.c++
17	19	c++/src/capnp/rpc.c++
2	2	c++/src/capnp/schema-parser.c++

--91acb5b2	2013-11-29T22:07:54-08:00	Kenton Varda	temporal@gmail.com	Make kj::Arena not thread-safe since it hurts performance even when used single-threaded.

91acb5b2
4	5	c++/src/capnp/compiler/compiler.c++
0	66	c++/src/kj/arena-test.c++
41	73	c++/src/kj/arena.c++
22	33	c++/src/kj/arena.h

--c5bed0d2	2013-11-29T17:31:33-08:00	Kenton Varda	temporal@gmail.com	Eliminate the ability to have multiple threads working on building the same message -- performance penalty is too large, and applies even to single-threaded users.

c5bed0d2
11	15	c++/src/capnp/arena.c++
12	14	c++/src/capnp/arena.h
1	1	c++/src/capnp/capability-context.h
0	49	c++/src/capnp/encoding-test.c++
1	1	c++/src/capnp/message.h

--e422fc1d	2013-11-29T16:58:52-08:00	Kenton Varda	temporal@gmail.com	Simplify mutex usage in compiler code.

e422fc1d
11	11	c++/src/capnp/compiler/capnp.c++
256	218	c++/src/capnp/compiler/compiler.c++
14	9	c++/src/capnp/compiler/compiler.h
5	5	c++/src/capnp/compiler/error-reporter.h
5	5	c++/src/capnp/compiler/evolution-test.c++
2	2	c++/src/capnp/compiler/lexer-test.c++
3	3	c++/src/capnp/compiler/lexer.c++
3	4	c++/src/capnp/compiler/lexer.h
24	28	c++/src/capnp/compiler/module-loader.c++
2	2	c++/src/capnp/compiler/module-loader.h
6	6	c++/src/capnp/compiler/node-translator.c++
9	9	c++/src/capnp/compiler/node-translator.h
6	8	c++/src/capnp/compiler/parser.c++
3	3	c++/src/capnp/compiler/parser.h
11	11	c++/src/capnp/schema-parser.c++
7	5	c++/src/capnp/schema-parser.h
2	0	c++/src/capnp/testdata/errors.capnp.nobuild
1	0	c++/src/capnp/testdata/errors.txt

--e1fdba61	2013-11-29T03:01:05-08:00	Kenton Varda	temporal@gmail.com	Remove more mutexes.

e1fdba61
20	33	c++/src/capnp/capability.c++
26	47	c++/src/capnp/rpc-test.c++
9	10	c++/src/capnp/rpc-twoparty.c++
4	4	c++/src/capnp/rpc-twoparty.h

--540b1887	2013-11-29T02:41:12-08:00	Kenton Varda	temporal@gmail.com	Use UnwindDetector to protect against exceptions in all these RPC object desturctors.

540b1887
15	0	c++/src/capnp/rpc.c++

--2d1c9a53	2013-11-28T04:34:34-08:00	Kenton Varda	temporal@gmail.com	Remove a bunch of mutexes.

2d1c9a53
1	1	c++/src/capnp/rpc-test.c++
158	245	c++/src/capnp/rpc.c++
7	11	c++/src/kj/async.c++
17	28	c++/src/kj/async.h

--bf7af0b6	2013-11-28T02:12:35-08:00	Kenton Varda	temporal@gmail.com	Fixes #39 - Obscure deadlock scenario in non-futex SimpleEventLoop implementation.

bf7af0b6
4	5	c++/src/kj/async.c++

--7921c854	2013-11-28T00:32:55-08:00	Kenton Varda	temporal@gmail.com	Revamp concurrency model, part 1:  EventLoop no longer allows cross-thread event queuing, simplifying many things.  Capability clients are no longer thread-safe, so they don't have to be so const.  In the future, explicit ways to communicate between threads will be re-added, but threads will be treated more like separate vats that just happen to have a particularly fat pipe.  Upcoming:  Remove mutexes.

7921c854
10	10	c++/src/capnp/arena.c++
13	13	c++/src/capnp/arena.h
17	20	c++/src/capnp/capability-context.c++
31	41	c++/src/capnp/capability-context.h
57	64	c++/src/capnp/capability-test.c++
92	97	c++/src/capnp/capability.c++
38	42	c++/src/capnp/capability.h
26	29	c++/src/capnp/compiler/capnpc-c++.c++
40	40	c++/src/capnp/compiler/grammar.capnp.h
4	4	c++/src/capnp/dynamic-capability.c++
3	3	c++/src/capnp/dynamic.c++
31	28	c++/src/capnp/dynamic.h
9	9	c++/src/capnp/layout.c++
5	5	c++/src/capnp/layout.h
5	6	c++/src/capnp/object.c++
12	12	c++/src/capnp/object.h
7	1	c++/src/capnp/orphan.h
126	114	c++/src/capnp/rpc-test.c++
23	20	c++/src/capnp/rpc-twoparty-test.c++
7	10	c++/src/capnp/rpc-twoparty.c++
3	4	c++/src/capnp/rpc-twoparty.h
258	258	c++/src/capnp/rpc.c++
12	12	c++/src/capnp/rpc.capnp.h
18	25	c++/src/capnp/rpc.h
16	16	c++/src/capnp/schema.capnp.h
1	0	c++/src/capnp/test-util.c++
1	1	c++/src/kj/async-io.c++
15	190	c++/src/kj/async-test.c++
1	0	c++/src/kj/async-unix-test.c++
83	100	c++/src/kj/async-unix.c++
6	6	c++/src/kj/async-unix.h
283	194	c++/src/kj/async.c++
151	356	c++/src/kj/async.h
0	35	c++/src/kj/work-queue.c++
0	426	c++/src/kj/work-queue.h

--64007d11	2013-11-26T09:37:18-08:00	Kenton Varda	temporal@gmail.com	Make EventLoop current when constructed, so that you can use the Promise methods even when the loop hasn't actually started yet.

64007d11
12	45	c++/src/kj/async-io-test.c++
124	120	c++/src/kj/async-test.c++
25	68	c++/src/kj/async-unix-test.c++
14	5	c++/src/kj/async.c++
29	25	c++/src/kj/async.h
2	0	c++/src/kj/work-queue.h

--98d72869	2013-11-26T07:38:02-08:00	Kenton Varda	temporal@gmail.com	Fix bugs.

98d72869
1	1	c++/src/capnp/capability.c++
67	42	c++/src/capnp/rpc-test.c++
24	14	c++/src/capnp/rpc.c++

--72af96df	2013-11-26T04:29:46-08:00	Kenton Varda	temporal@gmail.com	Implement opt-in cancellation for local calls.  (Previously, cancellation would happen whether or not the callee had opted in.)

72af96df
84	0	c++/src/capnp/capability-test.c++
50	15	c++/src/capnp/capability.c++
7	9	c++/src/capnp/capability.h
86	20	c++/src/capnp/rpc-test.c++
1	1	c++/src/capnp/rpc.c++
48	0	c++/src/capnp/test-util.c++
32	0	c++/src/capnp/test-util.h
7	0	c++/src/capnp/test.capnp

--55d661f7	2013-11-26T02:04:17-08:00	Kenton Varda	temporal@gmail.com	Actually use tail calls when an RPC call bounces back over the same connection.

55d661f7
11	8	c++/src/capnp/capability.c++
12	1	c++/src/capnp/capability.h
44	38	c++/src/capnp/object.h
2	0	c++/src/capnp/rpc-test.c++
18	36	c++/src/capnp/rpc.c++

--312c10f5	2013-11-26T01:17:39-08:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of github.com:kentonv/capnproto

312c10f5
--474ed8a1	2013-11-26T01:17:25-08:00	Kenton Varda	temporal@gmail.com	Update test config.

474ed8a1
3	3	mega-test-quick.cfg

--5edae913	2013-11-26T01:12:21-08:00	Kenton Varda	temporal@gmail.com	Don't rely on default assignment operators for cap clients since they break with double virtual inheritance.

5edae913
36	13	c++/src/capnp/compiler/capnpc-c++.c++
2	0	c++/src/capnp/rpc.c++

--e2905da7	2013-11-25T23:39:23-08:00	Kenton Varda	temporal@gmail.com	Test and fix embargoes.

e2905da7
19	1	c++/src/capnp/capability.c++
216	14	c++/src/capnp/rpc-test.c++
60	67	c++/src/capnp/rpc.c++
6	0	c++/src/capnp/test-util.c++
2	0	c++/src/capnp/test-util.h
6	1	c++/src/capnp/test.capnp
94	70	c++/src/kj/async.c++
16	3	c++/src/kj/async.h

--6b8b8c71	2013-11-25T06:29:11-08:00	Kenton Varda	temporal@gmail.com	Test and fix cancellation and release.

6b8b8c71
1	1	c++/Makefile.ekam
3	1	c++/src/capnp/capability.c++
5	1	c++/src/capnp/capability.h
15	8	c++/src/capnp/compiler/capnpc-c++.c++
180	17	c++/src/capnp/rpc-test.c++
42	30	c++/src/capnp/rpc.c++
62	30	c++/src/capnp/test-util.c++
29	27	c++/src/capnp/test-util.h
12	0	c++/src/capnp/test.capnp

--b1e502f7	2013-11-25T01:28:47-08:00	Kenton Varda	temporal@gmail.com	Test and fix promise resolution across RPC.

b1e502f7
3	0	c++/src/capnp/capability.c++
22	3	c++/src/capnp/capability.h
7	0	c++/src/capnp/compiler/capnpc-c++.c++
41	0	c++/src/capnp/rpc-test.c++
2	0	c++/src/capnp/rpc-twoparty-test.c++
6	6	c++/src/capnp/rpc.c++
49	0	c++/src/capnp/test-util.c++
20	0	c++/src/capnp/test-util.h
11	0	c++/src/capnp/test.capnp

--a30c4171	2013-11-24T23:32:56-08:00	Kenton Varda	temporal@gmail.com	Finish other end of RPC tail call implementation.

a30c4171
1	0	c++/src/capnp/capability-context.h
145	25	c++/src/capnp/rpc.c++

--85a2ec20	2013-11-24T21:33:15-08:00	Kenton Varda	temporal@gmail.com	Cancellation isn't evil, just misunderstood.

85a2ec20
34	24	c++/src/capnp/rpc.c++
6	3	c++/src/capnp/rpc.capnp

--51ef79f6	2013-11-24T20:54:20-08:00	Kenton Varda	temporal@gmail.com	Tweaks.

51ef79f6
7	0	c++/src/capnp/dynamic.h
1	1	c++/src/capnp/rpc-test.c++
4	0	c++/src/capnp/rpc-twoparty-test.c++
1	1	c++/src/capnp/rpc.c++

--1e518b92	2013-11-22T21:44:09-08:00	Kenton Varda	temporal@gmail.com	Tail calls half-implemented, but I think it's time to delete all the cancellation code before continuing because it will simplify things.

1e518b92
4	0	c++/src/capnp/capability-context.c++
33	0	c++/src/capnp/capability-test.c++
51	21	c++/src/capnp/capability.c++
32	0	c++/src/capnp/capability.h
2	0	c++/src/capnp/object.h
43	3	c++/src/capnp/rpc-test.c++
233	65	c++/src/capnp/rpc.c++
43	19	c++/src/capnp/rpc.capnp
74	41	c++/src/capnp/rpc.capnp.c++
169	102	c++/src/capnp/rpc.capnp.h
39	0	c++/src/capnp/test-util.c++
34	0	c++/src/capnp/test-util.h
21	0	c++/src/capnp/test.capnp

--08143efb	2013-11-22T15:44:34-08:00	Kenton Varda	temporal@gmail.com	Implement exclusive promise joining:  Join two Promise<T>s to create a Promise that resolves when either input resolves.

08143efb
46	0	c++/src/kj/async-test.c++
70	0	c++/src/kj/async.c++
60	0	c++/src/kj/async.h

--28ad8ae3	2013-11-22T13:47:36-08:00	Kenton Varda	temporal@gmail.com	Consolidate some redundant code.

28ad8ae3
18	27	c++/src/capnp/rpc.c++

--33b7bc42	2013-11-21T18:10:11-08:00	Kenton Varda	temporal@gmail.com	Oops, don't need to use embargoes if the resolution is on the same machine as the promise, since the network path of calls is unchanged in that case.

33b7bc42
7	3	c++/src/capnp/rpc.c++

--da96d673	2013-11-21T18:07:30-08:00	Kenton Varda	temporal@gmail.com	unsupportedPipelineOps is not workable.

da96d673
1	22	c++/src/capnp/rpc.capnp
27	43	c++/src/capnp/rpc.capnp.c++
0	34	c++/src/capnp/rpc.capnp.h

--d3869607	2013-11-21T17:47:24-08:00	Kenton Varda	temporal@gmail.com	Implement embargoes.

d3869607
8	1	c++/src/capnp/capability.c++
6	0	c++/src/capnp/capability.h
294	71	c++/src/capnp/rpc.c++
9	0	c++/src/capnp/rpc.capnp

--f889d758	2013-11-21T16:35:53-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #48 from dwrensha/null-terminator

remove superfluous null terminator
f889d758
--0fc7a601	2013-11-21T19:15:11-05:00	David Renshaw	dwrenshaw@gmail.com	remove superfluous null terminator

0fc7a601
3	2	c++/src/capnp/benchmark/capnproto-catrank.c++

--1c847b38	2013-11-21T01:50:44-08:00	Kenton Varda	temporal@gmail.com	Tweaks

1c847b38
8	13	c++/src/capnp/rpc-twoparty.c++
23	23	c++/src/capnp/rpc.c++
50	56	c++/src/capnp/rpc.capnp
167	339	c++/src/capnp/rpc.capnp.c++
401	906	c++/src/capnp/rpc.capnp.h

--15f599c8	2013-11-21T01:20:25-08:00	Kenton Varda	temporal@gmail.com	Implement handling of 'Release' messages.

15f599c8
180	40	c++/src/capnp/rpc.c++
3	0	c++/src/kj/one-of.h

--98696a57	2013-11-20T23:50:52-08:00	Kenton Varda	temporal@gmail.com	Correctly generate Resolve messages.

98696a57
4	0	c++/src/capnp/capability-context.c++
23	1	c++/src/capnp/capability.c++
8	1	c++/src/capnp/capability.h
82	15	c++/src/capnp/rpc.c++

--2ca06513	2013-11-20T20:40:30-08:00	Kenton Varda	temporal@gmail.com	Merge pull request #47 from dwrensha/benchmark-include

add missing includes
2ca06513
--030d42b7	2013-11-20T20:40:14-05:00	David Renshaw	dwrenshaw@gmail.com	add missing includes

030d42b7
2	0	c++/src/capnp/benchmark/common.h

--3070f627	2013-11-20T14:32:28-08:00	Kenton Varda	temporal@gmail.com	Implement handling of Resolve messages.  Though currently they are never sent.

3070f627
7	4	c++/src/capnp/rpc-test.c++
275	63	c++/src/capnp/rpc.c++

--e4a5344b	2013-11-19T11:31:59-08:00	Kenton Varda	temporal@gmail.com	Refactor QuestionRef.

e4a5344b
92	151	c++/src/capnp/rpc.c++

--d080e158	2013-11-19T09:23:19-08:00	Kenton Varda	temporal@gmail.com	Define Question/Answer/Import/Export nested so we can avoid the silly templates.

d080e158
82	78	c++/src/capnp/rpc.c++

--f4ab3d2d	2013-11-19T07:35:05-08:00	Kenton Varda	temporal@gmail.com	Refactor how promise imports are represented in the RPC implementation.

f4ab3d2d
151	168	c++/src/capnp/rpc.c++
5	5	c++/src/capnp/rpc.capnp
8	0	c++/src/kj/array.h
54	0	c++/src/kj/async-test.c++
30	0	c++/src/kj/async.c++
66	1	c++/src/kj/async.h

--2aa37a8a	2013-11-18T11:03:44-08:00	Kenton Varda	temporal@gmail.com	Make RPC system handle disconnect.

2aa37a8a
5	1	c++/src/capnp/capability-context.c++
3	0	c++/src/capnp/capability-context.h
5	5	c++/src/capnp/rpc-test.c++
52	2	c++/src/capnp/rpc-twoparty-test.c++
38	10	c++/src/capnp/rpc-twoparty.c++
22	1	c++/src/capnp/rpc-twoparty.h
190	68	c++/src/capnp/rpc.c++
5	6	c++/src/capnp/rpc.h
52	10	c++/src/capnp/serialize-async.c++
5	0	c++/src/capnp/serialize-async.h
3	0	c++/src/kj/async-unix.c++
2	0	c++/src/kj/memory.c++
9	0	c++/src/kj/memory.h
18	0	c++/src/kj/mutex-test.c++
19	1	c++/src/kj/mutex.c++
18	4	c++/src/kj/thread.c++
10	23	c++/src/kj/thread.h
4	4	mega-test-quick.cfg

--38bbbd32	2013-11-17T23:04:00-08:00	Kenton Varda	temporal@gmail.com	Update generated code for previous two commits.

38bbbd32
443	117	c++/src/capnp/rpc.capnp.c++
912	21	c++/src/capnp/rpc.capnp.h

--b9c40e43	2013-11-17T22:56:50-08:00	Kenton Varda	temporal@gmail.com	Define 'Disembargo' RPC message for optimistically enforcing E-order across promise resolution.

b9c40e43
126	0	c++/src/capnp/rpc.capnp

--a88c2b88	2013-11-17T20:21:09-08:00	Kenton Varda	temporal@gmail.com	RPC Returns need to be redirectable to improve pipelining.

a88c2b88
54	1	c++/src/capnp/rpc.capnp

--c80258c8	2013-11-15T00:38:54-08:00	Kenton Varda	temporal@gmail.com	kj::runIoEventLoop() is a shortcut for setting up an EventLoop that can do I/O, without specifying a platform-specific EventLoop.

c80258c8
19	35	c++/src/capnp/serialize-async-test.c++
19	0	c++/src/kj/async-io-test.c++
8	0	c++/src/kj/async-io.c++
61	0	c++/src/kj/async-io.h
3	3	mega-test-quick.cfg

--d475caca	2013-11-14T23:34:33-08:00	Kenton Varda	temporal@gmail.com	Fix GCC.

d475caca
26	12	c++/src/kj/async.h

--51c2b855	2013-11-14T23:28:57-08:00	Kenton Varda	temporal@gmail.com	Fixes #45

51c2b855
1	1	c++/Makefile.am

--113b4d84	2013-11-14T22:49:07-08:00	Kenton Varda	temporal@gmail.com	EventLoopGuarded is like MutexGuarded but synchronizes by queuing operations to a single EventLoop.

113b4d84
11	15	c++/src/capnp/capability.c++
64	0	c++/src/kj/async-test.c++
53	0	c++/src/kj/async.h
1	1	mega-test-quick.cfg

--bf69c94b	2013-11-14T21:02:33-08:00	Kenton Varda	temporal@gmail.com	Lockless EventLoop, but at what cost?  This code got weird.

bf69c94b
1	0	c++/Makefile.am
0	1	c++/configure.ac
16	4	c++/src/kj/async-unix.c++
28	86	c++/src/kj/async.c++
28	22	c++/src/kj/async.h
66	11	c++/src/kj/mutex.c++
37	9	c++/src/kj/mutex.h
35	0	c++/src/kj/work-queue.c++
180	37	c++/src/kj/work-queue.h
4	4	mega-test-quick.cfg

--b2f663a0	2013-11-14T05:33:36-08:00	Kenton Varda	temporal@gmail.com	Fix races in WorkQueue, and simplify usage.

b2f663a0
1	6	c++/src/kj/async-unix.c++
50	76	c++/src/kj/work-queue.h

--7a142713	2013-11-14T03:02:59-08:00	Kenton Varda	temporal@gmail.com	Split WorkQueue into a separate file.

7a142713
1	0	c++/Makefile.am
33	258	c++/src/kj/async-unix.c++
2	2	c++/src/kj/async-unix.h
307	0	c++/src/kj/work-queue.h

--a2c1269c	2013-11-14T01:36:19-08:00	Kenton Varda	temporal@gmail.com	Fixes #39 - race conditions in promise framework.

a2c1269c
8	14	c++/src/kj/async.c++
30	11	c++/src/kj/async.h

--2e3b3413	2013-11-13T23:51:48-08:00	Kenton Varda	temporal@gmail.com	Simplify event queuing -- always preempt from same thread, yield cross-thread.

2e3b3413
1	1	c++/src/capnp/serialize-async-test.c++
32	0	c++/src/kj/async-test.c++
35	27	c++/src/kj/async.c++
54	45	c++/src/kj/async.h

--860af726	2013-11-13T21:52:35-08:00	Kenton Varda	temporal@gmail.com	In RPC protocol, rename request -> params, answer -> results.  Also fix up Join stuff in rpc-twoparty.capnp, because it was sort of wrong.

860af726
1	1	c++/src/capnp/rpc-test.c++
40	5	c++/src/capnp/rpc-twoparty.capnp
33	19	c++/src/capnp/rpc-twoparty.capnp.c++
51	23	c++/src/capnp/rpc-twoparty.capnp.h
1	1	c++/src/capnp/rpc-twoparty.h
11	8	c++/src/capnp/rpc.c++
39	38	c++/src/capnp/rpc.capnp
6	6	c++/src/capnp/rpc.capnp.c++
32	32	c++/src/capnp/rpc.capnp.h
23	23	c++/src/capnp/rpc.h
1	1	c++/src/capnp/test.capnp

--3dda3cee	2013-11-13T20:01:08-08:00	Kenton Varda	temporal@gmail.com	Remove 'has' for primitive fields.  Dynamic version always returns true.  This also means that primitives are always included in text format, even if they are default-valued.

3dda3cee
2	2	c++/src/capnp/compiler/capnp-test.sh
12	59	c++/src/capnp/compiler/capnpc-c++.c++
7	3	c++/src/capnp/compiler/capnpc-capnp.c++
1	1	c++/src/capnp/compiler/compiler.c++
0	783	c++/src/capnp/compiler/grammar.capnp.h
47	41	c++/src/capnp/compiler/lexer-test.c++
0	69	c++/src/capnp/compiler/lexer.capnp.h
6	4	c++/src/capnp/dynamic-test.c++
24	51	c++/src/capnp/dynamic.c++
0	38	c++/src/capnp/encoding-test.c++
0	63	c++/src/capnp/rpc-twoparty.capnp.h
0	328	c++/src/capnp/rpc.capnp.h
7	3	c++/src/capnp/schema-loader.c++
4	3	c++/src/capnp/schema.capnp
49	5	c++/src/capnp/schema.capnp.c++
2	851	c++/src/capnp/schema.capnp.h
325	43	c++/src/capnp/stringify-test.c++
18	6	c++/src/capnp/stringify.c++
17	1	c++/src/capnp/test.capnp
124	8	c++/src/capnp/testdata/pretty.txt
1	1	c++/src/capnp/testdata/short.txt

--cb784ec3	2013-11-13T17:46:42-08:00	Kenton Varda	temporal@gmail.com	Add noexcept to various move constructors.

cb784ec3
3	2	c++/src/capnp/dynamic.c++
1	1	c++/src/capnp/dynamic.h
2	2	c++/src/capnp/layout.h
1	1	c++/src/capnp/rpc.c++
1	1	c++/src/capnp/rpc.h
1	1	c++/src/kj/io.h

--d2689f41	2013-11-13T16:08:38-08:00	Kenton Varda	temporal@gmail.com	More work-arounds.

d2689f41
6	3	c++/src/capnp/serialize-async-test.c++

--38505ceb	2013-11-13T15:55:54-08:00	Kenton Varda	temporal@gmail.com	Work around OSX.

38505ceb
1	1	c++/src/capnp/serialize-async-test.c++

--100a84ed	2013-11-13T15:46:33-08:00	Kenton Varda	temporal@gmail.com	Use a socketpair rather than a pipe in this test so that we can set the buffer size portably.

100a84ed
11	6	c++/src/capnp/serialize-async-test.c++

--1cf1a0c4	2013-11-12T04:58:27-08:00	Kenton Varda	temporal@gmail.com	Update test config.

1cf1a0c4
3	3	mega-test-quick.cfg

--1e12db05	2013-11-12T04:33:38-08:00	Kenton Varda	temporal@gmail.com	Improve inf/nan.  This also makes GCC encode them consistently with Clang and with the existing testdata.

1e12db05
2	2	c++/src/kj/common.h
1	1	mega-test-quick.cfg

--3097f779	2013-11-12T04:22:42-08:00	Kenton Varda	temporal@gmail.com	Mollify GCC.

3097f779
2	2	c++/src/kj/common.h
1	1	mega-test-quick.cfg

--0c2fa6b7	2013-11-12T04:15:57-08:00	Kenton Varda	temporal@gmail.com	Tweak a comment.

0c2fa6b7
6	5	c++/src/capnp/rpc.capnp

--5fe62e13	2013-11-12T03:40:03-08:00	Kenton Varda	temporal@gmail.com	Use __thread rather than thread_local.

5fe62e13
1	5	c++/src/kj/async.c++
1	5	c++/src/kj/exception.c++

--5a917171	2013-11-12T03:37:44-08:00	Kenton Varda	temporal@gmail.com	Allow implicit conversion from Orphan<T> to Orphan<DynamicStruct/DynamicList/DynamicCapability> where applicable.

5a917171
4	0	c++/src/capnp/capability-test.c++
9	0	c++/src/capnp/dynamic.h
9	0	c++/src/capnp/orphan-test.c++

--e71deb9c	2013-11-12T03:18:52-08:00	Kenton Varda	temporal@gmail.com	Clean up stuff from the Solaris patch that was merged earlier.

e71deb9c
1	0	c++/configure.ac
2	9	c++/src/capnp/compiler/capnpc-c++.c++
1	1	c++/src/kj/array.h
3	3	c++/src/kj/exception.c++
2	0	c++/src/kj/string-test.c++
7	4	c++/src/kj/string.c++
16	13	c++/src/kj/string.h

--a22cb202	2013-11-12T02:49:48-08:00	Kenton Varda	temporal@gmail.com	Fix bug handling absolute source paths with no --src-prefix -- just output to the same directory in this case.

a22cb202
5	0	c++/src/capnp/compiler/capnp.c++
2	0	c++/src/capnp/compiler/capnpc-c++.c++

--9bcbd1cd	2013-11-12T02:22:00-08:00	Kenton Varda	temporal@gmail.com	Remove some redundant null checks.

9bcbd1cd
5	5	c++/src/capnp/layout.c++

--74bf54b9	2013-11-12T02:17:51-08:00	Kenton Varda	temporal@gmail.com	Define new KJ constants for min/max integer values and inf/nan, then remove all use of numeric_limits.

74bf54b9
1	2	c++/src/capnp/arena.h
2	4	c++/src/capnp/compiler/capnp.c++
22	23	c++/src/capnp/compiler/node-translator.c++
1	2	c++/src/capnp/compiler/parser.c++
4	4	c++/src/capnp/encoding-test.c++
9	10	c++/src/capnp/layout.c++
1	1	c++/src/capnp/message.h
3	3	c++/src/capnp/serialize-packed-test.c++
3	3	c++/src/capnp/serialize-snappy-test.c++
12	24	c++/src/capnp/test-util.c++
1	2	c++/src/kj/async-unix.c++
26	0	c++/src/kj/common-test.c++
63	0	c++/src/kj/common.h
4	5	c++/src/kj/string.c++

--4878663f	2013-11-12T01:17:41-08:00	Kenton Varda	temporal@gmail.com	Unimbue cap descriptors before extraction/injection.

4878663f
12	7	c++/src/capnp/arena.c++
33	8	c++/src/capnp/arena.h
8	0	c++/src/capnp/layout.c++
8	0	c++/src/capnp/layout.h
2	2	c++/src/kj/refcount-test.c++

--5de44367	2013-11-12T00:40:39-08:00	Kenton Varda	temporal@gmail.com	Misc tweaks.

5de44367
2	2	c++/src/capnp/capability-context.c++
1	1	c++/src/capnp/capability-context.h
15	15	c++/src/kj/async-io-test.c++
8	33	c++/src/kj/async-io.c++
35	32	c++/src/kj/async-io.h

--b365bc9b	2013-11-11T18:44:27-08:00	Kenton Varda	temporal@gmail.com	Spin off libraries kj-async and capnp-rpc, so that people who don't want them can avoid their large footprint.

b365bc9b
15	9	c++/Makefile.am
25	90	c++/src/capnp/arena.c++
14	12	c++/src/capnp/arena.h
84	1	c++/src/capnp/capability-context.c++
61	17	c++/src/capnp/capability-context.h
0	8	c++/src/capnp/capability.c++
0	4	c++/src/capnp/capability.h
98	0	c++/src/capnp/dynamic-capability.c++
0	69	c++/src/capnp/dynamic.c++
22	6	c++/src/capnp/layout.c++
1	0	c++/src/capnp/rpc-test.c++
1	0	c++/src/capnp/rpc-twoparty-test.c++

--d122a3db	2013-11-11T15:01:52-08:00	Kenton Varda	temporal@gmail.com	Rename connect() -> restore().

d122a3db
1	1	c++/src/capnp/rpc-test.c++
1	1	c++/src/capnp/rpc-twoparty-test.c++
3	3	c++/src/capnp/rpc.c++
5	5	c++/src/capnp/rpc.h

--9e411b7f	2013-11-11T12:14:02-08:00	Kenton Varda	temporal@gmail.com	Make rpc protocol headers public.

9e411b7f
4	4	c++/Makefile.am

--61d748d6	2013-11-08T19:19:00-08:00	Kenton Varda	temporal@gmail.com	Add test for pipelining over two-party RPC.

61d748d6
53	0	c++/src/capnp/rpc-twoparty-test.c++

--28073325	2013-11-08T16:22:52-08:00	Kenton Varda	temporal@gmail.com	Add some commentary to the test.

28073325
20	6	c++/src/capnp/rpc-twoparty-test.c++
5	5	mega-test-quick.cfg

--fd8405d9	2013-11-08T15:40:28-08:00	Kenton Varda	temporal@gmail.com	Apparently netinet/ip6.h is the wrong thing to include.

fd8405d9
1	2	c++/src/kj/async-io.c++

--f4c9d713	2013-11-08T15:04:46-08:00	Kenton Varda	temporal@gmail.com	Makefile updated and GCC fixes.

f4c9d713
16	2	c++/Makefile.am
2	2	c++/src/capnp/rpc-twoparty.c++
4	4	c++/src/capnp/rpc-twoparty.h

--490a7a2a	2013-11-08T14:54:37-08:00	Kenton Varda	temporal@gmail.com	Implement two-party network.  The first RPC call over a socket took place at 2013-11-08 14:46:43 -0800 and completed successfully.

490a7a2a
1	1	c++/regenerate-bootstraps.sh
2	1	c++/src/capnp/bootstrap-test.ekam-rule
0	88	c++/src/capnp/capability-test.c++
1	0	c++/src/capnp/capnpc.ekam-rule
0	108	c++/src/capnp/rpc-confined.capnp
27	108	c++/src/capnp/rpc-test.c++
125	0	c++/src/capnp/rpc-twoparty-test.c++
130	0	c++/src/capnp/rpc-twoparty.c++
133	0	c++/src/capnp/rpc-twoparty.capnp
312	0	c++/src/capnp/rpc-twoparty.capnp.c++
725	0	c++/src/capnp/rpc-twoparty.capnp.h
82	0	c++/src/capnp/rpc-twoparty.h
17	10	c++/src/capnp/rpc.c++
61	49	c++/src/capnp/rpc.capnp
72	14	c++/src/capnp/rpc.capnp.c++
155	20	c++/src/capnp/rpc.capnp.h
67	52	c++/src/capnp/rpc.h
76	0	c++/src/capnp/test-util.c++
46	0	c++/src/capnp/test-util.h
7	3	c++/src/capnp/test.capnp
57	0	c++/src/kj/async-io-test.c++
20	0	c++/src/kj/async-io.c++
15	0	c++/src/kj/async-io.h
4	4	c++/src/kj/memory.h

--ecab2520	2013-11-07T15:30:12-08:00	Kenton Varda	temporal@gmail.com	Add code for serializing messages to/parsing from asynchronous streams.

ecab2520
253	0	c++/src/capnp/serialize-async-test.c++
182	0	c++/src/capnp/serialize-async.c++
57	0	c++/src/capnp/serialize-async.h
31	3	c++/src/kj/async-io.c++
27	1	c++/src/kj/async-io.h

--9bb74859	2013-11-05T06:36:27-08:00	Kenton Varda	temporal@gmail.com	Async IO interfaces for low-level networking and similar.

9bb74859
112	0	c++/src/kj/async-io-test.c++
629	0	c++/src/kj/async-io.c++
142	0	c++/src/kj/async-io.h
6	0	c++/src/kj/common-test.c++
30	0	c++/src/kj/common.h
7	2	c++/src/kj/debug.c++
19	6	c++/src/kj/debug.h
15	0	c++/src/kj/memory.h

--b7cdcf4e	2013-11-04T23:14:59-08:00	Kenton Varda	temporal@gmail.com	Add tests for actually receiving multiple signals and multiple polls at once, not just listening for them.

b7cdcf4e
36	2	c++/src/kj/async-unix-test.c++

--e5022cd0	2013-11-03T14:30:16-08:00	Kenton Varda	temporal@gmail.com	Cygwin doesn't have SI_TKILL, fine.

e5022cd0
2	0	c++/src/kj/async-unix-test.c++
1	1	mega-test-quick.cfg

--715434d7	2013-11-03T13:56:13-08:00	Kenton Varda	temporal@gmail.com	Try to work around OSX's crappy signal handling behavior.

715434d7
12	5	c++/src/kj/async-unix-test.c++
10	3	c++/src/kj/async-unix.c++
12	1	c++/src/kj/thread.c++
3	0	c++/src/kj/thread.h
3	3	mega-test-quick.cfg

--87fd6e8c	2013-11-03T12:28:01-08:00	Kenton Varda	temporal@gmail.com	OSX doesn't support sigqueue().

87fd6e8c
1	1	c++/src/kj/async-test.c++
21	10	c++/src/kj/async-unix-test.c++
1	1	c++/src/kj/common-test.c++
4	4	mega-test-quick.cfg

--bcafdb77	2013-11-03T12:04:39-08:00	Kenton Varda	temporal@gmail.com	GCC fixes.

bcafdb77
3	0	c++/Makefile.am
9	5	c++/src/kj/async-unix.c++
1	1	c++/src/kj/async-unix.h

--a0e2a45f	2013-11-01T17:34:02-07:00	Kenton Varda	temporal@gmail.com	UnixEventLoop supports polling fds and catching signals.

a0e2a45f
182	0	c++/src/kj/async-unix-test.c++
500	0	c++/src/kj/async-unix.c++
100	0	c++/src/kj/async-unix.h
2	2	c++/src/kj/async.h

--e7d27780	2013-10-30T23:18:12-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

e7d27780
--ad1c644a	2013-10-30T23:17:35-07:00	Kenton Varda	temporal@gmail.com	Update test config.

ad1c644a
5	5	mega-test-quick.cfg

--076d49a2	2013-10-30T23:04:22-07:00	Kenton Varda	temporal@gmail.com	Work around spurrious GCC 4.7 warning, and split RPC code into separate library.

076d49a2
9	3	c++/Makefile.am
5	2	c++/src/capnp/rpc.c++
4	4	mega-test-quick.cfg

--ba49d48a	2013-10-30T22:37:39-07:00	Kenton Varda	temporal@gmail.com	Update Makefile.am for RPC.

ba49d48a
10	2	c++/Makefile.am
2	1	c++/regenerate-bootstraps.sh
1	1	c++/src/capnp/capnpc.ekam-rule
1	1	c++/src/capnp/object.h
1	1	c++/src/capnp/rpc.c++
1596	0	c++/src/capnp/rpc.capnp.c++
4634	0	c++/src/capnp/rpc.capnp.h

--5f6baed9	2013-10-30T22:27:39-07:00	Kenton Varda	temporal@gmail.com	First tests of RPC protocol implementation.

5f6baed9
17	7	c++/src/capnp/arena.c++
2	0	c++/src/capnp/arena.h
9	1	c++/src/capnp/capability.c++
13	1	c++/src/capnp/object.h
425	0	c++/src/capnp/rpc-test.c++
212	46	c++/src/capnp/rpc.c++
28	7	c++/src/capnp/rpc.h
14	0	c++/src/capnp/test.capnp
9	0	c++/src/kj/async-test.c++
17	0	c++/src/kj/async.c++
61	12	c++/src/kj/async.h

--9575df0c	2013-10-25T18:32:03-07:00	Kenton Varda	temporal@gmail.com	More RPC protocol WIP.

9575df0c
190	91	c++/src/capnp/rpc.c++
5	5	c++/src/capnp/rpc.h

--7298c7fa	2013-10-24T22:57:34-07:00	Kenton Varda	temporal@gmail.com	More RPC protocol WIP.

7298c7fa
3	2	c++/src/capnp/capability.h
2	0	c++/src/capnp/layout.h
433	133	c++/src/capnp/rpc.c++
3	0	c++/src/kj/array.h

--41feb767	2013-10-23T06:04:48-07:00	Kenton Varda	temporal@gmail.com	More RPC protocol WIP.

41feb767
1	1	c++/src/capnp/capability.c++
6	6	c++/src/capnp/capability.h
3	3	c++/src/capnp/dynamic.h
3	0	c++/src/capnp/object.h
443	40	c++/src/capnp/rpc.c++
9	6	c++/src/capnp/rpc.capnp
1	1	c++/src/kj/async.h
2	1	c++/src/kj/exception.c++
4	1	c++/src/kj/exception.h

--966d25a2	2013-10-22T00:35:33-07:00	Kenton Varda	temporal@gmail.com	More RPC protocol WIP.

966d25a2
1	1	c++/src/capnp/arena.c++
2	2	c++/src/capnp/capability.c++
1	1	c++/src/capnp/capability.h
9	0	c++/src/capnp/generated-header-support.h
4	0	c++/src/capnp/layout.c++
7	0	c++/src/capnp/layout.h
14	0	c++/src/capnp/object.h
534	161	c++/src/capnp/rpc.c++
4	0	c++/src/capnp/rpc.capnp
18	0	c++/src/kj/refcount-test.c++
25	10	c++/src/kj/refcount.c++
21	0	c++/src/kj/refcount.h

--c33b8908	2013-10-20T22:53:46-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #38 from dwrensha/typos

fix typos in error message and comment
c33b8908
--f86ab668	2013-10-20T02:01:30-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #40 from jparyani/master

Add zero arg constructor and `getType` to DynamicValue::Pipeline
f86ab668
--cc180076	2013-10-19T23:03:37-07:00	Jason Paryani	github@jparyani.com	Add zero arg constructor and `getType` to DynamicValue::Pipeline

cc180076
5	0	c++/src/capnp/dynamic.h

--de9e9b68	2013-10-19T19:59:06-04:00	David Renshaw	dwrenshaw@gmail.com	fix typos in error message and comment

de9e9b68
1	1	c++/src/capnp/arena.h
1	1	c++/src/kj/common.c++

--c1e51108	2013-10-17T17:40:37-07:00	Kenton Varda	temporal@gmail.com	TaskSet manages executing promises for 'daemon' operations.

c1e51108
6	2	c++/src/capnp/rpc.c++
39	0	c++/src/kj/async-test.c++
64	0	c++/src/kj/async.c++
33	1	c++/src/kj/async.h

--eda17e08	2013-10-17T06:12:14-07:00	Kenton Varda	temporal@gmail.com	RPC protocol implementation WIP.

eda17e08
3	0	c++/src/capnp/object.c++
2	0	c++/src/capnp/object.h
7	0	c++/src/capnp/pointer-helpers.h
638	0	c++/src/capnp/rpc.c++
356	0	c++/src/capnp/rpc.h

--edea0aab	2013-10-17T06:11:53-07:00	Kenton Varda	temporal@gmail.com	Tweak RPC protocol.

edea0aab
24	18	c++/src/capnp/rpc.capnp

--c53ca2f3	2013-10-15T17:11:52-07:00	Kenton Varda	temporal@gmail.com	Associate 'Capability' type with null interface schema.

c53ca2f3
0	8	c++/src/capnp/capability.h
14	0	c++/src/capnp/common.h
7	2	c++/src/capnp/generated-header-support.h
3	0	c++/src/capnp/schema-test.c++
9	1	c++/src/capnp/schema.c++

--c6712690	2013-10-15T16:53:26-07:00	Kenton Varda	temporal@gmail.com	Make Schema default constructors produce consistent, non-crashy values.  This improves the dynamic interface's robustness, particularly when exceptions are disabled.

c6712690
14	0	c++/src/capnp/schema-test.c++
167	4	c++/src/capnp/schema.c++
15	5	c++/src/capnp/schema.h

--5d6ff087	2013-10-15T15:41:38-07:00	Kenton Varda	temporal@gmail.com	Fix issue 37.

5d6ff087
1	1	c++/src/capnp/compiler/capnpc-capnp.c++

--52229ebf	2013-10-15T04:08:52-07:00	Kenton Varda	temporal@gmail.com	Add test for setting 1-bit struct.

52229ebf
22	0	c++/src/capnp/encoding-test.c++

--90c108ea	2013-10-15T03:40:16-07:00	Kenton Varda	temporal@gmail.com	Oops, fix bugs.

90c108ea
8	8	c++/src/capnp/dynamic.c++
4	4	c++/src/capnp/dynamic.h
3	3	mega-test-quick.cfg

--02b8f4cd	2013-10-15T03:29:34-07:00	Kenton Varda	temporal@gmail.com	Fix GCC issues.

02b8f4cd
6	5	c++/src/capnp/arena.c++
2	5	c++/src/capnp/capability.h
0	3	c++/src/capnp/object.h
2	2	c++/src/kj/exception-test.c++

--4e386165	2013-10-15T03:15:37-07:00	Kenton Varda	temporal@gmail.com	Flesh out capability API: lists, dynamics, orphans, other things.

4e386165
4	4	c++/src/capnp/arena.c++
85	1	c++/src/capnp/capability-context.c++
43	0	c++/src/capnp/capability-context.h
480	14	c++/src/capnp/capability-test.c++
18	118	c++/src/capnp/capability.c++
145	15	c++/src/capnp/capability.h
12	0	c++/src/capnp/common.h
28	4	c++/src/capnp/compiler/capnpc-c++.c++
24	0	c++/src/capnp/compiler/grammar.capnp.h
4	0	c++/src/capnp/compiler/lexer.capnp.h
1	1	c++/src/capnp/compiler/node-translator.c++
425	28	c++/src/capnp/dynamic.c++
460	17	c++/src/capnp/dynamic.h
17	2	c++/src/capnp/layout.c++
3	1	c++/src/capnp/layout.h
53	25	c++/src/capnp/object.h
10	0	c++/src/capnp/orphan.h
82	1	c++/src/capnp/schema.c++
23	0	c++/src/capnp/schema.capnp.h
13	0	c++/src/capnp/schema.h
2	4	c++/src/capnp/stringify.c++
6	1	c++/src/capnp/test.capnp
2	2	c++/src/kj/async.h
16	0	c++/src/kj/common-test.c++
11	0	c++/src/kj/common.h
8	0	c++/src/kj/memory-test.c++
1	1	c++/src/kj/memory.h

--fb72c5f4	2013-10-11T19:25:15-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

fb72c5f4
--6fbca053	2013-10-11T19:23:43-07:00	Kenton Varda	temporal@gmail.com	Update test config.

6fbca053
5	5	mega-test-quick.cfg

--c6e2767a	2013-10-11T19:08:05-07:00	Kenton Varda	temporal@gmail.com	Fix gcc-4.8

c6e2767a
1	1	c++/src/capnp/capability.c++
1	1	c++/src/kj/async.c++
1	1	c++/src/kj/async.h

--31d0f0d2	2013-10-11T18:47:30-07:00	Kenton Varda	temporal@gmail.com	Fix pedantic warning in generated code.

31d0f0d2
1	2	c++/src/capnp/compiler/capnpc-c++.c++

--8de55087	2013-10-11T18:43:01-07:00	Kenton Varda	temporal@gmail.com	More GCC fixes.

8de55087
0	1	c++/src/capnp/capability.c++
3	1	c++/src/capnp/layout.c++
2	2	c++/src/kj/one-of.h

--bab217b2	2013-10-11T18:31:49-07:00	Kenton Varda	temporal@gmail.com	Fix GCC problems.

bab217b2
13	2	c++/Makefile.am
7	4	c++/src/capnp/capability.c++
1	1	c++/src/kj/one-of-test.c++
3	3	c++/src/kj/one-of.h

--edbc2a5a	2013-10-11T18:16:45-07:00	Kenton Varda	temporal@gmail.com	IT WOOOORRRKKSS:  Local capabilities, including pipelining.  Now we just need an RPC protocol...

edbc2a5a
9	9	c++/src/capnp/arena.c++
8	7	c++/src/capnp/arena.h
83	10	c++/src/capnp/capability-test.c++
132	35	c++/src/capnp/capability.c++
40	71	c++/src/capnp/capability.h
2	0	c++/src/capnp/common.h
84	9	c++/src/capnp/compiler/capnpc-c++.c++
416	0	c++/src/capnp/compiler/grammar.capnp.h
56	0	c++/src/capnp/compiler/lexer.capnp.h
1	1	c++/src/capnp/layout.c++
29	0	c++/src/capnp/object.c++
68	1	c++/src/capnp/object.h
4	4	c++/src/capnp/orphan.h
354	0	c++/src/capnp/schema.capnp.h
4	0	c++/src/capnp/test.capnp
6	2	c++/src/kj/async.c++

--f566cd4d	2013-10-11T06:59:39-07:00	Kenton Varda	temporal@gmail.com	Capability accessor support code and initial tests of local calls.

f566cd4d
99	42	c++/src/capnp/arena.c++
17	8	c++/src/capnp/arena.h
29	11	c++/src/capnp/capability-context.h
155	0	c++/src/capnp/capability-test.c++
13	6	c++/src/capnp/capability.c++
3	1	c++/src/capnp/capability.h
37	4	c++/src/capnp/compiler/capnpc-c++.c++
120	28	c++/src/capnp/layout.c++
1	2	c++/src/capnp/layout.h
4	0	c++/src/capnp/orphan.h
12	0	c++/src/kj/async-test.c++
2	2	c++/src/kj/async.c++
37	9	c++/src/kj/async.h

--bdd06585	2013-10-11T00:14:16-07:00	Kenton Varda	temporal@gmail.com	Refactor capability code using fork.  Still too much refcounting, though.  Maybe this calls for a different design for pipelining...

bdd06585
1	1	c++/src/capnp/arena.c++
142	221	c++/src/capnp/capability.c++
6	8	c++/src/capnp/capability.h
4	4	c++/src/kj/async-test.c++
9	5	c++/src/kj/async.c++
60	16	c++/src/kj/async.h
10	1	c++/src/kj/refcount.c++

--fe5b21e8	2013-10-09T16:31:39-07:00	Kenton Varda	temporal@gmail.com	Using promises for references to represent each branch of a fork doesn't work, because the fork hub will be deleted when the last branch resolves, before any continuation can run.  Instead, let's just institutionalize the concept of addRef() for owned pointers.

fe5b21e8
45	5	c++/src/kj/async-test.c++
31	34	c++/src/kj/async.h

--06945999	2013-10-09T06:47:26-07:00	Kenton Varda	temporal@gmail.com	Implement ability to fork promises.

06945999
24	0	c++/src/kj/async-test.c++
102	6	c++/src/kj/async.c++
183	8	c++/src/kj/async.h
2	2	c++/src/kj/common.h
0	3	c++/src/kj/refcount.h

--e8d256ab	2013-10-08T16:21:47-07:00	Kenton Varda	temporal@gmail.com	More capabilities work.  I think I need to implement Promise forking, though.

e8d256ab
23	23	c++/src/capnp/arena.c++
285	91	c++/src/capnp/capability.c++
16	2	c++/src/capnp/capability.h
2	2	c++/src/capnp/compiler/capnpc-c++.c++
3	3	c++/src/capnp/compiler/evolution-test.c++
2	2	c++/src/capnp/dynamic.h
2	2	c++/src/capnp/message.c++
1	1	c++/src/capnp/object.c++
8	8	c++/src/capnp/object.h
1	1	c++/src/capnp/schema-parser.c++
15	0	c++/src/kj/async-test.c++
56	5	c++/src/kj/async.h
4	0	c++/src/kj/common.h
2	2	c++/src/kj/exception.c++
1	1	c++/src/kj/exception.h
22	6	c++/src/kj/memory.h
57	14	c++/src/{capnp/object.c++ => kj/one-of-test.c++}
145	0	c++/src/kj/one-of.h

--7ceed92d	2013-10-03T22:49:58-07:00	Kenton Varda	temporal@gmail.com	More WIP.

7ceed92d
10	4	c++/src/capnp/arena.c++
247	0	c++/src/capnp/capability.c++
66	37	c++/src/capnp/capability.h
5	4	c++/src/capnp/compiler/capnpc-c++.c++
0	34	c++/src/capnp/dynamic.c++
0	21	c++/src/capnp/dynamic.h
3	3	c++/src/capnp/generated-header-support.h
11	11	c++/src/capnp/layout-test.c++
10	41	c++/src/capnp/layout.c++
22	13	c++/src/capnp/layout.h
7	24	c++/src/capnp/message.c++
34	28	c++/src/capnp/message.h
10	32	c++/src/capnp/{capability.c++ => object.c++}
6	0	c++/src/capnp/object.h
39	2	c++/src/kj/async.h
57	0	c++/src/kj/refcount-test.c++
36	0	c++/src/kj/refcount.c++
98	0	c++/src/kj/refcount.h

--2e17fd43	2013-10-01T19:31:57-07:00	Kenton Varda	temporal@gmail.com	Interface code generation.  Also update method grammar to allow multiple returns, and allow specifying request/response structs instead of parameter lists.

2e17fd43
1	1	c++/src/capnp/arena.c++
26	1	c++/src/capnp/capability.c++
115	61	c++/src/capnp/capability.h
326	82	c++/src/capnp/compiler/capnpc-c++.c++
31	23	c++/src/capnp/compiler/capnpc-capnp.c++
27	11	c++/src/capnp/compiler/compiler.c++
19	3	c++/src/capnp/compiler/grammar.capnp
174	51	c++/src/capnp/compiler/grammar.capnp.c++
424	106	c++/src/capnp/compiler/grammar.capnp.h
274	175	c++/src/capnp/compiler/node-translator.c++
8	1	c++/src/capnp/compiler/node-translator.h
67	16	c++/src/capnp/compiler/parser.c++
3	0	c++/src/capnp/compiler/parser.h
46	45	c++/src/capnp/schema-loader.c++
14	14	c++/src/capnp/schema.capnp
68	167	c++/src/capnp/schema.capnp.c++
74	332	c++/src/capnp/schema.capnp.h
4	2	c++/src/capnp/test.capnp

--7abc51a9	2013-09-30T12:22:40-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #36 from kaos/master

capnp plugin: missing comment for union tag on groups.
7abc51a9
--51b586e7	2013-09-30T11:53:56+02:00	Andreas Stenius	git@astekk.se	capnp plugin: missing comment for union tag on groups.

51b586e7
1	1	c++/src/capnp/compiler/capnpc-capnp.c++

--d8c5b805	2013-09-29T03:27:45-07:00	Kenton Varda	temporal@gmail.com	Extend interface grammar to support inheritance, and update compiler to properly compile interfaces.

d8c5b805
18	4	c++/src/capnp/compiler/capnpc-c++.c++
23	4	c++/src/capnp/compiler/compiler.c++
3	1	c++/src/capnp/compiler/grammar.capnp
114	69	c++/src/capnp/compiler/grammar.capnp.c++
119	17	c++/src/capnp/compiler/grammar.capnp.h
79	2	c++/src/capnp/compiler/node-translator.c++
2	1	c++/src/capnp/compiler/node-translator.h
13	1	c++/src/capnp/compiler/parser.c++
4	0	c++/src/capnp/schema-loader.c++
3	0	c++/src/capnp/schema.capnp
27	10	c++/src/capnp/schema.capnp.c++
52	2	c++/src/capnp/schema.capnp.h
10	0	c++/src/capnp/test.capnp

--d07bf3b8	2013-09-29T00:54:17-07:00	Kenton Varda	temporal@gmail.com	More capabilities core API WIP.

d07bf3b8
60	6	c++/src/capnp/arena.c++
16	5	c++/src/capnp/arena.h
33	11	c++/src/capnp/{capability.c++ => capability-context.c++}
158	0	c++/src/capnp/capability-context.h
5	6	c++/src/capnp/capability.c++
258	123	c++/src/capnp/capability.h
16	0	c++/src/capnp/layout.c++
19	4	c++/src/capnp/layout.h
34	0	c++/src/capnp/object.h
2	2	c++/src/capnp/rpc.capnp

--68c78b8f	2013-09-26T10:41:33-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #35 from cstrahan/rpc-doc-typo

typo: 'use' instead of 'user'
68c78b8f
--a3c6f1dd	2013-09-26T06:28:34-04:00	Charles Strahan	charles.c.strahan@gmail.com	typo: 'use' instead of 'user'

a3c6f1dd
1	1	c++/src/capnp/rpc.capnp

--398dac0d	2013-09-25T16:47:39-07:00	Kenton Varda	temporal@gmail.com	Capabilities core API WIP.

398dac0d
123	17	c++/src/capnp/arena.c++
140	27	c++/src/capnp/arena.h
42	0	c++/src/capnp/capability.c++
250	0	c++/src/capnp/capability.h
3	3	c++/src/capnp/layout-test.c++
8	0	c++/src/capnp/layout.h
5	5	c++/src/capnp/message.c++
4	4	c++/src/capnp/message.h
6	0	c++/src/capnp/rpc.capnp

--c0fc7ba9	2013-09-24T16:39:46-07:00	Kenton Varda	temporal@gmail.com	Fix parse error location on empty statement.

c0fc7ba9
1	1	c++/src/capnp/compiler/parser.c++

--4305327c	2013-09-24T06:04:26-07:00	Kenton Varda	temporal@gmail.com	Update test config.

4305327c
5	5	mega-test-quick.cfg

--683dd3be	2013-09-24T05:02:42-07:00	Kenton Varda	temporal@gmail.com	Remove obsolete ObjectReader/ObjectBuilder classes.

683dd3be
128	229	c++/src/capnp/layout.c++
2	69	c++/src/capnp/layout.h

--c44c9276	2013-09-24T04:15:51-07:00	Kenton Varda	temporal@gmail.com	Get rid of no-longer-needed object-specific methods of DynamicStruct.  Use get().as<ObjectPointer>() instead.

c44c9276
9	4	c++/src/capnp/dynamic-test.c++
11	114	c++/src/capnp/dynamic.c++
0	22	c++/src/capnp/dynamic.h

--d99c0b4c	2013-09-24T04:07:01-07:00	Kenton Varda	temporal@gmail.com	Remove DynamicObject.  DynamicValue can now contain an ObjectPointer to represent object fields.

d99c0b4c
3	3	c++/src/capnp/compiler/node-translator.c++
12	6	c++/src/capnp/dynamic-test.c++
52	115	c++/src/capnp/dynamic.c++
35	177	c++/src/capnp/dynamic.h
29	8	c++/src/capnp/layout.c++
4	0	c++/src/capnp/layout.h
96	0	c++/src/capnp/object.h
3	5	c++/src/capnp/orphan-test.c++
0	2	c++/src/capnp/stringify.c++

--2b643930	2013-09-24T02:12:23-07:00	Kenton Varda	temporal@gmail.com	Revamp generated interface to Object fields.  Now there is an ObjectPointer::{Reader,Builder}.  This will simplify the dynamic API (next change) and also makes it easier to delegate decisions about the object type to a function that doesn't know about the context where the object lives (i.e. by passing an ObjectPointer::Builder).

2b643930
3	0	c++/Makefile.am
4	0	c++/src/capnp/common.h
12	68	c++/src/capnp/compiler/capnpc-c++.c++
2	2	c++/src/capnp/compiler/capnpc-capnp.c++
4	4	c++/src/capnp/compiler/node-translator.c++
12	12	c++/src/capnp/dynamic-test.c++
33	10	c++/src/capnp/dynamic.c++
45	0	c++/src/capnp/dynamic.h
152	229	c++/src/capnp/encoding-test.c++
1	0	c++/src/capnp/generated-header-support.h
112	0	c++/src/capnp/object-test.c++
190	0	c++/src/capnp/object.h
46	44	c++/src/capnp/orphan-test.c++
3	3	c++/src/capnp/schema-loader.c++
3	3	c++/src/capnp/schema.c++
36	216	c++/src/capnp/schema.capnp.h

--58d8f75c	2013-09-24T00:54:49-07:00	Kenton Varda	temporal@gmail.com	Refactor PointerHelpers to operate on PointerReader/PointerBuilder.

58d8f75c
21	17	c++/src/capnp/compiler/capnpc-c++.c++
216	216	c++/src/capnp/compiler/grammar.capnp.h
62	62	c++/src/capnp/compiler/lexer.capnp.h
24	27	c++/src/capnp/dynamic.c++
23	37	c++/src/capnp/dynamic.h
1	101	c++/src/capnp/generated-header-support.h
34	101	c++/src/capnp/list.h
136	0	c++/src/capnp/pointer-helpers.h
237	225	c++/src/capnp/schema.capnp.h

--76bda20e	2013-09-23T14:14:44-07:00	Kenton Varda	temporal@gmail.com	Factor Pointer{Reader,Builder} out from {Struct,List}{Reader,Builder}.  Will make it easier to deal with Object fields.

76bda20e
10	7	c++/src/capnp/compiler/capnpc-c++.c++
114	114	c++/src/capnp/compiler/grammar.capnp.h
20	20	c++/src/capnp/compiler/lexer.capnp.h
103	101	c++/src/capnp/dynamic.c++
6	6	c++/src/capnp/dynamic.h
17	16	c++/src/capnp/generated-header-support.h
33	24	c++/src/capnp/layout-test.c++
102	235	c++/src/capnp/layout.c++
141	173	c++/src/capnp/layout.h
43	37	c++/src/capnp/list.h
99	99	c++/src/capnp/schema.capnp.h

--62d0d0d4	2013-09-19T16:12:51-07:00	Kenton Varda	temporal@gmail.com	Clarify that question and export IDs are per-connection and suggest how to allocate them.

62d0d0d4
8	2	c++/src/capnp/rpc.capnp

--7d0f5e6f	2013-09-19T14:48:49-07:00	Kenton Varda	temporal@gmail.com	Add some graceful error / missing feature handling.

7d0f5e6f
53	31	c++/src/capnp/rpc.capnp

--f7a7714c	2013-09-18T15:42:02-07:00	Kenton Varda	temporal@gmail.com	Let's go ahead and rename  to , acknowledging that this may expand to support pipeline operations that are not simply fetching members.

f7a7714c
16	18	c++/src/capnp/rpc.capnp

--5326ffc7	2013-09-18T15:34:02-07:00	Kenton Varda	temporal@gmail.com	Flesh out pipelining a little more, so that it can be extended later.

5326ffc7
31	6	c++/src/capnp/rpc.capnp

--dd9038ab	2013-09-18T14:57:12-07:00	Kenton Varda	temporal@gmail.com	Split into more levels; add Save and Delete to complement Restore.

dd9038ab
17	14	c++/src/capnp/rpc-confined.capnp
210	83	c++/src/capnp/rpc.capnp

--4707ede6	2013-09-17T15:52:31-07:00	Kenton Varda	temporal@gmail.com	More RPC doc tweaks.

4707ede6
22	1	c++/src/capnp/rpc.capnp

--a49d46ca	2013-09-17T00:45:21-07:00	Kenton Varda	temporal@gmail.com	More RPC doc tweaks.

a49d46ca
4	0	c++/src/capnp/rpc.capnp

--e5f2ef8e	2013-09-16T22:15:12-07:00	Kenton Varda	temporal@gmail.com	More RPC doc tweaks.

e5f2ef8e
2	2	c++/src/capnp/rpc-confined.capnp
108	92	c++/src/capnp/rpc.capnp

--0b4a459c	2013-09-16T20:49:09-07:00	Kenton Varda	temporal@gmail.com	RPC doc tweaks.

0b4a459c
26	31	c++/src/capnp/rpc.capnp

--56ad928a	2013-09-16T18:13:26-07:00	Kenton Varda	temporal@gmail.com	oops

56ad928a
1	1	c++/src/capnp/rpc.capnp

--f10950d6	2013-09-16T14:56:51-07:00	Kenton Varda	temporal@gmail.com	Initial RPC protocol definition.

f10950d6
105	0	c++/src/capnp/rpc-confined.capnp
803	0	c++/src/capnp/rpc.capnp

--b6cbcb65	2013-09-16T14:56:31-07:00	Kenton Varda	temporal@gmail.com	Improve then() comments.

b6cbcb65
39	15	c++/src/kj/async.h

--1d2a669f	2013-09-12T20:45:25-07:00	Kenton Varda	temporal@gmail.com	Fix location of empty union error.

1d2a669f
5	4	c++/src/capnp/compiler/node-translator.c++

--9fa3eadc	2013-09-12T18:36:55-07:00	Kenton Varda	temporal@gmail.com	Improve and simplify event ordering.  When explicitly calling an EventLoop, events are now always added to the end of the queue, ensuring deterministic run order and making yield() obsolete.  OTOH, then() may queue events to run immediately, preempting other events.

9fa3eadc
12	6	c++/src/kj/async-test.c++
39	70	c++/src/kj/async.c++
53	30	c++/src/kj/async.h

--7325ed03	2013-09-12T17:11:27-07:00	Kenton Varda	temporal@gmail.com	I{REQUIRE,ASSERT} -> {REQUIRE,ASSERT} since these aren't inline anymore.

7325ed03
7	7	c++/src/kj/async.c++

--31976bad	2013-09-12T15:11:00-07:00	Kenton Varda	temporal@gmail.com	I guess this is supposed to be single-dash but it works either way?

31976bad
3	3	c++/Makefile.am
1	1	mega-test-quick.cfg

--421c6038	2013-09-12T14:00:16-07:00	Kenton Varda	temporal@gmail.com	__linux__ -> KJ_USE_FUTEX

421c6038
2	2	c++/src/kj/async.c++
1	1	c++/src/kj/async.h

--3fa44ffe	2013-09-12T07:38:34-07:00	Kenton Varda	temporal@gmail.com	Events queued together should occur in logical order.

3fa44ffe
11	8	c++/src/kj/async-test.c++
9	2	c++/src/kj/async.c++
6	0	c++/src/kj/async.h

--7d1bae3c	2013-09-12T06:57:54-07:00	Kenton Varda	temporal@gmail.com	Update test config.

7d1bae3c
5	5	mega-test-quick.cfg

--84ec9c8c	2013-09-12T06:53:27-07:00	Kenton Varda	temporal@gmail.com	Revert -Wl,--no-undefined change since it doesn't work on Mac (among other platforms).

84ec9c8c
3	3	c++/Makefile.am

--b62d90d8	2013-09-12T06:21:39-07:00	Kenton Varda	temporal@gmail.com	Port SimpleEventLoop to pthreads for non-Linux platforms.

b62d90d8
55	1	c++/src/kj/async.c++
7	2	c++/src/kj/async.h

--853c9af0	2013-09-12T05:57:15-07:00	Kenton Varda	temporal@gmail.com	Update Makefile.am.

853c9af0
3	0	c++/Makefile.am
0	1	c++/src/kj/async.c++
1	1	c++/src/kj/async.h

--f8e2aa18	2013-09-12T05:50:55-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

f8e2aa18
--c0750662	2013-09-12T05:50:10-07:00	Kenton Varda	temporal@gmail.com	Reduce generated code for Promises by making most of the node implementations mostly non-templated.

c0750662
216	5	c++/src/kj/async.c++
293	322	c++/src/kj/async.h
3	3	c++/src/kj/debug.h
5	0	c++/src/kj/memory.h

--6ff9769f	2013-09-12T01:34:33-07:00	Kenton Varda	temporal@gmail.com	Initial implementation of promises.

6ff9769f
296	0	c++/src/kj/async-test.c++
214	0	c++/src/kj/async.c++
1073	0	c++/src/kj/async.h
11	0	c++/src/kj/common.c++
25	7	c++/src/kj/common.h
2	2	c++/src/kj/debug.c++
10	1	c++/src/kj/exception.c++
11	3	c++/src/kj/exception.h
7	1	c++/src/kj/mutex.h

--cbd65e2d	2013-09-11T17:43:40-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #33 from dmitri-shubin/master

Solaris compatibility
cbd65e2d
--ba625d18	2013-09-11T12:52:31+02:00	Dmitri Shubin	sbn@tbricks.com	sched_yield() is in librt on Solaris

ba625d18
2	0	c++/configure.ac

--54863241	2013-09-11T11:14:53+02:00	Dmitri Shubin	sbn@tbricks.com	Solaris doesn't have backtrace()

54863241
4	3	c++/src/kj/exception.c++

--02172546	2013-09-07T12:01:33+04:00	Dmitri Shubin	sbn@tbricks.com	make capnp-test.sh compatible with Solaris sh(1), test(1) and cmp(1)

02172546
15	15	c++/src/capnp/compiler/capnp-test.sh

--9bf6b1ac	2013-09-07T11:52:17+04:00	Dmitri Shubin	sbn@tbricks.com	fix output of Int8 values for Solaris

9bf6b1ac
9	2	c++/src/capnp/compiler/capnpc-c++.c++

--4216cbed	2013-09-10T17:10:27-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #34 from dschatzberg/patch-1

Fix md5.c++ to work on non x86 systems
4216cbed
--e0c0ee8d	2013-09-10T09:50:28-04:00	Dan Schatzberg	schatzberg.dan@gmail.com	Fix md5.c++ to work on non x86 systems

ctx is not a pointer but was being used with the arrow operator on non-x86 systems
e0c0ee8d
2	2	c++/src/capnp/compiler/md5.c++

--798ff87b	2013-09-04T15:30:07-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #31 from amluto/master

Fix LDFLAGS and work around a Fedora bug that broke pthread linking
798ff87b
--c4e6bac6	2013-09-04T13:42:58-07:00	Andy Lutomirski	luto@amacapital.net	Fix LDFLAGS and work around a Fedora bug that broke pthread linking

The Fedora bug caused the DT_NEEDED for libpthread to be omitted, and
the missing -Wl before no-undefined prevented binutils from detecting it.

-export-dynamic is unnecessary for libraries, so this removes it, too.

c4e6bac6
9	6	c++/Makefile.am

--7739b539	2013-09-03T20:26:38-07:00	Kenton Varda	temporal@gmail.com	Last-minute doc tweaks.

7739b539
12	8	doc/_posts/2013-09-04-capnproto-0.3-python-tools-features.md
3	2	doc/javascripts/main.js

--ddeee2bb	2013-09-03T17:35:55-07:00	Kenton Varda	temporal@gmail.com	Improve test scripts, and add a new mega-test script which runs super-test on all platforms in parallel with progress bars.

ddeee2bb
5	0	mega-test-quick.cfg
5	0	mega-test.cfg
144	0	mega-test.py
37	3	super-test.sh

--0613b083	2013-09-02T15:33:13-07:00	Kenton Varda	temporal@gmail.com	Fix release.sh's retry command.

0613b083
8	1	release.sh

--268ecfe9	2013-09-02T14:20:57-07:00	Kenton Varda	temporal@gmail.com	Fix VPATH build.

268ecfe9
1	1	c++/src/capnp/test-import2.capnp

--5d584b07	2013-09-02T14:10:17-07:00	Kenton Varda	temporal@gmail.com	Test script should pull from current branch, not master.

5d584b07
2	1	super-test.sh

--9817727c	2013-09-02T13:40:26-07:00	Kenton Varda	temporal@gmail.com	Apparently the bootstraps were out of date.

9817727c
2	6	c++/src/capnp/c++.capnp.c++
3	9	c++/src/capnp/compiler/grammar.capnp.c++
5	14	c++/src/capnp/schema.capnp.c++

--4df4fbda	2013-09-02T13:39:14-07:00	Kenton Varda	temporal@gmail.com	Fix bug where only the first import made it into the import table.  Can't believe this wasn't tested.  Sigh.

4df4fbda
5	2	c++/Makefile.am
1	1	c++/src/capnp/compiler/compiler.c++
13	0	c++/src/capnp/encoding-test.c++
34	0	c++/src/capnp/test-import2.capnp

--837df8f7	2013-09-02T13:16:13-07:00	Kenton Varda	temporal@gmail.com	Don't mmap empty files.

837df8f7
5	0	c++/src/capnp/compiler/module-loader.c++
5	0	c++/src/capnp/schema-parser.c++

--9c3628b4	2013-09-02T00:45:36-07:00	Kenton Varda	temporal@gmail.com	Argh, Clang doesn't implement -fno-permissive, skip it.

9c3628b4
4	0	super-test.sh

--a227f743	2013-09-02T00:40:10-07:00	Kenton Varda	temporal@gmail.com	Make sure generated code compiles cleanly even with pedantic warnings, since some people enable those.

a227f743
13	6	c++/src/capnp/compiler/capnpc-c++.c++
2	2	c++/src/capnp/dynamic.h
4	4	c++/src/capnp/generated-header-support.h
6	1	super-test.sh

--60e1a79d	2013-09-01T19:59:50-07:00	Kenton Varda	temporal@gmail.com	typos

60e1a79d
3	3	doc/language.md
1	1	doc/roadmap.md

--48df7686	2013-09-01T16:57:31-07:00	Kenton Varda	temporal@gmail.com	Fix roadmap title.

48df7686
1	1	doc/_includes/header.html
2	2	doc/roadmap.md

--7939a316	2013-09-01T16:49:00-07:00	Kenton Varda	temporal@gmail.com	Add roadmap to docs.

7939a316
1	0	doc/_includes/header.html
106	0	doc/roadmap.md

--bc0dd4a9	2013-09-01T11:11:43-07:00	Kenton Varda	temporal@gmail.com	Update Python links for name change.

bc0dd4a9
2	2	doc/_posts/2013-09-04-capnproto-0.3-python-tools-features.md
1	1	doc/otherlang.md

--06003da0	2013-08-31T19:40:59-07:00	Kenton Varda	temporal@gmail.com	Update release script to automatically tag the release.

06003da0
3	1	release.sh

--c5de5bcf	2013-08-31T19:20:18-07:00	Kenton Varda	temporal@gmail.com	Remove localhost links from docs.  Duh.

c5de5bcf
5	5	doc/_posts/2013-09-04-capnproto-0.3-python-tools-features.md
7	7	doc/capnp-tool.md
1	1	doc/language.md
2	2	doc/otherlang.md

--6c1da9b7	2013-08-31T18:56:00-07:00	Kenton Varda	temporal@gmail.com	Fix compilation problem reported with gcc 4.7.2.  Yes, it works in 4.7.3 but not 4.7.2.  Sigh.

6c1da9b7
1	1	c++/src/capnp/compiler/capnp.c++

--578f7544	2013-08-31T17:14:39-07:00	Kenton Varda	temporal@gmail.com	Don't delete default dynamic builder constructors, because this makes things difficult for the Python wrappers.

578f7544
3	2	c++/src/capnp/dynamic-test.c++
3	3	c++/src/capnp/dynamic.h

--24d5567c	2013-08-31T16:17:31-07:00	Kenton Varda	temporal@gmail.com	Fix bug where DynamicValue::Builder was not assignable.

24d5567c
18	0	c++/src/capnp/dynamic-test.c++
2	0	c++/src/capnp/dynamic.h

--a86b5f24	2013-08-31T12:24:18-07:00	Kenton Varda	temporal@gmail.com	Automatically run ldconfig after install if possible.

a86b5f24
5	0	c++/Makefile.am
0	3	doc/install.md

--2452ed95	2013-08-30T23:43:21-07:00	Kenton Varda	temporal@gmail.com	Fix linking problems that only come up when using Ubuntu's libtool to build a dist and then installing it on OSX.  libkj.la was not listed in libcapnpc's deps.  Also put the pthread libs last since that's more correct.

2452ed95
5	5	c++/Makefile.am

--7781d0c4	2013-08-30T21:50:22-07:00	Kenton Varda	temporal@gmail.com	Extend release script to automatically upload and automatically update docs.

7781d0c4
23	15	RELEASE-PROCESS.md
36	5	release.sh

--5f50acd4	2013-08-30T19:59:59-07:00	Kenton Varda	temporal@gmail.com	Set mainlaine version to 0.4-dev.

5f50acd4
1	1	c++/configure.ac
1	1	c++/src/capnp/c++.capnp.h
1	1	c++/src/capnp/common.h
1	1	c++/src/capnp/compiler/grammar.capnp.h
1	1	c++/src/capnp/compiler/lexer.capnp.h
1	1	c++/src/capnp/schema.capnp.h

--1201f8f5	2013-08-30T19:55:11-07:00	Kenton Varda	temporal@gmail.com	Fix release script to update version check in bootstrap files.

1201f8f5
7	0	release.sh

--fd1bffc0	2013-08-30T19:25:29-07:00	Kenton Varda	temporal@gmail.com	Remove stray KJ_DBG.

fd1bffc0
0	1	c++/src/capnp/compiler/capnp.c++

--a5bb798d	2013-08-30T18:22:09-07:00	Kenton Varda	temporal@gmail.com	Actually fix the bug, which was a doozy:  OrphanBuilder::tag was sometimes initialized using WirePointer::setKindAndTarget(), but since the tag didn't live inside the target segment, this used illegal pointer arithmetic.  The target is never read from an orphan tag anyway, so I thought it would be no big deal.  But it turns out Clang actually optimizes under the assumption that pointer arithmetic returns a whole value.  As a result, on 32-bit system where 64-bit values are only 32-bit aligned, the tag and target might not have been a whole number of words apart, and the extra bit actually found its way into the 'kind' bits, causing e.g. a struct pointer to become an invalid far pointer.  Crash.  The fix required refactoring to ensure that setKindAndOffset() is never used for orphan tags.

a5bb798d
45	0	c++/src/capnp/encoding-test.c++
89	79	c++/src/capnp/layout.c++
27	4	c++/src/capnp/layout.h
93	2	c++/src/capnp/orphan-test.c++
6	0	c++/src/capnp/orphan.h
5	0	c++/src/capnp/test.capnp

--eeaaaabc	2013-08-30T14:26:13-07:00	Kenton Varda	temporal@gmail.com	Fix obscure bug where allocating an empty struct causes trouble.  For reasons I don't yet fully understand, this actually caused a crash on 32-bit OSX builds (but not 64-bit, nor 32-bit Linux).

eeaaaabc
1	1	c++/src/capnp/compiler/compiler.c++
14	0	c++/src/capnp/layout.c++
2	1	c++/src/capnp/layout.h

--7339ac72	2013-08-29T18:54:01-07:00	Kenton Varda	temporal@gmail.com	Fix bug when schema validation fails with -fno-exceptions.

7339ac72
7	5	c++/src/capnp/schema-loader.c++

--520e5c02	2013-08-29T18:15:57-07:00	Kenton Varda	temporal@gmail.com	Fix test.

520e5c02
1	1	c++/src/capnp/compiler/capnp-test.sh

--2810f3dc	2013-08-29T18:06:55-07:00	Kenton Varda	temporal@gmail.com	Fix dist.

2810f3dc
11	1	c++/Makefile.am

--89e1a2e1	2013-08-29T16:36:37-07:00	Kenton Varda	temporal@gmail.com	News post for 0.3 (getting it ready early).

89e1a2e1
92	0	doc/_posts/2013-09-04-capnproto-0.3-python-tools-features.md
1	1	doc/otherlang.md

--695d9e76	2013-08-29T14:44:27-07:00	Kenton Varda	temporal@gmail.com	More doc updates.

695d9e76
154	1	doc/cxx.md
15	65	doc/encoding.md
39	37	doc/install.md
1	1	doc/language.md
8	4	doc/otherlang.md

--ac4f403c	2013-08-29T09:00:23-07:00	Kenton Varda	temporal@gmail.com	Doc updates.

ac4f403c
42	6	doc/cxx.md
24	2	doc/encoding.md
5	4	doc/install.md
134	33	doc/language.md
11	4	doc/otherlang.md

--df371fc2	2013-08-29T05:47:00-07:00	Kenton Varda	temporal@gmail.com	Fix sidebar alignment for new logo.

df371fc2
-	-	doc/images/logo.png
1	1	doc/javascripts/main.js
1	1	doc/stylesheets/stylesheet.css

--37042077	2013-08-29T05:32:47-07:00	Kenton Varda	temporal@gmail.com	Document capnp tool and constants.

37042077
1	0	doc/_includes/header.html
81	0	doc/capnp-tool.md
6	2	doc/cxx.md
7	2	doc/javascripts/main.js
18	1	doc/language.md
4	0	doc/stylesheets/stylesheet.css

--afe41c0c	2013-08-29T03:06:01-07:00	Kenton Varda	temporal@gmail.com	cerealization

afe41c0c
1	1	doc/_includes/header.html
-	-	doc/images/captain_proto.png
-	-	doc/images/logo.png

--16cb6cf9	2013-08-28T17:52:30-07:00	Kenton Varda	temporal@gmail.com	Delete default construcrtor on builders, so that people don't incorrectly try to just declare a Builder on the stack and then start setting its fields.  Instead, a Builder can be explicitly assigned to nullptr, which makes it clearer that it isn't safe to use.

16cb6cf9
3	1	c++/src/capnp/compiler/capnpc-c++.c++
66	22	c++/src/capnp/compiler/grammar.capnp.h
12	4	c++/src/capnp/compiler/lexer.capnp.h
1	1	c++/src/capnp/compiler/node-translator.c++
1	3	c++/src/capnp/dynamic.c++
6	3	c++/src/capnp/dynamic.h
2	0	c++/src/capnp/encoding-test.c++
8	4	c++/src/capnp/list.h
72	24	c++/src/capnp/schema.capnp.h

--c339019b	2013-08-28T17:40:17-07:00	Kenton Varda	temporal@gmail.com	Allow implicit convertion between StringPtr/Text::Reader and std::string.

c339019b
12	0	c++/src/capnp/blob-test.c++
8	0	c++/src/capnp/blob.h
14	0	c++/src/kj/string-test.c++
20	0	c++/src/kj/string.h

--34897e78	2013-08-28T17:10:10-07:00	Kenton Varda	temporal@gmail.com	Expand help text re: --packed.

34897e78
13	5	c++/src/capnp/compiler/capnp.c++

--11de5e01	2013-08-28T15:53:00-07:00	Kenton Varda	temporal@gmail.com	Fix problem in evolution-test.

11de5e01
1	1	c++/src/capnp/compiler/evolution-test.c++

--75de6af7	2013-08-28T14:41:59-07:00	Kenton Varda	temporal@gmail.com	Update some todos

75de6af7
0	2	c++/src/capnp/layout.c++
0	2	c++/src/capnp/schema-loader-test.c++
1	37	c++/src/kj/exception.c++

--7f17b7bd	2013-08-28T14:34:09-07:00	Kenton Varda	temporal@gmail.com	Make sure reading far pointers is thread-safe.

7f17b7bd
4	6	c++/src/capnp/arena.c++
1	1	c++/src/capnp/arena.h
1	1	c++/src/capnp/message.h

--3c7505d6	2013-08-28T14:18:19-07:00	Kenton Varda	temporal@gmail.com	Add some missing type checks in dynamic.c++.

3c7505d6
38	19	c++/src/capnp/dynamic.c++

--3f2876bb	2013-08-28T13:49:45-07:00	Kenton Varda	temporal@gmail.com	Add test of compiler's error-checking.

3f2876bb
4	0	c++/src/capnp/compiler/capnp-test.ekam-rule
3	0	c++/src/capnp/compiler/capnp-test.sh
6	6	c++/src/capnp/compiler/compiler.c++
6	12	c++/src/capnp/compiler/node-translator.c++
0	3	c++/src/capnp/compiler/node-translator.h
30	26	c++/src/capnp/compiler/parser.c++
139	0	c++/src/capnp/testdata/errors.capnp.nobuild
50	0	c++/src/capnp/testdata/errors.txt

--b5e5634a	2013-08-28T11:31:03-07:00	Kenton Varda	temporal@gmail.com	Actually, hold off on the fixed lists for now, needs more thought.

b5e5634a
0	13	c++/src/capnp/schema.capnp
25	110	c++/src/capnp/schema.capnp.c++
0	207	c++/src/capnp/schema.capnp.h

--cfbe1abe	2013-08-28T08:10:58-07:00	Kenton Varda	temporal@gmail.com	Rename non-group again, now to 'slot', which is much nicer.  Also introduce fixed lists as a third kind of field (but not implemented yet).

cfbe1abe
11	11	c++/src/capnp/compiler/capnpc-c++.c++
9	9	c++/src/capnp/compiler/capnpc-capnp.c++
2	2	c++/src/capnp/compiler/compiler.c++
6	6	c++/src/capnp/compiler/evolution-test.c++
10	10	c++/src/capnp/compiler/node-translator.c++
71	73	c++/src/capnp/dynamic.c++
2	2	c++/src/capnp/encoding-test.c++
2	2	c++/src/capnp/schema-loader-test.c++
24	25	c++/src/capnp/schema-loader.c++
1	1	c++/src/capnp/schema-parser-test.c++
1	1	c++/src/capnp/schema-test.c++
1	1	c++/src/capnp/schema.c++
15	2	c++/src/capnp/schema.capnp
117	34	c++/src/capnp/schema.capnp.c++
267	60	c++/src/capnp/schema.capnp.h
2	2	c++/src/capnp/stringify.c++

--e5faa86e	2013-08-28T07:25:00-07:00	Kenton Varda	temporal@gmail.com	Replace KJ_ARRAY_SIZE macro with a template function.

e5faa86e
3	3	c++/src/capnp/compiler/evolution-test.c++
5	5	c++/src/capnp/compiler/node-translator.c++
1	1	c++/src/capnp/compiler/parser.c++
10	0	c++/src/kj/common-test.c++
17	3	c++/src/kj/common.h
1	1	c++/src/kj/exception.c++

--7f083a62	2013-08-28T07:12:06-07:00	Kenton Varda	temporal@gmail.com	Improve readability of schema clasess a bit by making some union members into singleton groups.

7f083a62
1	1	c++/src/capnp/compiler/capnp.c++
17	16	c++/src/capnp/compiler/capnpc-c++.c++
9	8	c++/src/capnp/compiler/capnpc-capnp.c++
4	4	c++/src/capnp/compiler/compiler.c++
8	7	c++/src/capnp/compiler/evolution-test.c++
24	21	c++/src/capnp/compiler/node-translator.c++
27	18	c++/src/capnp/dynamic.c++
6	4	c++/src/capnp/schema-loader-test.c++
19	15	c++/src/capnp/schema-loader.c++
1	1	c++/src/capnp/schema-parser-test.c++
2	2	c++/src/capnp/schema-test.c++
4	4	c++/src/capnp/schema.c++
18	6	c++/src/capnp/schema.capnp
240	49	c++/src/capnp/schema.capnp.c++
527	103	c++/src/capnp/schema.capnp.h

--2bea8005	2013-08-28T06:45:03-07:00	Kenton Varda	temporal@gmail.com	Add segmented message to capnp test.

2bea8005
3	0	c++/src/capnp/compiler/capnp-test.sh
-	-	c++/src/capnp/testdata/segmented
-	-	c++/src/capnp/testdata/segmented-packed

--752e0abc	2013-08-28T06:42:12-07:00	Kenton Varda	temporal@gmail.com	Fix bugs in format-detection heuristics.

752e0abc
19	4	c++/src/capnp/compiler/capnp.c++

--0d872f83	2013-08-28T05:58:09-07:00	Kenton Varda	temporal@gmail.com	Add test of capnp encode/decode/eval.

0d872f83
1	1	c++/Makefile.am
50	0	c++/src/capnp/compiler/capnp-test.ekam-rule
63	0	c++/src/capnp/compiler/capnp-test.sh
2	3	c++/src/capnp/compiler/evolution-test.c++
-	-	c++/src/capnp/testdata/binary
-	-	c++/src/capnp/testdata/flat
-	-	c++/src/capnp/testdata/packed
71	0	c++/src/capnp/testdata/pretty.txt
1	0	c++/src/capnp/testdata/short.txt

--d5965282	2013-08-28T04:46:48-07:00	Kenton Varda	temporal@gmail.com	Remove some unused code.

d5965282
0	21	c++/src/capnp/compiler/capnp.c++

--58b920ec	2013-08-28T04:01:06-07:00	Kenton Varda	temporal@gmail.com	Extend 'capnp const' to support evaluating field default values as well as inner members of a value.

58b920ec
129	12	c++/src/capnp/compiler/capnp.c++
5	0	c++/src/capnp/schema.c++
3	0	c++/src/capnp/schema.h

--9fbc28f8	2013-08-28T02:46:30-07:00	Kenton Varda	temporal@gmail.com	Make 'capnp decode' heuristically detect and warn when the wrong format flag (e.g. --packed, --flat) is used.

9fbc28f8
345	2	c++/src/capnp/compiler/capnp.c++
26	0	c++/src/kj/common.h

--87e04952	2013-08-27T22:49:29-07:00	Kenton Varda	temporal@gmail.com	Don't double-parenthesize struct-typed annotations.

87e04952
6	2	c++/src/capnp/compiler/capnpc-capnp.c++

--9a28ac31	2013-08-27T22:45:47-07:00	Kenton Varda	temporal@gmail.com	Fix bug in capnpc-capnp when printing annotations.

9a28ac31
1	1	c++/src/capnp/compiler/capnpc-capnp.c++

--9474ca44	2013-08-27T13:40:24-07:00	Kenton Varda	temporal@gmail.com	Fix problems.

9474ca44
3	0	c++/src/capnp/compiler/capnp.c++
19	15	c++/src/capnp/compiler/evolution-test.c++
1	1	c++/src/kj/exception.c++

--7693365a	2013-08-27T13:31:27-07:00	Kenton Varda	temporal@gmail.com	Add test verifying that backwards compatibility is maintained through various changes.

7693365a
5	2	c++/Makefile.am
881	0	c++/src/capnp/compiler/evolution-test.c++
23	2	c++/src/capnp/compiler/node-translator.c++
37	0	c++/src/capnp/encoding-test.c++
0	5	c++/src/capnp/layout.c++
20	0	c++/src/capnp/list.h
2	1	c++/src/capnp/message.h
91	6	c++/src/capnp/schema-loader.c++
20	0	c++/src/capnp/test.capnp
40	0	c++/src/kj/function-test.c++
91	0	c++/src/kj/function.h

--be6027ee	2013-08-27T00:01:54-07:00	Kenton Varda	temporal@gmail.com	capnp eval command for evaluating constants.

be6027ee
109	24	c++/src/capnp/compiler/capnp.c++

--c61b12ff	2013-08-26T11:40:59-07:00	Kenton Varda	temporal@gmail.com	Add missing include.

c61b12ff
1	0	c++/src/capnp/compiler/capnp.c++

--2088715c	2013-08-26T11:31:10-07:00	Kenton Varda	temporal@gmail.com	Add --segment-size option for testing purposes.

2088715c
30	8	c++/src/capnp/compiler/capnp.c++
5	0	c++/src/capnp/dynamic.h
4	0	c++/src/capnp/layout.c++
1	0	c++/src/capnp/layout.h
6	0	c++/src/capnp/message.c++
13	0	c++/src/capnp/message.h
1	0	c++/src/capnp/orphan.h

--81f5cc1b	2013-08-26T10:20:07-07:00	Kenton Varda	temporal@gmail.com	Fix warning.

81f5cc1b
4	3	c++/src/capnp/compiler/capnp.c++

--5c851221	2013-08-26T10:15:33-07:00	Kenton Varda	temporal@gmail.com	Implement 'capnp encode' command which does the opposite of 'capnp decode'.

5c851221
194	11	c++/src/capnp/compiler/capnp.c++
39	2	c++/src/capnp/compiler/error-reporter.c++
13	2	c++/src/capnp/compiler/error-reporter.h
6	44	c++/src/capnp/compiler/module-loader.c++
63	31	c++/src/capnp/compiler/node-translator.c++
32	18	c++/src/capnp/compiler/node-translator.h
13	0	c++/src/capnp/dynamic.c++
10	0	c++/src/capnp/dynamic.h
1	1	c++/src/capnp/schema-parser.c++

--98e6519e	2013-08-26T07:12:24-07:00	Kenton Varda	temporal@gmail.com	Refactor value expression compilation code using new Orphan<DynamicValue>.

98e6519e
266	217	c++/src/capnp/compiler/node-translator.c++
15	6	c++/src/capnp/compiler/node-translator.h
155	8	c++/src/capnp/dynamic.c++
43	11	c++/src/capnp/dynamic.h
28	5	c++/src/capnp/layout.c++
3	0	c++/src/capnp/layout.h
7	7	c++/src/capnp/orphan-test.c++
5	0	c++/src/kj/exception.c++

--c1f3e3ff	2013-08-26T02:52:11-07:00	Kenton Varda	temporal@gmail.com	Flesh out dynamic API for orphans.

c1f3e3ff
306	0	c++/src/capnp/dynamic.c++
200	23	c++/src/capnp/dynamic.h
11	1	c++/src/capnp/layout.c++
4	4	c++/src/capnp/layout.h
168	0	c++/src/capnp/orphan-test.c++
4	2	c++/src/capnp/orphan.h

--55e48fc4	2013-08-25T08:02:47-07:00	Kenton Varda	temporal@gmail.com	Finish implementing and testing constants.

55e48fc4
154	5	c++/src/capnp/compiler/capnpc-c++.c++
122	0	c++/src/capnp/encoding-test.c++
77	0	c++/src/capnp/generated-header-support.h
5	0	c++/src/capnp/layout.c++
7	0	c++/src/capnp/layout.h
6	6	c++/src/capnp/list.h
90	0	c++/src/capnp/test.capnp

--ac1e532d	2013-08-25T05:46:15-07:00	Kenton Varda	temporal@gmail.com	Extend schema API to cover constants, test parsing of constants.

ac1e532d
1	1	c++/src/capnp/compiler/node-translator.c++
7	2	c++/src/capnp/dynamic-test.c++
98	52	c++/src/capnp/dynamic.c++
76	21	c++/src/capnp/dynamic.h
12	0	c++/src/capnp/layout.c++
8	0	c++/src/capnp/layout.h
43	9	c++/src/capnp/schema-parser-test.c++
40	25	c++/src/capnp/schema.c++
35	1	c++/src/capnp/schema.h
2	1	c++/src/capnp/stringify.c++

--bc7b57a7	2013-08-23T16:50:19-07:00	Kenton Varda	temporal@gmail.com	Fix 32-bit bug.

bc7b57a7
1	1	c++/src/capnp/layout.c++

--4cfeb8eb	2013-08-23T12:22:49-07:00	Kenton Varda	temporal@gmail.com	Better work-around for weird GCC 4.8 warning breaking tests.

4cfeb8eb
0	8	c++/src/kj/parse/char-test.c++
10	0	super-test.sh

--7638ec97	2013-08-23T01:40:34-07:00	Kenton Varda	temporal@gmail.com	Arrggghhhh.

7638ec97
3	2	super-test.sh

--dd87eeef	2013-08-23T01:25:51-07:00	Kenton Varda	temporal@gmail.com	Typo.

dd87eeef
1	1	super-test.sh

--941ac1cd	2013-08-23T00:59:20-07:00	Kenton Varda	temporal@gmail.com	Fix more warnings.

941ac1cd
2	2	c++/src/kj/array.h
1	1	c++/src/kj/debug-test.c++

--46145207	2013-08-23T00:42:32-07:00	Kenton Varda	temporal@gmail.com	Silence bogus warning from GCC 4.8 so that the tests can complete.

46145207
8	0	c++/src/kj/parse/char-test.c++

--f0d551f7	2013-08-23T00:01:01-07:00	Kenton Varda	temporal@gmail.com	Fix 32-bit bug.

f0d551f7
1	1	c++/src/capnp/layout.c++

--b81be25d	2013-08-22T23:48:14-07:00	Kenton Varda	temporal@gmail.com	I give up.  Disable -Wsign-compare.

b81be25d
4	2	super-test.sh

--da17193a	2013-08-22T23:15:58-07:00	Kenton Varda	temporal@gmail.com	Make sure compiler can accept source files over pipes by falling back to reading into a buffer.

da17193a
17	0	c++/src/capnp/compiler/module-loader.c++
17	0	c++/src/capnp/schema-parser.c++

--21a508bb	2013-08-22T23:01:23-07:00	Kenton Varda	temporal@gmail.com	Add valgrind pass to test script.  Fix valgrind errors.

21a508bb
14	8	c++/src/kj/array.c++
34	0	c++/src/kj/exception-test.c++
10	0	c++/src/kj/exception.h
2	2	c++/src/kj/io.c++
12	0	super-test.sh

--f66ca5e8	2013-08-22T22:09:19-07:00	Kenton Varda	temporal@gmail.com	Tweak includes.

f66ca5e8
1	0	c++/src/capnp/message.c++
1	2	c++/src/capnp/message.h

--84235207	2013-08-22T22:02:38-07:00	Kenton Varda	temporal@gmail.com	Handle TODO(soon)s.

84235207
1	1	c++/src/capnp/layout.h
0	6	c++/src/capnp/message.h
0	39	c++/src/kj/parse/common-test.c++
0	40	c++/src/kj/parse/common.h

--a499aceb	2013-08-22T21:37:18-07:00	Kenton Varda	temporal@gmail.com	Enforce naming style.

a499aceb
37	0	c++/src/capnp/compiler/node-translator.c++

--ba43193f	2013-08-22T21:12:42-07:00	Kenton Varda	temporal@gmail.com	Add -f flag to ln so that installing over an existing install doesn't fail.

ba43193f
2	2	c++/Makefile.am

--daa62fd1	2013-08-22T21:00:17-07:00	Kenton Varda	temporal@gmail.com	Update sample code for new union syntax.

daa62fd1
6	20	c++/samples/addressbook.c++
5	5	c++/samples/addressbook.capnp
11	25	doc/cxx.md

--066ce2e5	2013-08-22T19:50:54-07:00	Kenton Varda	temporal@gmail.com	Don't allow releases when TODO(now) or TODO(soon) or KJ_DBG are found in the code.

066ce2e5
10	0	release.sh

--1cb71b92	2013-08-22T19:28:36-07:00	Kenton Varda	temporal@gmail.com	Enable more warnings and -Werror in test script, fix problems.

1cb71b92
8	7	c++/src/capnp/common.h
1	1	c++/src/capnp/compiler/capnpc-c++.c++
2	2	c++/src/capnp/schema-loader.c++
2	2	c++/src/kj/string-tree-test.c++
10	2	super-test.sh

--59e840bd	2013-08-22T19:07:22-07:00	Kenton Varda	temporal@gmail.com	Warn when an optimized build doesn't set NDEBUG and then #define it ourselves -- unless the build explicitly sets DEBUG.

59e840bd
3	3	c++/src/capnp/encoding-test.c++
2	2	c++/src/kj/common-test.c++
19	7	c++/src/kj/common.h
7	7	c++/src/kj/debug.h
2	2	c++/src/kj/exception.c++
26	0	c++/src/kj/main.c++
3	3	c++/src/kj/mutex-test.c++
3	3	c++/src/kj/mutex.h
8	4	super-test.sh

--f651e5cf	2013-08-22T18:13:30-07:00	Kenton Varda	temporal@gmail.com	Reverse order of KJ_MAP to be consistent with e.g. KJ_IF_MAYBE.

f651e5cf
38	38	c++/src/capnp/compiler/capnpc-c++.c++
9	9	c++/src/capnp/compiler/capnpc-capnp.c++
1	1	c++/src/capnp/compiler/compiler.c++
1	1	c++/src/capnp/compiler/node-translator.c++
1	1	c++/src/capnp/stringify.c++
1	1	c++/src/kj/array-test.c++
3	3	c++/src/kj/array.h

--e65d5d0f	2013-08-22T18:00:44-07:00	Kenton Varda	temporal@gmail.com	Fix version test.

e65d5d0f
4	1	c++/src/capnp/common-test.c++

--d68eaf1b	2013-08-22T17:32:30-07:00	Kenton Varda	temporal@gmail.com	More Void fixes.

d68eaf1b
1	1	c++/samples/addressbook.c++
2	2	doc/cxx.md

--ad190f6c	2013-08-22T17:29:41-07:00	Kenton Varda	temporal@gmail.com	Void is now an empty struct instead of an enum, and capnp::Void::VOID is now just capnp::VOID.

ad190f6c
5	0	c++/src/capnp/c++.capnp.h
10	4	c++/src/capnp/common.h
1	1	c++/src/capnp/compiler/capnpc-c++.c++
34	29	c++/src/capnp/compiler/grammar.capnp.h
6	1	c++/src/capnp/compiler/lexer.capnp.h
1	1	c++/src/capnp/compiler/node-translator.c++
1	1	c++/src/capnp/compiler/parser.c++
1	1	c++/src/capnp/dynamic.c++
18	18	c++/src/capnp/encoding-test.c++
4	4	c++/src/capnp/layout.h
24	19	c++/src/capnp/schema.capnp.h
24	24	c++/src/capnp/test-util.c++

--f04f6e77	2013-08-22T17:18:45-07:00	Kenton Varda	temporal@gmail.com	Enforce that library header versions match capnp compiler version.

f04f6e77
1	0	c++/Makefile.am
48	0	c++/src/capnp/common-test.c++
7	0	c++/src/capnp/common.h
7	1	c++/src/capnp/compiler/capnpc-c++.c++
9	0	release.sh

--83f9754e	2013-08-22T15:48:45-07:00	Kenton Varda	temporal@gmail.com	Require a colon before 'group' or 'union' except for unnamed unions as well as the legacy case of a named union with an ordinal (where the colon is optional).

83f9754e
6	6	c++/src/capnp/benchmark/eval.capnp
3	3	c++/src/capnp/compiler/grammar.capnp
3	3	c++/src/capnp/compiler/grammar.capnp.c++
6	6	c++/src/capnp/compiler/lexer-test.c++
2	2	c++/src/capnp/compiler/lexer.c++
6	6	c++/src/capnp/compiler/lexer.capnp
54	94	c++/src/capnp/compiler/lexer.capnp.c++
108	197	c++/src/capnp/compiler/lexer.capnp.h
46	24	c++/src/capnp/compiler/parser.c++
8	0	c++/src/capnp/stringify-test.c++
2	0	c++/src/capnp/stringify.c++
7	7	c++/src/capnp/test.capnp

--89ee9afe	2013-08-22T03:43:53-07:00	Kenton Varda	temporal@gmail.com	Remove some function prototypes that apparently aren't needed and apparently tickle a bug in Clang trunk.

89ee9afe
0	10	c++/src/kj/tuple.h

--5c5cd461	2013-08-22T00:25:30-07:00	Kenton Varda	temporal@gmail.com	Fix GCC problems.

5c5cd461
1	0	c++/src/capnp/compiler/capnp.c++
3	0	c++/src/capnp/compiler/capnpc-c++.c++
4	1	c++/src/capnp/compiler/capnpc-capnp.c++
9	9	c++/src/capnp/encoding-test.c++
1	1	c++/src/capnp/schema-parser-test.c++
49	24	super-test.sh

--0c93fd60	2013-08-21T23:07:01-07:00	Kenton Varda	temporal@gmail.com	hasFoo() should return false if foo is in a union and not active.  (Previously, it threw.)

New method isFoo() exists for union fields only and returns true if foo is the active union field.

0c93fd60
73	9	c++/src/capnp/compiler/capnpc-c++.c++
5	5	c++/src/capnp/compiler/capnpc-capnp.c++
3	3	c++/src/capnp/compiler/compiler.c++
654	188	c++/src/capnp/compiler/grammar.capnp.h
100	36	c++/src/capnp/compiler/lexer.capnp.h
11	11	c++/src/capnp/compiler/node-translator.c++
1	1	c++/src/capnp/compiler/parser.c++
2	8	c++/src/capnp/dynamic.c++
3	3	c++/src/capnp/dynamic.h
38	0	c++/src/capnp/encoding-test.c++
3	4	c++/src/capnp/schema-loader-test.c++
10	10	c++/src/capnp/schema-loader.c++
3	6	c++/src/capnp/schema.c++
580	168	c++/src/capnp/schema.capnp.h
24	3	c++/src/capnp/stringify-test.c++
16	12	c++/src/capnp/stringify.c++

--77d91c78	2013-08-21T22:39:14-07:00	Kenton Varda	temporal@gmail.com	Zero out group on init.  Important when the group is in a union.

77d91c78
220	2	c++/src/capnp/compiler/capnpc-c++.c++
34	0	c++/src/capnp/compiler/grammar.capnp.h
2	0	c++/src/capnp/compiler/lexer.capnp.h
66	0	c++/src/capnp/encoding-test.c++
5	0	c++/src/capnp/layout.c++
3	0	c++/src/capnp/layout.h
29	0	c++/src/capnp/schema.capnp.h
42	4	c++/src/capnp/test.capnp

--cfc10236	2013-08-21T20:45:54-07:00	Kenton Varda	temporal@gmail.com	regular -> nonGroup

cfc10236
8	8	c++/src/capnp/compiler/capnpc-c++.c++
9	9	c++/src/capnp/compiler/capnpc-capnp.c++
2	2	c++/src/capnp/compiler/compiler.c++
10	10	c++/src/capnp/compiler/node-translator.c++
63	63	c++/src/capnp/dynamic.c++
2	2	c++/src/capnp/encoding-test.c++
2	2	c++/src/capnp/schema-loader-test.c++
14	14	c++/src/capnp/schema-loader.c++
1	1	c++/src/capnp/schema-parser-test.c++
1	1	c++/src/capnp/schema-test.c++
1	1	c++/src/capnp/schema.c++
2	2	c++/src/capnp/schema.capnp
14	13	c++/src/capnp/schema.capnp.c++
48	48	c++/src/capnp/schema.capnp.h
2	2	c++/src/capnp/stringify.c++

--12243735	2013-08-21T19:27:42-07:00	Kenton Varda	temporal@gmail.com	Rename section sizes to be slightly more intuitive.

12243735
2	2	c++/src/capnp/compiler/capnpc-c++.c++
2	2	c++/src/capnp/compiler/capnpc-capnp.c++
4	4	c++/src/capnp/compiler/node-translator.c++
2	2	c++/src/capnp/dynamic.c++
31	31	c++/src/capnp/schema-loader.c++
6	3	c++/src/capnp/schema.capnp
22	24	c++/src/capnp/schema.capnp.c++
20	20	c++/src/capnp/schema.capnp.h

--9da143f8	2013-08-21T19:10:20-07:00	Kenton Varda	temporal@gmail.com	Have Node's enum and interface fields be groups with a single field, for future expandability.

9da143f8
1	1	c++/src/capnp/compiler/capnpc-c++.c++
1	1	c++/src/capnp/compiler/capnpc-capnp.c++
2	2	c++/src/capnp/compiler/compiler.c++
1	1	c++/src/capnp/compiler/node-translator.c++
15	10	c++/src/capnp/schema-loader.c++
1	1	c++/src/capnp/schema-test.c++
2	2	c++/src/capnp/schema.c++
6	2	c++/src/capnp/schema.capnp
112	34	c++/src/capnp/schema.capnp.c++
228	94	c++/src/capnp/schema.capnp.h

--561f5ed2	2013-08-21T16:42:47-07:00	Kenton Varda	temporal@gmail.com	Rename schema2 -> schema.

561f5ed2
1	1	c++/regenerate-bootstraps.sh
2	2	c++/src/capnp/compiler/capnp.c++
78	78	c++/src/capnp/compiler/capnpc-c++.c++
107	107	c++/src/capnp/compiler/capnpc-capnp.c++
26	26	c++/src/capnp/compiler/compiler.c++
2	2	c++/src/capnp/compiler/compiler.h
117	117	c++/src/capnp/compiler/node-translator.c++
23	23	c++/src/capnp/compiler/node-translator.h
138	138	c++/src/capnp/dynamic.c++
6	6	c++/src/capnp/schema-loader-test.c++
206	206	c++/src/capnp/schema-loader.c++
2	2	c++/src/capnp/schema-loader.h
23	23	c++/src/capnp/schema-test.c++
53	53	c++/src/capnp/schema.c++
215	184	c++/src/capnp/schema.capnp
1369	1660	c++/src/capnp/schema.capnp.c++
3398	4059	c++/src/capnp/schema.capnp.h
47	47	c++/src/capnp/schema.h
0	360	c++/src/capnp/schema2.capnp
0	2199	c++/src/capnp/schema2.capnp.c++
0	5296	c++/src/capnp/schema2.capnp.h
9	9	c++/src/capnp/stringify.c++

--fd1f0a4d	2013-08-21T16:34:52-07:00	Kenton Varda	temporal@gmail.com	Fix capnpc-capnp.

fd1f0a4d
1	0	c++/src/capnp/compiler/capnp.ekam-manifest
243	220	c++/src/capnp/compiler/capnpc-capnp.c++

--fe18f08f	2013-08-21T15:28:20-07:00	Kenton Varda	temporal@gmail.com	Remove remaining schema transitional hacks.

fe18f08f
7	25	c++/src/capnp/compiler/compiler.c++
5	13	c++/src/capnp/compiler/node-translator.c++
6	9	c++/src/capnp/compiler/parser.c++
5	4	c++/src/capnp/schema2.capnp
58	43	c++/src/capnp/schema2.capnp.c++
48	20	c++/src/capnp/schema2.capnp.h

--d5eba005	2013-08-21T15:07:55-07:00	Kenton Varda	temporal@gmail.com	Refactor lexer.capnp to use unnamed unions.

d5eba005
67	67	c++/src/capnp/compiler/lexer-test.c++
5	5	c++/src/capnp/compiler/lexer.c++
10	10	c++/src/capnp/compiler/lexer.capnp
65	103	c++/src/capnp/compiler/lexer.capnp.c++
189	266	c++/src/capnp/compiler/lexer.capnp.h
4	5	c++/src/capnp/compiler/parser.c++

--7b8bbc87	2013-08-21T15:00:31-07:00	Kenton Varda	temporal@gmail.com	Refactor grammar.capnp to use unnamed unions.

7b8bbc87
48	48	c++/src/capnp/compiler/compiler.c++
96	117	c++/src/capnp/compiler/grammar.capnp
1002	1397	c++/src/capnp/compiler/grammar.capnp.c++
2462	3468	c++/src/capnp/compiler/grammar.capnp.h
98	131	c++/src/capnp/compiler/node-translator.c++
4	4	c++/src/capnp/compiler/node-translator.h
45	72	c++/src/capnp/compiler/parser.c++
1	1	c++/src/capnp/compiler/parser.h

--4288dd27	2013-08-20T21:34:03-07:00	Kenton Varda	temporal@gmail.com	Over the hump, new schema is working and passing most tests.  Still lots of cleanup to do.

4288dd27
13	12	c++/src/capnp/c++.capnp.c++
0	1	c++/src/capnp/compiler/capnp.ekam-manifest
18	4	c++/src/capnp/compiler/capnpc-c++.c++
1733	1583	c++/src/capnp/compiler/grammar.capnp.c++
3195	3143	c++/src/capnp/compiler/grammar.capnp.h
261	219	c++/src/capnp/compiler/lexer.capnp.c++
220	208	c++/src/capnp/compiler/lexer.capnp.h
36	33	c++/src/capnp/compiler/node-translator.c++
28	46	c++/src/capnp/dynamic-test.c++
2	2	c++/src/capnp/dynamic.c++
4	10	c++/src/capnp/encoding-test.c++
1	17	c++/src/capnp/generated-header-support.h
30	32	c++/src/capnp/schema-loader-test.c++
2	3	c++/src/capnp/schema-loader.c++
16	16	c++/src/capnp/schema-parser-test.c++
79	116	c++/src/capnp/schema-test.c++
1091	1073	c++/src/capnp/schema.capnp.c++
563	539	c++/src/capnp/schema.capnp.h
15	2	c++/src/capnp/schema.h
1031	988	c++/src/capnp/schema2.capnp.c++
398	342	c++/src/capnp/schema2.capnp.h
22	20	c++/src/capnp/stringify-test.c++
19	6	c++/src/capnp/stringify.c++
6	6	c++/src/capnp/test.capnp

--0c7c610c	2013-08-20T18:25:54-07:00	Kenton Varda	temporal@gmail.com	More WIP.

0c7c610c
245	501	c++/src/capnp/compiler/capnpc-c++.c++
29	13	c++/src/capnp/compiler/node-translator.c++
2	1	c++/src/capnp/generated-header-support.h
39	13	c++/src/capnp/schema-loader.c++
0	2	c++/src/capnp/schema.h
3	2	c++/src/capnp/schema2.capnp
31	49	c++/src/capnp/stringify.c++

--1dcb66b1	2013-08-20T15:17:33-07:00	Kenton Varda	temporal@gmail.com	Continuing schema rewrite WIP.

1dcb66b1
21	0	c++/src/capnp/compiler/compiler.c++
7	2	c++/src/capnp/compiler/node-translator.c++
28	0	c++/src/capnp/compiler/parser.c++
4	1	c++/src/capnp/compiler/parser.h
15	1	c++/src/capnp/dynamic.c++
1	0	c++/src/capnp/generated-header-support.h
2	2	c++/src/capnp/message.h
475	451	c++/src/capnp/schema-loader.c++
10	0	c++/src/capnp/schema-loader.h

--863afbe2	2013-08-19T17:44:54-07:00	Kenton Varda	temporal@gmail.com	Merge branch

863afbe2
--a2b0c058	2013-08-19T17:44:00-07:00	Kenton Varda	temporal@gmail.com	Update docs for 0.2.1 release.

a2b0c058
10	0	doc/_posts/2013-08-19-capnproto-0.2.1.md
3	3	doc/install.md

--c7e3722b	2013-08-19T10:08:45-07:00	Kenton Varda	temporal@gmail.com	Work around GCC bug: http://gcc.gnu.org/bugzilla/show_bug.cgi?id=58192

c7e3722b
19	10	c++/src/capnp/layout.c++

--70a7bcb7	2013-08-18T18:40:22-07:00	Kenton Varda	temporal@gmail.com	Schema rewrite WIP.

70a7bcb7
1	0	c++/src/capnp/capnpc.ekam-rule
22	11	c++/src/capnp/compiler/capnp.c++
165	90	c++/src/capnp/compiler/compiler.c++
5	1	c++/src/capnp/compiler/compiler.h
400	453	c++/src/capnp/compiler/node-translator.c++
36	30	c++/src/capnp/compiler/node-translator.h
24	0	c++/src/capnp/compiler/parser.c++
5	0	c++/src/capnp/compiler/parser.h
614	854	c++/src/capnp/dynamic.c++
58	163	c++/src/capnp/dynamic.h
9	8	c++/src/capnp/generated-header-support.h
2	2	c++/src/capnp/schema-loader.h
102	226	c++/src/capnp/schema.c++
106	132	c++/src/capnp/schema.h
71	64	c++/src/capnp/schema2.capnp
282	292	c++/src/capnp/schema2.capnp.c++
1041	1050	c++/src/capnp/schema2.capnp.h
1	1	c++/src/capnp/stringify.c++
3	3	c++/src/kj/debug.h

--427eed46	2013-08-15T22:06:38-07:00	Kenton Varda	temporal@gmail.com	Initial commit of schema2.capnp.  Time to start rewriting things...

427eed46
1	1	c++/regenerate-bootstraps.sh
11	0	c++/src/capnp/compiler/capnpc-c++.c++
581	0	c++/src/capnp/compiler/grammar.capnp.h
75	0	c++/src/capnp/compiler/lexer.capnp.h
29	1	c++/src/capnp/layout.h
659	0	c++/src/capnp/schema.capnp.h
351	0	c++/src/capnp/schema2.capnp
2151	0	c++/src/capnp/schema2.capnp.c++
3222	3278	c++/src/capnp/{schema.capnp.h => schema2.capnp.h}

--bbe6769f	2013-08-15T21:30:51-07:00	Kenton Varda	temporal@gmail.com	Allow 'group' and 'union' to have preceding colon, and fix a bug.

bbe6769f
1	1	c++/src/capnp/compiler/node-translator.c++
6	3	c++/src/capnp/compiler/parser.c++

--7c6c617d	2013-08-15T19:17:40-07:00	Kenton Varda	temporal@gmail.com	Generate usable code for groups, although making schemas work is still an open problem.  I think I'm going to do the schema rewrite now.

7c6c617d
89	63	c++/src/capnp/compiler/capnpc-c++.c++
38	0	c++/src/capnp/encoding-test.c++
9	9	c++/src/capnp/test.capnp

--c1e33ebf	2013-08-15T16:08:11-07:00	Kenton Varda	temporal@gmail.com	Groups WIP

c1e33ebf
14	5	c++/src/capnp/compiler/capnpc-c++.c++
4	2	c++/src/capnp/compiler/parser.c++
74	10	c++/src/capnp/schema-loader.c++
20	0	c++/src/capnp/test.capnp

--608d7ed7	2013-08-15T13:38:25-07:00	Kenton Varda	temporal@gmail.com	Support parsing values for structs with unnamed unions.

608d7ed7
7	4	c++/src/capnp/compiler/grammar.capnp
78	54	c++/src/capnp/compiler/grammar.capnp.c++
105	68	c++/src/capnp/compiler/grammar.capnp.h
39	10	c++/src/capnp/compiler/node-translator.c++
39	29	c++/src/capnp/compiler/parser.c++
48	32	c++/src/capnp/encoding-test.c++
16	11	c++/src/capnp/test.capnp

--372612cd	2013-08-14T21:09:09-07:00	Kenton Varda	temporal@gmail.com	Mostly done with anonymous unions.

372612cd
2	0	c++/src/capnp/bootstrap-test.ekam-rule
25	14	c++/src/capnp/compiler/capnpc-c++.c++
30	30	c++/src/capnp/compiler/grammar.capnp.c++
69	9	c++/src/capnp/dynamic-test.c++
74	10	c++/src/capnp/dynamic.c++
3	0	c++/src/capnp/dynamic.h
3	2	c++/src/capnp/encoding-test.c++
3	7	c++/src/capnp/generated-header-support.h
34	0	c++/src/capnp/schema-loader-test.c++
14	10	c++/src/capnp/schema-loader.c++
11	0	c++/src/capnp/schema-test.c++
78	7	c++/src/capnp/schema.c++
6	0	c++/src/capnp/schema.h
28	0	c++/src/capnp/stringify-test.c++
8	1	c++/src/capnp/stringify.c++
4	4	c++/src/capnp/test.capnp
4	0	c++/src/kj/common.h
12	0	c++/src/kj/debug.h

--248b149a	2013-08-14T17:24:33-07:00	Kenton Varda	temporal@gmail.com	Unnamed unions WIP.  About to change MemberInfo format, which will require re-bootstrapping the code generator.

248b149a
46	4	c++/src/capnp/compiler/capnpc-c++.c++
33	5	c++/src/capnp/compiler/node-translator.c++
1	4	c++/src/capnp/compiler/node-translator.h
14	1	c++/src/capnp/compiler/parser.c++
34	0	c++/src/capnp/encoding-test.c++
12	2	c++/src/capnp/generated-header-support.h
24	6	c++/src/capnp/schema-loader.c++
6	0	c++/src/capnp/schema-test.c++
9	0	c++/src/capnp/schema.c++
11	0	c++/src/capnp/schema.h
11	0	c++/src/capnp/test.capnp

--00905470	2013-08-14T03:31:17-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #26 from sth/patch-1

Minor typo in cxx.md
00905470
--8d002989	2013-08-14T12:25:52+02:00	sth	sth.dev@tejp.de	Minor typo
8d002989
1	1	doc/cxx.md

--26af52ab	2013-08-13T23:14:17-07:00	Kenton Varda	temporal@gmail.com	Fix memory corruption bug caused by an overrun when zeroing empty struct lists.

26af52ab
2	1	c++/src/capnp/layout.c++
145	0	c++/src/capnp/orphan-test.c++

--b8d76f57	2013-08-13T22:13:51-07:00	Kenton Varda	temporal@gmail.com	Minor doc changes.

b8d76f57
35	2	doc/cxx.md

--1f509bf4	2013-08-13T19:34:01-07:00	Kenton Varda	temporal@gmail.com	Split libcapnp into three libraries:  libkj, libcapnp, and libcapnpc.  The third contains the schema parser.  Unfortunately it is rather enormous so we should give people the option to not link it.

1f509bf4
24	13	c++/Makefile.am
1	1	c++/samples/test.sh
2	0	c++/src/capnp/schema-parser-test.c++
1	1	super-test.sh

--334f2e97	2013-08-13T19:08:28-07:00	Kenton Varda	temporal@gmail.com	Add public interface for schema file parsing.

334f2e97
0	4	c++/src/capnp/compiler/compiler.h
3	0	c++/src/capnp/compiler/md5.h
2	2	c++/src/capnp/compiler/module-loader.c++
1	0	c++/src/capnp/compiler/node-translator.c++
144	0	c++/src/capnp/schema-parser-test.c++
242	148	c++/src/capnp/{compiler/module-loader.c++ => schema-parser.c++}
196	0	c++/src/capnp/schema-parser.h
4	0	c++/src/kj/common.h
17	1	c++/src/kj/exception.c++
3	0	c++/src/kj/exception.h

--bf040724	2013-08-12T13:28:39-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #25 from bouk/master

Fix typo
bf040724
--83945f8f	2013-08-12T22:26:27+02:00	Bouke van der Bijl	boukevanderbijl@gmail.com	Fix typo
83945f8f
1	1	doc/_posts/2013-08-12-capnproto-0.2-no-more-haskell.md

--4465ba9d	2013-08-12T12:23:31-07:00	Kenton Varda	temporal@gmail.com	Add missing link.

4465ba9d
1	0	doc/_layouts/post.html

--f0ef656f	2013-08-12T11:40:53-07:00	Kenton Varda	temporal@gmail.com	Use tar-ustar to avoid problems with a long path in the gtest directory that crosses the 99-char tar-v7 limit if the package version number happens to be long enough.  This was causing make distcheck to fail on release candidates, although it worked fine for final releases.

f0ef656f
1	1	c++/configure.ac

--a74d32e2	2013-08-12T00:12:30-07:00	Kenton Varda	temporal@gmail.com	doc tweaks

a74d32e2
3	2	doc/_posts/2013-08-12-capnproto-0.2-no-more-haskell.md

--b582a757	2013-08-11T21:58:11-07:00	Kenton Varda	temporal@gmail.com	More doc updates and news post for v0.2 release.

b582a757
3	0	c++/samples/addressbook.c++
3	0	c++/samples/addressbook.capnp
2	1	doc/_includes/footer.html
143	0	doc/_posts/2013-08-12-capnproto-0.2-no-more-haskell.md
48	3	doc/cxx.md
-	-	doc/images/gittip.png
-	-	doc/images/gittip15.png
6	3	doc/install.md
1	0	doc/news/index.html
1	0	doc/otherlang.md
10	0	doc/stylesheets/stylesheet.css

--b2f49c7d	2013-08-11T17:23:18-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

b2f49c7d
--2ade088e	2013-08-11T16:29:29-07:00	Kenton Varda	temporal@gmail.com	Extend super-test to include 32-bit build.  Fix a bug uncovered by 32-bit Clang.

2ade088e
4	1	c++/src/capnp/compiler/compiler.c++
39	4	super-test.sh

--e21b854d	2013-08-11T13:47:06-07:00	Kenton Varda	temporal@gmail.com	__buistin_bswap16() is apparently missing on Cygwin32.

e21b854d
6	2	c++/src/capnp/endian.h

--c633a6f8	2013-08-10T12:57:17-07:00	Kenton Varda	temporal@gmail.com	Update docs for new compiler.

c633a6f8
4	4	doc/cxx.md
18	39	doc/install.md
12	11	doc/language.md
27	28	doc/otherlang.md

--2d209702	2013-08-10T12:52:14-07:00	Kenton Varda	temporal@gmail.com	Minor bug fixes.

2d209702
1	2	c++/src/capnp/compiler/capnpc-c++.c++
2	2	c++/src/capnp/compiler/capnpc-capnp.c++
3	1	c++/src/capnp/compiler/module-loader.c++

--46293bbd	2013-08-10T11:50:17-07:00	Kenton Varda	temporal@gmail.com	Install capnpc symlink.

46293bbd
8	0	c++/Makefile.am

--31bceca3	2013-08-09T22:02:41-07:00	Kenton Varda	temporal@gmail.com	Set mainlaine version to 0.3-dev.

31bceca3
1	1	c++/configure.ac

--e81cb88f	2013-08-09T21:21:39-07:00	Kenton Varda	temporal@gmail.com	Remove old compiler from release script.

e81cb88f
2	13	release.sh

--b96758a1	2013-08-09T21:21:04-07:00	Kenton Varda	temporal@gmail.com	Oops.

b96758a1
1	1	c++/src/kj/debug-test.c++

--2bcd81bf	2013-08-09T20:11:10-07:00	Kenton Varda	temporal@gmail.com	Add Cygwin to test script.

2bcd81bf
27	14	super-test.sh

--c717aa6c	2013-08-09T19:46:54-07:00	Kenton Varda	temporal@gmail.com	Fix exception-catching test to work on platforms that don't provide a stack trace.

c717aa6c
15	4	c++/src/kj/debug-test.c++

--147f6208	2013-08-09T19:27:15-07:00	Kenton Varda	temporal@gmail.com	Missing includes for Cygwin.

147f6208
2	0	c++/src/kj/debug-test.c++

--0eefa6a5	2013-08-09T19:24:34-07:00	Kenton Varda	temporal@gmail.com	Cygwin doesn't have backtrace().

0eefa6a5
10	2	c++/src/kj/exception.c++

--deaa344d	2013-08-09T18:36:40-07:00	Kenton Varda	temporal@gmail.com	Go back to prefering -std=gnu++11, but detect the one known case where this breaks and we need to use -std=c++11.

deaa344d
1	1	c++/configure.ac
21	0	c++/m4/ax_cxx_compile_stdcxx_11.m4

--55b3cc25	2013-08-09T18:02:21-07:00	Kenton Varda	temporal@gmail.com	Remove obsolete Haskell-based compiler.

55b3cc25
0	1	compiler/LICENSE.txt
0	20	compiler/README.txt
0	2	compiler/Setup.hs
0	67	compiler/capnproto-compiler.cabal
0	1089	compiler/src/Compiler.hs
0	568	compiler/src/CxxGenerator.hs
0	145	compiler/src/Grammar.hs
0	155	compiler/src/Lexer.hs
0	341	compiler/src/Main.hs
0	447	compiler/src/Parser.hs
0	652	compiler/src/Semantics.hs
0	82	compiler/src/Token.hs
0	59	compiler/src/Util.hs
0	727	compiler/src/WireFormat.hs
0	544	compiler/src/c++-header.mustache
0	100	compiler/src/c++-source.mustache

--ae33cf61	2013-08-09T17:59:14-07:00	Kenton Varda	temporal@gmail.com	Remove old compiler from test script.

ae33cf61
2	12	super-test.sh

--8bcec20b	2013-08-09T17:46:27-07:00	Kenton Varda	temporal@gmail.com	Missing include.

8bcec20b
1	0	c++/src/capnp/compiler/capnpc-c++.c++

--14486ce6	2013-08-09T15:50:43-07:00	Kenton Varda	temporal@gmail.com	Oops, memrchr is a GNU extension.

14486ce6
5	5	c++/src/kj/string.h

--4a14f8e1	2013-08-09T15:30:22-07:00	Kenton Varda	temporal@gmail.com	Improve bootstrap test.

4a14f8e1
13	3	c++/src/capnp/bootstrap-test.ekam-rule

--61ba59b8	2013-08-09T15:17:07-07:00	Kenton Varda	temporal@gmail.com	Regenerate bootstrapped sources using C++ compiler.  YAY!

61ba59b8
30	9	c++/src/capnp/c++.capnp.c++
17	8	c++/src/capnp/c++.capnp.h
1	1	c++/src/capnp/compiler/capnpc-c++.c++
575	709	c++/src/capnp/compiler/grammar.capnp.c++
1236	1954	c++/src/capnp/compiler/grammar.capnp.h
99	131	c++/src/capnp/compiler/lexer.capnp.c++
166	282	c++/src/capnp/compiler/lexer.capnp.h
553	709	c++/src/capnp/schema.capnp.c++
504	1151	c++/src/capnp/schema.capnp.h

--1396abd0	2013-08-09T15:13:12-07:00	Kenton Varda	temporal@gmail.com	Add test to check that bootstrapped sources are up-to-date and a script for updating them.

1396abd0
9	0	c++/regenerate-bootstraps.sh
14	19	c++/src/capnp/{capnpc.ekam-rule => bootstrap-test.ekam-rule}
0	1	c++/src/capnp/capnpc.ekam-rule
3	0	c++/src/capnp/compiler/capnp.ekam-manifest
22	4	c++/src/capnp/compiler/capnpc-c++.c++
11	0	c++/src/kj/string.h

--d0f630fe	2013-08-09T14:09:32-07:00	Kenton Varda	temporal@gmail.com	Fix distcheck.

d0f630fe
4	5	c++/Makefile.am
2	2	super-test.sh

--64ec23c9	2013-08-09T13:57:38-07:00	Kenton Varda	temporal@gmail.com	Fix automake to support bootstrapping the compiler.

64ec23c9
21	8	c++/Makefile.am
24	3	c++/configure.ac
38	5	c++/src/capnp/compiler/capnp.c++
12	2	super-test.sh

--d5f614a1	2013-08-09T12:17:42-07:00	Kenton Varda	temporal@gmail.com	Switch to the new compiler.  All tests pass\!  Need to submit bootstrap copies of the generated code used by the compiler itself.  These bootstrap copies are still built by the old compiler at the moment.

d5f614a1
2	2	c++/Makefile.am
18	0	c++/src/capnp/c++.capnp.c++
33	0	c++/src/capnp/c++.capnp.h
23	5	c++/src/capnp/capnpc.ekam-rule
116	53	c++/src/capnp/compiler/capnpc-c++.c++
9	0	c++/src/capnp/compiler/compiler.c++
2627	0	c++/src/capnp/compiler/grammar.capnp.c++
6835	0	c++/src/capnp/compiler/grammar.capnp.h
479	0	c++/src/capnp/compiler/lexer.capnp.c++
1328	0	c++/src/capnp/compiler/lexer.capnp.h
7	0	c++/src/capnp/compiler/node-translator.c++
3	0	c++/src/capnp/compiler/node-translator.h
4	4	c++/src/capnp/encoding-test.c++
1	1	c++/src/capnp/schema.c++
1	11	c++/src/capnp/schema.capnp
2624	0	c++/src/capnp/schema.capnp.c++
6285	0	c++/src/capnp/schema.capnp.h
1	1	c++/src/capnp/test.capnp
3	1	c++/src/kj/io.c++
2	2	compiler/src/Main.hs

--d946e77b	2013-08-08T23:40:44-07:00	Kenton Varda	temporal@gmail.com	C++ code generator WIP.

d946e77b
4	2	c++/src/capnp/compiler/capnp.c++
1277	0	c++/src/capnp/compiler/capnpc-c++.c++
4	2	c++/src/capnp/compiler/capnpc-capnp.c++
3	0	c++/src/capnp/generated-header-support.h
1	0	c++/src/capnp/schema-loader.c++
65	0	c++/src/capnp/schema.c++
68	10	c++/src/capnp/schema.h
2	2	c++/src/kj/array.h
96	0	c++/src/kj/common.h
2	15	c++/src/kj/function.h
3	0	c++/src/kj/string.h
4	4	compiler/src/CxxGenerator.hs
1	1	compiler/src/c++-source.mustache

--3b0e4f1e	2013-08-06T19:12:41-07:00	Kenton Varda	temporal@gmail.com	Update capnpc-capnp to use KJ_MAIN.

3b0e4f1e
7	1	c++/src/capnp/compiler/capnp.c++
40	18	c++/src/capnp/compiler/capnpc-capnp.c++
5	0	c++/src/kj/array.h
4	0	c++/src/kj/vector.h

--10697ea1	2013-08-06T18:23:07-07:00	Kenton Varda	temporal@gmail.com	Pull TextBlob out of capnpc-capnp and into KJ as kj::StringTree.  Use it in the stringification code to make that code cleaner and avoid using iostreams.

10697ea1
3	0	c++/Makefile.am
3	7	c++/src/capnp/compiler/capnp.c++
106	225	c++/src/capnp/compiler/capnpc-capnp.c++
1	1	c++/src/capnp/compiler/lexer.c++
0	1	c++/src/capnp/compiler/lexer.h
12	12	c++/src/capnp/dynamic.h
5	4	c++/src/capnp/generated-header-support.h
5	5	c++/src/capnp/pretty-print.h
2	2	c++/src/capnp/schema.h
41	46	c++/src/capnp/stringify-test.c++
139	173	c++/src/capnp/stringify.c++
6	0	c++/src/kj/array-test.c++
30	0	c++/src/kj/array.h
33	17	c++/src/{capnp/pretty-print.h => kj/string-tree-test.c++}
37	17	c++/src/{capnp/pretty-print.h => kj/string-tree.c++}
210	0	c++/src/kj/string-tree.h
12	4	c++/src/kj/string.h
4	4	compiler/src/c++-header.mustache

--7b59b551	2013-08-05T20:58:26-07:00	Kenton Varda	temporal@gmail.com	Arrange for compiler to send to the code generator the complete contents of all files listed on the command line, all first-level dependencies of those files, and parent scopes of those dependencies, but nothing more.  This means it's sometimes possible to compile a schema file without parsing all transitive dependencies.  Also, in 'decode' mode, don't compile annotations, so that the files defining those annotations need not be opened at all.

7b59b551
30	7	c++/src/capnp/compiler/capnp.c++
2	1	c++/src/capnp/compiler/capnpc-capnp.c++
166	28	c++/src/capnp/compiler/compiler.c++
96	24	c++/src/capnp/compiler/compiler.h
1	1	c++/src/capnp/compiler/lexer.c++
1	1	c++/src/capnp/compiler/module-loader.c++
4	3	c++/src/capnp/compiler/node-translator.c++
3	1	c++/src/capnp/compiler/node-translator.h
1	1	c++/src/capnp/compiler/parser.c++
21	0	c++/src/kj/mutex-test.c++
33	0	c++/src/kj/mutex.c++
32	0	c++/src/kj/mutex.h

--b608e69d	2013-08-04T11:58:50-07:00	Kenton Varda	temporal@gmail.com	Add GCC-4.8 build to test script.

b608e69d
20	4	super-test.sh

--56dc125b	2013-08-04T11:35:56-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'fix-noexcept' of https://github.com/dwrensha/capnproto

56dc125b
--8b1e3579	2013-08-04T11:31:23-07:00	Kenton Varda	temporal@gmail.com	Revert "Work around weird behavior in GCC 4.8 where it thinks this destructor's declaration and definition hase mismatching noexcept specs even though neither one has a noexcept spec at all."

This reverts commit c088dd95c610eb34381190fbad7e20ca68fff323.

Reverted in favor of dwrensha's more complete fix.

8b1e3579
2	0	c++/src/capnp/compiler/lexer.c++
2	0	c++/src/capnp/compiler/lexer.h

--c088dd95	2013-08-04T11:13:37-07:00	Kenton Varda	temporal@gmail.com	Work around weird behavior in GCC 4.8 where it thinks this destructor's declaration and definition hase mismatching noexcept specs even though neither one has a noexcept spec at all.

c088dd95
0	2	c++/src/capnp/compiler/lexer.c++
0	2	c++/src/capnp/compiler/lexer.h

--4eb7ffdb	2013-08-04T13:40:31-04:00	David Renshaw	dwrenshaw@gmail.com	get this to compile with g++-mp-4.8

4eb7ffdb
1	1	c++/src/capnp/compiler/compiler.c++
1	1	c++/src/capnp/compiler/compiler.h
1	1	c++/src/capnp/compiler/lexer.h
1	1	c++/src/capnp/compiler/module-loader.h
1	1	c++/src/capnp/compiler/parser.h

--3c4e9c55	2013-08-02T19:05:15-07:00	Kenton Varda	temporal@gmail.com	Fix problem with vpath builds.

3c4e9c55
1	1	c++/src/capnp/compiler/capnpc-capnp.c++

--16c98b14	2013-08-02T18:54:15-07:00	Kenton Varda	temporal@gmail.com	Update Makefile.am to build new compiler.  Not bootstrapping yet, of course, since the C++ output plugin is not written.

16c98b14
44	6	c++/Makefile.am
4	0	c++/src/kj/main.c++

--227a4911	2013-08-02T18:15:51-07:00	Kenton Varda	temporal@gmail.com	Refactor compiler binary into a multi-tool with sub-commands like 'compile' and 'decode'.  The latter dynamically decodes binary input to text based on a provided schema file.

227a4911
514	0	c++/src/capnp/compiler/capnp.c++
0	291	c++/src/capnp/compiler/capnpc2.c++
14	0	c++/src/capnp/compiler/compiler.c++
5	0	c++/src/capnp/compiler/compiler.h
2	2	c++/src/capnp/serialize-packed-test.c++
6	6	c++/src/capnp/serialize-packed.c++
1	1	c++/src/capnp/serialize-packed.h
2	2	c++/src/capnp/serialize-snappy-test.c++
21	8	c++/src/capnp/serialize-snappy.c++
3	3	c++/src/capnp/serialize-snappy.h
1	1	c++/src/capnp/serialize-test.c++
1	1	c++/src/capnp/stringify.c++
25	14	c++/src/kj/io.c++
19	9	c++/src/kj/io.h
7	5	c++/src/kj/main.c++

--7c9309be	2013-08-02T15:09:00-07:00	Kenton Varda	temporal@gmail.com	Implement more compiler options.

7c9309be
56	1	c++/src/capnp/compiler/capnpc2.c++
2	6	c++/src/capnp/compiler/parser.c++
3	0	c++/src/capnp/compiler/parser.h

--d67392cf	2013-08-02T14:03:09-07:00	Kenton Varda	temporal@gmail.com	Apparently at_quick_exit() doesn't exist on most platforms.  Oh well, just use _Exit().

d67392cf
1	1	c++/src/kj/main.c++
60	1	c++/src/kj/main.h

--56659da1	2013-08-01T23:34:59-07:00	Kenton Varda	temporal@gmail.com	Samples need to be compiled with -pthread now.

56659da1
1	1	c++/samples/test.sh
1	1	super-test.sh

--d75e6a31	2013-08-01T23:05:26-07:00	Kenton Varda	temporal@gmail.com	Fix GCC issues.

d75e6a31
2	1	c++/src/capnp/compiler/compiler.c++
35	34	c++/src/capnp/compiler/node-translator.c++
1	1	c++/src/capnp/encoding-test.c++
10	10	c++/src/kj/arena-test.c++
1	1	c++/src/kj/arena.c++
4	4	c++/src/kj/common-test.c++
8	0	c++/src/kj/common.c++
12	0	c++/src/kj/common.h
1	1	c++/src/kj/function-test.c++
44	2	c++/src/kj/function.h
3	0	c++/src/kj/main.c++
5	5	c++/src/kj/main.h
16	16	c++/src/kj/mutex-test.c++

--baa3ee3c	2013-08-01T20:24:15-07:00	Kenton Varda	temporal@gmail.com	Fix compiler bugs.  Now test.capnp compiles to an identical schema to the old Haskell compiler, minus intentional changes.

baa3ee3c
2	2	c++/src/capnp/compiler/capnpc-capnp.c++
33	2	c++/src/capnp/compiler/capnpc2.c++
38	21	c++/src/capnp/compiler/compiler.c++
9	0	c++/src/capnp/compiler/compiler.h
30	0	c++/src/capnp/compiler/error-reporter.h
5	0	c++/src/capnp/compiler/lexer-test.c++
18	15	c++/src/capnp/compiler/module-loader.c++
3	2	c++/src/capnp/compiler/module-loader.h
33	68	c++/src/capnp/compiler/node-translator.c++
5	5	c++/src/capnp/compiler/node-translator.h
19	0	c++/src/kj/common.h
50	20	c++/src/kj/main.c++

--d7664acb	2013-08-01T20:23:13-07:00	Kenton Varda	temporal@gmail.com	with

d7664acb
1	1	c++/m4/ax_cxx_compile_stdcxx_11.m4

--4a4958bd	2013-08-01T07:56:34-07:00	Kenton Varda	temporal@gmail.com	Compiler actually running plugins!  Hooked it up to capnpc-capnp (the loopback plugin).  Working on getting the output identical to the old capnpc...  still a few bugs left.

4a4958bd
103	49	c++/src/capnp/compiler/capnpc2.c++
13	8	c++/src/capnp/compiler/compiler.c++
53	15	c++/src/capnp/compiler/node-translator.c++
1	1	c++/src/capnp/compiler/parser.c++
8	0	c++/src/capnp/dynamic-test.c++
23	1	c++/src/capnp/dynamic.c++
37	0	c++/src/capnp/layout.c++
5	0	c++/src/capnp/layout.h
9	0	c++/src/capnp/list.h
6	6	c++/src/kj/main.c++
8	8	c++/src/kj/main.h
2	0	c++/src/kj/string.h
2	0	compiler/src/c++-header.mustache

--de7f266a	2013-08-01T04:32:56-07:00	Kenton Varda	temporal@gmail.com	Add utility code for really nice command-line option parsing and start using it in the compiler (still WIP).

de7f266a
5	1	c++/Makefile.am
40	0	c++/src/capnp/compiler/capnpc2.c++
22	15	c++/src/capnp/compiler/compiler.c++
1	1	c++/src/capnp/compiler/compiler.h
2	2	c++/src/capnp/compiler/module-loader.c++
9	10	c++/src/capnp/compiler/node-translator.c++
15	8	c++/src/capnp/compiler/node-translator.h
15	3	c++/src/capnp/compiler/parser.c++
6	0	c++/src/kj/array.c++
11	0	c++/src/kj/array.h
83	0	c++/src/kj/function-test.c++
155	0	c++/src/kj/function.h
685	0	c++/src/kj/main.c++
346	0	c++/src/kj/main.h
17	0	c++/src/kj/string.h
5	0	c++/src/kj/vector.h

--b92a28a6	2013-07-30T16:44:54-07:00	Kenton Varda	temporal@gmail.com	Compiler nearing completion.  Mostly just needs a driver.

b92a28a6
47	14	c++/src/capnp/compiler/capnpc2.c++
96	25	c++/src/capnp/compiler/compiler.c++
6	3	c++/src/capnp/compiler/compiler.h
136	64	c++/src/capnp/compiler/node-translator.c++
11	7	c++/src/capnp/compiler/node-translator.h
1	1	c++/src/capnp/layout.c++
1	1	c++/src/kj/common.h

--34e70d5a	2013-07-26T04:22:27-07:00	Kenton Varda	temporal@gmail.com	More compiler work.  Almost to the point of basic functionality...  almost...

34e70d5a
6	6	c++/src/capnp/compiler/compiler.c++
2	3	c++/src/capnp/compiler/compiler.h
3	0	c++/src/capnp/compiler/grammar.capnp
3	3	c++/src/capnp/compiler/lexer.c++
4	4	c++/src/capnp/compiler/lexer.h
342	0	c++/src/capnp/compiler/module-loader.c++
62	0	c++/src/capnp/compiler/module-loader.h
394	199	c++/src/capnp/compiler/node-translator.c++
21	6	c++/src/capnp/compiler/node-translator.h
15	10	c++/src/capnp/compiler/parser.c++
3	3	c++/src/capnp/compiler/parser.h
2	0	c++/src/capnp/dynamic.h
5	0	c++/src/kj/string.h

--a75f59bf	2013-07-25T19:19:18-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

a75f59bf
--b0730966	2013-07-25T19:19:07-07:00	Kenton Varda	temporal@gmail.com	More compiler WIP

b0730966
15	21	c++/src/capnp/compiler/compiler.c++
2	6	c++/src/capnp/compiler/grammar.capnp
444	9	c++/src/capnp/compiler/node-translator.c++
13	4	c++/src/capnp/compiler/node-translator.h
30	9	c++/src/capnp/compiler/parser.c++
6	8	c++/src/capnp/dynamic.c++
5	0	c++/src/capnp/schema.capnp

--e5e3100d	2013-07-25T13:24:53-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #22 from dwrensha/typos

typos
e5e3100d
--0da57538	2013-07-25T06:58:23-07:00	Kenton Varda	temporal@gmail.com	Compiler core WIP.

0da57538
4	4	c++/src/capnp/compiler/capnpc2.c++
723	0	c++/src/capnp/compiler/compiler.c++
99	0	c++/src/capnp/compiler/compiler.h
9	1	c++/src/capnp/compiler/error-reporter.h
31	2	c++/src/capnp/compiler/grammar.capnp
1	1	c++/src/capnp/compiler/lexer-test.c++
1142	0	c++/src/capnp/compiler/node-translator.c++
154	0	c++/src/capnp/compiler/node-translator.h
4	3	c++/src/capnp/compiler/parser.c++
21	1	c++/src/capnp/schema.capnp
2	2	c++/src/kj/array.h
2	2	c++/src/kj/vector.h

--23538632	2013-07-23T21:22:04-04:00	David Renshaw	dwrenshaw@gmail.com	typos

23538632
1	1	c++/src/capnp/arena.c++
1	1	c++/src/capnp/benchmark/runner.c++
1	1	c++/src/capnp/common.h
1	1	c++/src/capnp/encoding-test.c++

--0391156a	2013-07-23T04:31:01-07:00	Kenton Varda	temporal@gmail.com	Add MD5 code to compiler.

0391156a
65	0	c++/src/capnp/compiler/md5-test.c++
324	0	c++/src/capnp/compiler/md5.c++
77	0	c++/src/capnp/compiler/md5.h

--24415ced	2013-07-22T19:58:45-07:00	Kenton Varda	temporal@gmail.com	Apparently read locks are not recursive on BSD/OSX.  Adjust test so that it doesn't deadlock.

24415ced
18	0	c++/src/kj/mutex-test.c++
8	1	c++/src/kj/mutex.h

--02386c72	2013-07-22T18:54:04-07:00	Kenton Varda	temporal@gmail.com	Fix OSX build.

02386c72
0	1	c++/Makefile.am
1	1	c++/src/kj/thread.c++

--028b8ea7	2013-07-22T18:18:38-07:00	Kenton Varda	temporal@gmail.com	Futex-based mutex and once-init implementations for Linux.  These are measurably faster -- and much smaller -- than the pthread-based implementations.

028b8ea7
140	0	c++/src/kj/mutex.c++
40	4	c++/src/kj/mutex.h

--68733fb7	2013-07-22T14:19:49-07:00	Kenton Varda	temporal@gmail.com	Thread-safe message builders...  not performing well.  Might revert.

68733fb7
41	23	c++/src/capnp/arena.c++
44	21	c++/src/capnp/arena.h
2	2	c++/src/capnp/dynamic.c++
2	2	c++/src/capnp/dynamic.h
49	0	c++/src/capnp/encoding-test.c++
9	6	c++/src/capnp/layout-test.c++
133	131	c++/src/capnp/layout.c++
8	10	c++/src/capnp/message.c++
32	1	c++/src/capnp/message.h
8	8	c++/src/capnp/orphan.h

--64075f16	2013-07-20T13:12:35-07:00	Kenton Varda	temporal@gmail.com	Fix subtle bug.

64075f16
28	15	c++/src/kj/arena.c++
4	0	c++/src/kj/arena.h

--b4d403f5	2013-07-19T18:55:06-07:00	Kenton Varda	temporal@gmail.com	kj::Thread

b4d403f5
4	1	c++/Makefile.am
1	26	c++/src/kj/arena-test.c++
1	27	c++/src/kj/mutex-test.c++
45	0	c++/src/kj/thread.c++
66	0	c++/src/kj/thread.h

--fc0c297c	2013-07-19T18:35:58-07:00	Kenton Varda	temporal@gmail.com	Make kj::Arena thread-safe.

fc0c297c
1	1	c++/src/capnp/compiler/lexer-test.c++
7	7	c++/src/capnp/schema-loader.c++
123	9	c++/src/kj/arena-test.c++
92	42	c++/src/kj/arena.c++
37	27	c++/src/kj/arena.h
9	9	c++/src/kj/mutex-test.c++
8	5	c++/src/kj/mutex.c++
19	13	c++/src/kj/mutex.h

--a45c463c	2013-07-19T04:52:58-07:00	Kenton Varda	temporal@gmail.com	Various tweaks.

a45c463c
1	1	c++/src/capnp/compiler/capnpc2.c++
1	1	c++/src/capnp/compiler/error-reporter.h
15	18	c++/src/capnp/compiler/parser.c++
1	1	c++/src/capnp/schema-loader-test.c++
1	1	c++/src/capnp/schema-loader.c++
6	4	c++/src/capnp/schema-loader.h
14	7	c++/src/kj/common.h
5	0	c++/src/kj/mutex.h

--d92038eb	2013-07-19T02:25:09-07:00	Kenton Varda	temporal@gmail.com	Fix subtle bug in KJ_DEFER that didn't come up in practice due to RVO.

d92038eb
10	2	c++/src/kj/common.h

--8bfe482a	2013-07-18T05:35:38-07:00	Kenton Varda	temporal@gmail.com	Allow SchemaLoader to use a callback to lazily load schema nodes, including dependencies of loaded nodes.

8bfe482a
23	1	c++/src/capnp/generated-header-support.h
84	1	c++/src/capnp/schema-loader-test.c++
170	53	c++/src/capnp/schema-loader.c++
29	1	c++/src/capnp/schema-loader.h
4	3	c++/src/capnp/schema.c++
4	1	c++/src/capnp/schema.h
3	3	c++/src/kj/mutex.c++
3	3	c++/src/kj/mutex.h
2	2	compiler/src/c++-source.mustache

--2ca6d90c	2013-07-17T22:50:50-07:00	Kenton Varda	temporal@gmail.com	Allow non-const kj::Lazy.

2ca6d90c
18	1	c++/src/kj/mutex.h

--02ea85af	2013-07-17T22:50:22-07:00	Kenton Varda	temporal@gmail.com	Remove allocator hack in SchemaLoader, use kj::Arena.

02ea85af
0	2	c++/src/capnp/message.h
18	43	c++/src/capnp/schema-loader.c++

--e607fc95	2013-07-17T21:52:14-07:00	Kenton Varda	temporal@gmail.com	Allow getting readers from const Orphans, and other tweaks.

e607fc95
2	6	c++/src/capnp/compiler/grammar.capnp
12	11	c++/src/capnp/compiler/parser.c++
9	0	c++/src/capnp/dynamic.c++
4	0	c++/src/capnp/dynamic.h
80	15	c++/src/capnp/layout.c++
7	0	c++/src/capnp/layout.h
25	18	c++/src/capnp/orphan-test.c++
21	0	c++/src/capnp/orphan.h
3	0	c++/src/kj/memory.h
2	2	c++/src/kj/mutex.h

--719eb094	2013-07-17T15:58:30-07:00	Kenton Varda	temporal@gmail.com	Implement mutex and once-init synchronization primitives.  Wrap pthreads for now, but plan on raw futexes later.

719eb094
4	1	c++/Makefile.am
1	1	c++/src/capnp/message.c++
0	11	c++/src/kj/arena.c++
3	24	c++/src/kj/arena.h
12	0	c++/src/kj/array.c++
9	1	c++/src/kj/array.h
7	3	c++/src/kj/common.h
1	1	c++/src/kj/debug.h
1	1	c++/src/kj/io.c++
40	2	c++/src/kj/memory.h
133	0	c++/src/kj/mutex-test.c++
86	0	c++/src/kj/mutex.c++
234	0	c++/src/kj/mutex.h

--f75b0d93	2013-07-16T13:51:02-07:00	Kenton Varda	temporal@gmail.com	This should have been in the last commit but apparently I botched the --amend and then pushed without realizing.

f75b0d93
1	1	c++/src/capnp/compiler/parser.c++

--f08b2f90	2013-07-15T22:45:58-07:00	Kenton Varda	temporal@gmail.com	Complete C++ .capnp parser.  Also, add a pretty-printing function for arbitrary Cap'n Proto objects which is like the existing stringification but uses whitespace (newlines an indentation) to make the structures more readable.

f08b2f90
1	0	c++/Makefile.am
23	17	c++/src/capnp/compiler/capnpc2.c++
22	6	c++/src/capnp/compiler/grammar.capnp
276	11	c++/src/capnp/compiler/parser.c++
2	0	c++/src/capnp/compiler/parser.h
5	13	c++/src/capnp/dynamic.h
19	15	c++/src/{kj/string-test.c++ => capnp/pretty-print.h}
201	1	c++/src/capnp/stringify-test.c++
109	16	c++/src/capnp/stringify.c++
13	0	c++/src/kj/string-test.c++
15	0	c++/src/kj/string.h

--27b8137f	2013-07-15T12:03:51-07:00	Kenton Varda	temporal@gmail.com	Fix file name extension for parser.c++.

27b8137f
0	0	c++/src/capnp/compiler/{parser.cpp => parser.c++}

--63035efd	2013-07-15T12:03:15-07:00	Kenton Varda	temporal@gmail.com	Fix pointer corruption when using orphaned struct lists.

63035efd
1	4	c++/src/capnp/compiler/capnpc2.c++
6	2	c++/src/capnp/layout.c++
51	0	c++/src/capnp/orphan-test.c++

--359ea45a	2013-07-12T20:54:36-07:00	Kenton Varda	temporal@gmail.com	Continuing work on capnp C++ parser.

359ea45a
36	15	c++/src/capnp/compiler/capnpc2.c++
6	27	c++/src/capnp/compiler/{capnpc2.c++ => error-reporter.c++}
17	25	c++/src/capnp/compiler/{capnpc2.c++ => error-reporter.h}
4	0	c++/src/capnp/compiler/grammar.capnp
9	1	c++/src/capnp/compiler/lexer-test.c++
20	19	c++/src/capnp/compiler/lexer.c++
11	4	c++/src/capnp/compiler/lexer.h
286	39	c++/src/capnp/compiler/parser.cpp
16	9	c++/src/capnp/compiler/parser.h
4	4	c++/src/capnp/orphan.h
11	0	c++/src/capnp/stringify-test.c++
5	4	c++/src/capnp/stringify.c++
7	0	c++/src/capnp/test.capnp
71	0	c++/src/kj/parse/common-test.c++
85	7	c++/src/kj/parse/common.h

--cc8d8fc7	2013-07-12T14:41:28-07:00	Kenton Varda	temporal@gmail.com	Fix test bug on 32-bit arch.

cc8d8fc7
1	1	c++/src/capnp/encoding-test.c++

--0fe8598c	2013-07-11T21:20:52-07:00	Kenton Varda	temporal@gmail.com	.capnp parser WIP

0fe8598c
209	0	c++/src/capnp/compiler/grammar.capnp
398	0	c++/src/capnp/compiler/parser.cpp
129	0	c++/src/capnp/compiler/parser.h

--0757e6ef	2013-07-11T19:29:09-07:00	Kenton Varda	temporal@gmail.com	Implement adoptWithCaveats() for struct lists, and some parser tweaks.

0757e6ef
134	103	c++/src/capnp/compiler/lexer-test.c++
37	27	c++/src/capnp/compiler/lexer.c++
31	21	c++/src/capnp/compiler/lexer.capnp
43	0	c++/src/capnp/layout.c++
5	0	c++/src/capnp/layout.h
18	0	c++/src/capnp/list.h
31	0	c++/src/kj/parse/common-test.c++
37	5	c++/src/kj/parse/common.h

--ce4162e8	2013-07-09T23:14:21-07:00	Kenton Varda	temporal@gmail.com	Refactor lexer using arena.

ce4162e8
73	85	c++/src/capnp/compiler/lexer.c++
50	0	c++/src/capnp/compiler/lexer.h
5	0	c++/src/kj/arena.h
1	1	c++/src/kj/parse/common.h

--8e1d1e53	2013-07-09T21:38:20-07:00	Kenton Varda	temporal@gmail.com	kj::Arena for fast arena-style allocation.

8e1d1e53
3	0	c++/Makefile.am
287	0	c++/src/kj/arena-test.c++
149	0	c++/src/kj/arena.c++
224	0	c++/src/kj/arena.h
16	33	c++/src/kj/array.c++
46	9	c++/src/kj/array.h
18	0	c++/src/kj/common-test.c++
31	2	c++/src/kj/common.h
3	2	c++/src/kj/debug.h

--ddb57c2d	2013-07-09T02:05:47-07:00	Kenton Varda	temporal@gmail.com	Implement lexer for new compiler.

ddb57c2d
1	0	c++/src/capnp/blob.h
54	0	c++/src/capnp/compiler/capnpc2.c++
302	0	c++/src/capnp/compiler/lexer-test.c++
276	0	c++/src/capnp/compiler/lexer.c++
58	0	c++/src/capnp/compiler/lexer.capnp
45	0	c++/src/capnp/compiler/lexer.h
8	8	c++/src/capnp/orphan-test.c++
4	0	c++/src/kj/common.h
2	2	c++/src/kj/parse/char-test.c++
5	2	c++/src/kj/parse/char.h
22	6	c++/src/kj/parse/common.h
8	0	c++/src/kj/tuple.h
9	2	c++/src/kj/vector.h

--1d364ad9	2013-07-08T14:04:41-07:00	Kenton Varda	temporal@gmail.com	Add link to dwrensha's Rust implementation.

1d364ad9
1	0	doc/otherlang.md

--8536e962	2013-07-08T05:12:06-07:00	Kenton Varda	temporal@gmail.com	Implement orphans -- the ability to transfer ownership of sub-objects.

8536e962
2	0	c++/Makefile.am
1	1	c++/src/capnp/blob.h
78	0	c++/src/capnp/common.h
31	0	c++/src/capnp/dynamic.c++
137	4	c++/src/capnp/dynamic.h
19	0	c++/src/capnp/generated-header-support.h
396	31	c++/src/capnp/layout.c++
161	32	c++/src/capnp/layout.h
47	80	c++/src/capnp/list.h
8	0	c++/src/capnp/message.c++
2	0	c++/src/capnp/message.h
421	0	c++/src/capnp/orphan-test.c++
262	0	c++/src/capnp/orphan.h
0	45	c++/src/capnp/test-util.c++
51	0	c++/src/capnp/test-util.h
47	0	compiler/src/c++-header.mustache

--0360b3d1	2013-07-03T23:34:18-07:00	Kenton Varda	temporal@gmail.com	Document why unions are not first-class types.

0360b3d1
39	0	doc/language.md

--b9777edc	2013-07-02T22:03:53-07:00	Kenton Varda	temporal@gmail.com	exactString parser.

b9777edc
38	18	c++/src/kj/parse/char-test.c++
51	19	c++/src/kj/parse/char.h

--364e3c4e	2013-07-02T21:17:57-07:00	Kenton Varda	temporal@gmail.com	Update Makefile.am.

364e3c4e
10	4	c++/Makefile.am

--d1d9e143	2013-07-02T21:11:56-07:00	Kenton Varda	temporal@gmail.com	Fix GCC warnings.

d1d9e143
2	2	c++/src/kj/array-test.c++
1	1	c++/src/kj/array.h
3	3	c++/src/kj/parse/char-test.c++
7	7	c++/src/kj/parse/common-test.c++
21	21	c++/src/kj/tuple-test.c++

--567fd38e	2013-07-02T19:14:00-07:00	Kenton Varda	temporal@gmail.com	Add char parsers for various token types.

567fd38e
188	20	c++/src/kj/parse/char-test.c++
42	2	c++/src/kj/parse/char.c++
193	41	c++/src/kj/parse/char.h
60	19	c++/src/kj/parse/common-test.c++
79	13	c++/src/kj/parse/common.h
2	1	c++/src/kj/string.c++
15	9	c++/src/kj/tuple.h

--0bd5f9ce	2013-07-02T03:01:56-07:00	Kenton Varda	temporal@gmail.com	Discarding version of char parsers.  Also, many() should return a count rather than an array if sub-parsers have empty results.

0bd5f9ce
34	2	c++/src/kj/parse/char-test.c++
32	0	c++/src/kj/parse/char.c++
42	13	c++/src/kj/parse/char.h
52	4	c++/src/kj/parse/common-test.c++
69	5	c++/src/kj/parse/common.h

--5cc86aa6	2013-07-02T02:16:05-07:00	Kenton Varda	temporal@gmail.com	Split char parser into separate module.

5cc86aa6
200	0	c++/src/kj/parse/char-test.c++
0	0	c++/src/kj/parse/char.c++
118	0	c++/src/kj/parse/char.h
0	163	c++/src/kj/parse/common-test.c++
2	73	c++/src/kj/parse/common.h

--2e71ad16	2013-07-02T00:46:58-07:00	Kenton Varda	temporal@gmail.com	Move parser-combinator framework to subdirectory.

2e71ad16
16	16	c++/src/kj/{parse-test.c++ => parse/common-test.c++}
8	8	c++/src/kj/{parse.h => parse/common.h}

--feb5c1ab	2013-07-02T00:38:44-07:00	Kenton Varda	temporal@gmail.com	Remove ugly meta description that github pages auto-generated long ago.

feb5c1ab
0	1	doc/_includes/header.html

--c476ac6f	2013-06-28T16:48:36-07:00	Kenton Varda	temporal@gmail.com	Fix sidebar in IE.  Apparently it has been broken from day 1 and no one noticed or cared.

c476ac6f
4	1	doc/javascripts/main.js

--29ab203a	2013-06-28T16:15:54-07:00	Kenton Varda	temporal@gmail.com	Add G+ follow buttons to blog posts / site footer.

29ab203a
12	1	doc/_includes/footer.html
3	0	doc/_layouts/post.html
3	0	doc/news/index.html
14	1	doc/stylesheets/stylesheet.css

--d120c701	2013-06-27T13:38:03-07:00	Kenton Varda	temporal@gmail.com	Fix example code.

d120c701
2	2	doc/language.md

--77ca0c0e	2013-06-27T12:24:21-07:00	Kenton Varda	temporal@gmail.com	Improve page titles.

77ca0c0e
1	1	doc/_includes/header.html
1	0	doc/cxx.md
1	0	doc/encoding.md
1	0	doc/index.md
1	0	doc/install.md
1	0	doc/language.md
1	0	doc/news/index.html
1	0	doc/otherlang.md
1	0	doc/rpc.md

--550ffca8	2013-06-27T04:20:55-07:00	Kenton Varda	temporal@gmail.com	Fix links.

550ffca8
5	4	doc/_posts/2013-06-27-capn-proto-beta-release.md

--efebd00e	2013-06-27T04:04:44-07:00	Kenton Varda	temporal@gmail.com	Fix issues with github hosting the page out of a subdirectory.

efebd00e
1	0	doc/_config.yml
12	12	doc/_includes/header.html
2	2	doc/_layouts/post.html
1	1	doc/_posts/2013-04-01-announcing-capn-proto.md
2	2	doc/javascripts/main.js
1	1	doc/news/index.html

--211bdd9d	2013-06-27T03:37:35-07:00	Kenton Varda	temporal@gmail.com	More doc updates.

211bdd9d
1	1	doc/_layouts/post.html
4	0	doc/cxx.md
4	5	doc/index.md
8	8	doc/install.md
1	1	doc/language.md
24	4	doc/otherlang.md

--7fbaeb4d	2013-06-27T01:04:32-07:00	Kenton Varda	temporal@gmail.com	Add a blog section to the site and populate it with an announcement of the 0.1 release.

7fbaeb4d
1	0	doc/_config.yml
9	0	doc/_includes/buttons.html
24	0	doc/_includes/footer.html
46	0	doc/_includes/header.html
3	188	doc/_layouts/page.html
19	0	doc/_layouts/post.html
15	0	doc/_posts/2013-04-01-announcing-capn-proto.md
41	0	doc/_posts/2013-06-27-capn-proto-beta-release.md
9	5	doc/cxx.md
0	4	doc/encoding.md
1	9	doc/index.md
35	22	doc/install.md
141	0	doc/javascripts/main.js
21	0	doc/news/index.html
15	0	doc/stylesheets/stylesheet.css

--53d5cd8f	2013-06-26T20:11:53-07:00	Kenton Varda	temporal@gmail.com	Oops.

53d5cd8f
1	1	release.sh

--f773e6c9	2013-06-26T20:10:55-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

f773e6c9
--8255a394	2013-06-26T19:58:53-07:00	Kenton Varda	temporal@gmail.com	Improve release script.

8255a394
174	35	release.sh

--11bb7399	2013-06-26T18:18:12-07:00	Kenton Varda	temporal@gmail.com	Set mainline version to 0.2-dev.

11bb7399
1	1	c++/configure.ac
1	1	compiler/capnproto-compiler.cabal

--49292792	2013-06-26T18:14:44-07:00	Kenton Varda	temporal@gmail.com	Tweaks.

49292792
2	2	release.sh

--2ea60eff	2013-06-26T18:10:36-07:00	Kenton Varda	temporal@gmail.com	Create a script that builds the release.

2ea60eff
23	28	RELEASE-PROCESS.md
1	1	c++/configure.ac
92	0	release.sh

--0792ee4e	2013-06-26T16:52:15-07:00	Kenton Varda	temporal@gmail.com	Remove comment from configure.ac that is superseded by release process guide.

0792ee4e
0	5	c++/configure.ac

--61d5039a	2013-06-26T16:50:13-07:00	Kenton Varda	temporal@gmail.com	Tweak release guide.

61d5039a
10	8	RELEASE-PROCESS.md

--e6905c89	2013-06-26T16:18:49-07:00	Kenton Varda	temporal@gmail.com	Add readme warning about compiler version.

e6905c89
4	0	c++/README.txt

--0e137620	2013-06-26T16:14:27-07:00	Kenton Varda	temporal@gmail.com	Add release process guide.

0e137620
46	0	RELEASE-PROCESS.md

--b4b9ed35	2013-06-26T15:41:51-07:00	Kenton Varda	temporal@gmail.com	Make complier package releasable.

b4b9ed35
17	4	c++/README.txt
1	0	compiler/LICENSE.txt
10	4	{c++ => compiler}/README.txt
24	2	compiler/capnproto-compiler.cabal
3	4	compiler/src/Main.hs

--79bbedc2	2013-06-26T01:27:30-07:00	Kenton Varda	temporal@gmail.com	Clarify WIP vs. ready-to-use implementations.

79bbedc2
8	2	doc/otherlang.md

--e6cadfb6	2013-06-26T00:30:57-07:00	Kenton Varda	temporal@gmail.com	Clarification.

e6cadfb6
5	5	doc/cxx.md

--b8bee4f9	2013-06-26T00:29:24-07:00	Kenton Varda	temporal@gmail.com	c++.capnp is installed now.

b8bee4f9
5	8	doc/cxx.md

--ae3ac594	2013-06-26T00:16:35-07:00	Kenton Varda	temporal@gmail.com	blah

ae3ac594
3	0	c++/Makefile.ekam
3	3	doc/install.md

--0962de20	2013-06-25T21:48:20-07:00	Kenton Varda	temporal@gmail.com	Doc tweaks.

0962de20
3	2	doc/index.md
1	1	doc/otherlang.md

--3cb61c7a	2013-06-25T21:33:17-07:00	Kenton Varda	temporal@gmail.com	Update installation docs now that things are simplified.

3cb61c7a
3	1	c++/src/kj/common.h
69	109	doc/install.md

--68c9877e	2013-06-25T20:32:00-07:00	Kenton Varda	temporal@gmail.com	Oops.

68c9877e
1	0	super-test.sh

--722307a0	2013-06-25T19:28:57-07:00	Kenton Varda	temporal@gmail.com	Make sure to use -stdlib=libc++ when building samples on OSX.

722307a0
7	1	super-test.sh

--833055bf	2013-06-25T18:56:47-07:00	Kenton Varda	temporal@gmail.com	Fix test script when LD_LIBRARY_PATH is not already set.

833055bf
1	1	super-test.sh

--cd5c4e7a	2013-06-25T18:54:33-07:00	Kenton Varda	temporal@gmail.com	Extend gtest patch to include fixing RTTI detection under Clang.

cd5c4e7a
63	54	c++/gtest-1.6.0-c++11.patch

--3cdfbfa8	2013-06-25T18:36:03-07:00	Kenton Varda	temporal@gmail.com	Add script that tests EVERYTHING.

3cdfbfa8
187	0	super-test.sh

--d7be71cf	2013-06-25T15:56:25-07:00	Kenton Varda	temporal@gmail.com	Set version to 0.1-dev

d7be71cf
6	2	c++/configure.ac
1	1	compiler/src/Main.hs

--0ad8f301	2013-06-25T15:06:17-07:00	Kenton Varda	temporal@gmail.com	Oops, exporting CXX for AC_CONFIG_SUBDIRS doesn't work if the user specified their own CXX, in which case their version will be in ac_configure_args and will take precedence.  We'll have to modify ac_configure_args.

0ad8f301
3	2	c++/configure.ac

--db44f4f5	2013-06-25T14:25:44-07:00	Kenton Varda	temporal@gmail.com	Work around libtool dropping -stdlib from CXXFLAGS when linking by putting it in CXX instead.

db44f4f5
3	3	c++/configure.ac
20	12	c++/m4/ax_cxx_compile_stdcxx_11.m4

--451223a3	2013-06-25T13:32:25-07:00	Kenton Varda	temporal@gmail.com	Bundle gtest into autotool build, simplifying usage.

451223a3
3	0	.gitignore
35	7	c++/Makefile.am
6	1	c++/configure.ac
726	0	c++/gtest-1.6.0-c++11.patch
24	0	c++/setup-autotools.sh

--18608f7b	2013-06-24T15:49:32-07:00	Kenton Varda	temporal@gmail.com	Add --version option to capnpc (issue 12)

18608f7b
9	0	compiler/src/Main.hs

--0b59de61	2013-06-24T15:42:19-07:00	Kenton Varda	temporal@gmail.com	Fix issue 10 -- make capnpc print error message when input file does not exist.

0b59de61
4	2	compiler/src/Main.hs

--83d30c2f	2013-06-24T15:07:49-07:00	Kenton Varda	temporal@gmail.com	Improve makefiles to the point that make distcheck works.

83d30c2f
1	0	c++/LICENSE.txt
14	24	c++/Makefile.am
14	0	c++/README.txt
1	1	c++/src/capnp/encoding-test.c++
1	1	c++/src/capnp/schema.h
0	1	c++/src/capnp/serialize-packed-test.c++
0	1	c++/src/capnp/serialize-test.c++
1	1	c++/src/capnp/test-util.h
19	5	compiler/src/Main.hs

--ea54158d	2013-06-24T13:51:59-07:00	Kenton Varda	temporal@gmail.com	Install schema.capnp and c++.capnp to $PREFIX/include/capnp.  Make sure /usr/include and /usr/local/include are in the capnpc search path.  Fix Makefile bug related to ridiculous gmake implicit rules.  And update the docs a bit.

ea54158d
17	11	c++/Makefile.am
6	1	compiler/src/Main.hs
31	29	doc/cxx.md

--452c84b2	2013-06-17T16:12:37-07:00	Kenton Varda	temporal@gmail.com	More parsers.

452c84b2
200	0	c++/src/kj/parse-test.c++
157	27	c++/src/kj/parse.h

--37ee4819	2013-06-17T12:49:42-07:00	Kenton Varda	temporal@gmail.com	Disable use of unit analysis (via kj::Quantity) by default (since it has some overhead), but enable it specifically for dev builds.

37ee4819
1	1	c++/Makefile.ekam
43	53	c++/src/capnp/common.h
20	20	c++/src/capnp/layout.c++

--f87e62bd	2013-06-15T14:56:40-07:00	Kenton Varda	temporal@gmail.com	Don't document inlines.

f87e62bd
9	71	doc/language.md

--7a537646	2013-06-15T12:21:23-07:00	Kenton Varda	temporal@gmail.com	Fix comment.

7a537646
1	1	c++/src/kj/common.h

--30d0fdb5	2013-06-14T15:29:08-07:00	Kenton Varda	temporal@gmail.com	Mention how to get Xcode cli tools.

30d0fdb5
5	2	doc/install.md

--a86e7c50	2013-06-14T15:22:35-07:00	Kenton Varda	temporal@gmail.com	Add note about installing autotools.

a86e7c50
5	0	doc/install.md

--60eef65d	2013-06-14T15:15:59-07:00	Kenton Varda	temporal@gmail.com	More Mac notes.

60eef65d
3	2	doc/install.md

--d7fc2bf7	2013-06-14T15:11:25-07:00	Kenton Varda	temporal@gmail.com	Document how to build on OSX.

d7fc2bf7
71	3	doc/install.md

--cbd54ef3	2013-06-14T14:07:55-07:00	Kenton Varda	temporal@gmail.com	Automatically add -stdlib=libc++ if system C++ library doesn't support C++11 (needed on OSX).

cbd54ef3
43	0	c++/m4/ax_cxx_compile_stdcxx_11.m4

--642f8f42	2013-06-14T13:22:39-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

642f8f42
--c9cb9d57	2013-06-14T13:21:47-07:00	Kenton Varda	temporal@gmail.com	Print warning on OSX when using old libstdc++ (rather than libc++).

c9cb9d57
10	0	c++/src/kj/common.h

--3d464e05	2013-06-14T12:37:27-07:00	Kenton Varda	temporal@gmail.com	Add warning about Apple's weird Clang version.

3d464e05
5	0	c++/src/kj/common.h

--09fe49d9	2013-06-13T22:12:34-07:00	Kenton Varda	temporal@gmail.com	Add missing include needed on OSX.

09fe49d9
1	0	c++/src/capnp/message.c++

--ab3fc0e6	2013-06-13T20:35:36-07:00	Kenton Varda	temporal@gmail.com	Fix capnpc-capnp.c++, which appears to have rotted (issue 15).  Should probably write a test at some point...

ab3fc0e6
8	4	c++/src/capnp/compiler/capnpc-capnp.c++

--600ddee8	2013-06-13T20:25:19-07:00	Kenton Varda	temporal@gmail.com	Update link.

600ddee8
1	1	doc/otherlang.md

--2f598700	2013-06-13T19:08:46-07:00	Kenton Varda	temporal@gmail.com	Make __cxa_get_globals() hack work even when cxxabi.h doesn't declare it, e.g. on OSX.

2f598700
31	12	c++/src/kj/exception.c++

--f49b6a4f	2013-06-13T13:58:33-07:00	Kenton Varda	temporal@gmail.com	Don't check uncaught_exception at throw time because catchExceptionsIfUnwinding() is the correct way to handle it.

f49b6a4f
0	5	c++/src/kj/exception.c++

--8bbe6b25	2013-06-13T11:34:50-07:00	Kenton Varda	temporal@gmail.com	Update blob docs.

8bbe6b25
3	14	doc/cxx.md

--a2fa6413	2013-06-13T11:32:14-07:00	Kenton Varda	temporal@gmail.com	Apply some capnproto -> capnp renames that didn't happen before, update docs, put samples in a place where they are easy to compile.

a2fa6413
8	8	c++/Makefile.am
267	0	c++/samples/addressbook.c++
32	0	c++/samples/addressbook.capnp
13	0	c++/samples/test.sh
24	23	doc/cxx.md
9	9	doc/install.md

--8747ca9c	2013-06-12T16:21:21-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

8747ca9c
--1b7211bc	2013-06-12T16:18:31-07:00	Kenton Varda	temporal@gmail.com	Fix some GCC warnings.

1b7211bc
3	3	c++/src/capnp/endian-reverse-test.c++
1	1	c++/src/capnp/endian-test.c++

--1ac3accc	2013-06-12T15:55:11-07:00	Kenton Varda	temporal@gmail.com	Make tests pass with -fno-rtti and -fno-exceptions.

1ac3accc
6	0	c++/src/capnp/dynamic-test.c++
6	2	c++/src/capnp/dynamic.c++
48	40	c++/src/capnp/encoding-test.c++
9	1	c++/src/capnp/schema-loader-test.c++
5	0	c++/src/capnp/schema-test.c++
4	0	c++/src/kj/array-test.c++
6	0	c++/src/kj/common-test.c++
124	10	c++/src/kj/debug-test.c++
4	0	c++/src/kj/exception-test.c++
1	1	c++/src/kj/exception.c++

--77abb6e6	2013-06-12T14:28:31-07:00	Kenton Varda	temporal@gmail.com	Unset LD_PRELOAD while generating exception stack traces via addr2line.

77abb6e6
28	1	c++/src/kj/exception.c++

--7f4fad36	2013-06-12T14:00:30-07:00	Kenton Varda	temporal@gmail.com	Fix endian tests when compiling a single test binary.  There was an ODR violation.

7f4fad36
40	13	c++/src/capnp/endian.h

--36eaa6a6	2013-06-12T03:10:46-07:00	Kenton Varda	temporal@gmail.com	Enable some useful Clang warnings, fix some bugs it detected.  Especially, eliminate all dynamic initializers.

36eaa6a6
4	2	c++/Makefile.ekam
0	3	c++/src/capnp/generated-header-support.h
2	1	c++/src/capnp/schema-loader.c++
1	1	c++/src/capnp/serialize-snappy.c++
0	3	c++/src/kj/array.c++
2	1	c++/src/kj/array.h
3	3	c++/src/kj/common.h
2	2	c++/src/kj/io.h
0	2	c++/src/kj/memory.c++
2	1	c++/src/kj/memory.h

--1bdce291	2013-06-12T00:13:56-07:00	Kenton Varda	temporal@gmail.com	Refactor parser code more.

1bdce291
163	82	c++/src/kj/parse-test.c++
179	248	c++/src/kj/parse.h
16	3	c++/src/kj/vector.h

--7001fc9d	2013-06-11T22:00:10-07:00	Kenton Varda	temporal@gmail.com	Refactor Tuple and split it and Vector out into their own headers.

7001fc9d
5	1	c++/Makefile.am
3	0	c++/src/kj/common.h
10	24	c++/src/kj/parse-test.c++
13	226	c++/src/kj/parse.h
90	0	c++/src/kj/tuple-test.c++
350	0	c++/src/kj/tuple.h
83	0	c++/src/kj/vector.h

--b5cd7147	2013-06-11T14:57:57-07:00	Kenton Varda	temporal@gmail.com	Add file that should have been added earlier.

b5cd7147
2	0	c++/Makefile.am
96	0	c++/src/kj/exception-test.c++

--1b141940	2013-06-11T14:57:20-07:00	Kenton Varda	temporal@gmail.com	Add Parser combinator framework to KJ (WIP).

1b141940
7	0	c++/src/kj/array.h
266	0	c++/src/kj/parse-test.c++
788	0	c++/src/kj/parse.h
1	0	c++/src/kj/string.h

--d534ef9b	2013-06-10T13:34:29-07:00	Kenton Varda	temporal@gmail.com	KJ_EXPECT_{TRUE,FALSE} -> KJ_{,UN}LIKELY

d534ef9b
1	1	c++/src/capnp/arena.h
5	5	c++/src/capnp/layout.c++
3	3	c++/src/kj/common.h
1	1	c++/src/kj/debug.h

--0182074e	2013-06-10T11:41:15-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #13 from dwrensha/master

update automake include directory to capnp
0182074e
--4e6781a2	2013-06-10T10:35:15-04:00	David Renshaw	dwrenshaw@gmail.com	update installation documentation

4e6781a2
1	1	doc/install.md

--933bfa21	2013-06-10T10:23:38-04:00	David Renshaw	dwrenshaw@gmail.com	change automake include dir from capnproto to capnp

933bfa21
1	1	c++/Makefile.am

--40a52033	2013-06-07T16:11:39-07:00	Kenton Varda	temporal@gmail.com	Mark every destructor "noexcept(false)" unless it is very clearly noexcept.  The change in C++11 making destructors default-noexcept was a mistake.

40a52033
3	3	c++/src/capnp/arena.c++
3	3	c++/src/capnp/arena.h
1	1	c++/src/capnp/benchmark/capnproto-common.h
0	2	c++/src/capnp/benchmark/capnproto-eval.c++
1	1	c++/src/capnp/benchmark/common.h
4	4	c++/src/capnp/message.c++
4	4	c++/src/capnp/message.h
1	1	c++/src/capnp/schema-loader.c++
1	1	c++/src/capnp/schema-loader.h
4	4	c++/src/capnp/serialize-packed.c++
4	4	c++/src/capnp/serialize-packed.h
3	3	c++/src/capnp/serialize-snappy.c++
2	2	c++/src/capnp/serialize-snappy.h
2	2	c++/src/kj/array.c++
3	3	c++/src/kj/array.h
1	1	c++/src/kj/common.h
1	1	c++/src/kj/debug.c++
1	1	c++/src/kj/debug.h
2	2	c++/src/kj/exception.c++
1	1	c++/src/kj/exception.h
2	2	c++/src/kj/io.c++
2	2	c++/src/kj/io.h
1	1	c++/src/kj/memory.c++
2	2	c++/src/kj/memory.h

--af6bb032	2013-06-07T15:30:59-07:00	Kenton Varda	temporal@gmail.com	Add mechanism for catching exceptions that has limited use even with -fno-exceptions, as well as a mechanism to detect when a destructor is called during unwind and to avoid throwing in these situations.

af6bb032
16	8	c++/src/capnp/encoding-test.c++
1	1	c++/src/capnp/message.c++
1	1	c++/src/capnp/message.h
3	9	c++/src/capnp/serialize-snappy.c++
3	1	c++/src/capnp/serialize-snappy.h
12	8	c++/src/capnp/serialize-test.c++
4	11	c++/src/capnp/serialize.c++
4	2	c++/src/capnp/serialize.h
13	13	c++/src/kj/debug-test.c++
85	3	c++/src/kj/exception.c++
83	1	c++/src/kj/exception.h
14	19	c++/src/kj/io.c++
12	9	c++/src/kj/io.h

--c75d4bda	2013-06-06T17:04:22-07:00	Kenton Varda	temporal@gmail.com	Properly detect and support non-little-endian architectures.

c75d4bda
56	52	c++/Makefile.am
1	1	c++/configure.ac
26	0	c++/src/capnp/endian-fallback-test.c++
108	0	c++/src/capnp/endian-reverse-test.c++
109	0	c++/src/capnp/endian-test.c++
253	0	c++/src/capnp/endian.h
2	24	c++/src/capnp/layout.h

--aa8c3de4	2013-06-06T04:11:24-07:00	Kenton Varda	temporal@gmail.com	kj::Log -> kj::_::Debug

aa8c3de4
2	2	c++/src/kj/common.c++
2	2	c++/src/kj/debug-test.c++
16	14	c++/src/kj/debug.c++
62	57	c++/src/kj/debug.h

--455781b6	2013-06-06T03:52:39-07:00	Kenton Varda	temporal@gmail.com	Straggler from renames.

455781b6
1	1	.gitignore

--aa654991	2013-06-06T03:50:25-07:00	Kenton Varda	temporal@gmail.com	namespace internal -> namespace _

aa654991
2	2	c++/src/capnp/arena.c++
2	2	c++/src/capnp/arena.h
17	17	c++/src/capnp/common.h
1	1	c++/src/capnp/compiler/capnpc-capnp.c++
2	2	c++/src/capnp/dynamic-test.c++
57	57	c++/src/capnp/dynamic.c++
39	39	c++/src/capnp/dynamic.h
2	2	c++/src/capnp/encoding-test.c++
3	3	c++/src/capnp/generated-header-support.h
2	2	c++/src/capnp/layout-test.c++
2	2	c++/src/capnp/layout.c++
8	8	c++/src/capnp/layout.h
108	108	c++/src/capnp/list.h
2	2	c++/src/capnp/message-test.c++
21	21	c++/src/capnp/message.c++
12	12	c++/src/capnp/message.h
2	2	c++/src/capnp/schema-loader-test.c++
29	29	c++/src/capnp/schema-loader.c++
2	2	c++/src/capnp/schema-loader.h
2	2	c++/src/capnp/schema-test.c++
3	3	c++/src/capnp/schema.c++
18	18	c++/src/capnp/schema.h
2	2	c++/src/capnp/serialize-packed-test.c++
3	3	c++/src/capnp/serialize-packed.c++
3	3	c++/src/capnp/serialize-packed.h
2	2	c++/src/capnp/serialize-snappy-test.c++
2	2	c++/src/capnp/serialize-test.c++
7	7	c++/src/capnp/serialize.c++
2	2	c++/src/capnp/stringify-test.c++
2	2	c++/src/capnp/stringify.c++
2	2	c++/src/capnp/test-util.c++
2	2	c++/src/capnp/test-util.h
2	2	c++/src/kj/array.c++
10	10	c++/src/kj/array.h
2	2	c++/src/kj/common.c++
16	16	c++/src/kj/common.h
2	2	c++/src/kj/debug-test.c++
5	5	c++/src/kj/debug.c++
9	9	c++/src/kj/memory.h
2	2	c++/src/kj/string-test.c++
6	6	c++/src/kj/string.c++
11	11	c++/src/kj/string.h
26	26	compiler/src/c++-header.mustache
7	7	compiler/src/c++-source.mustache

--55826685	2013-06-06T03:41:18-07:00	Kenton Varda	temporal@gmail.com	CAPNPROTO_ -> CAPNP_

55826685
1	1	c++/src/capnp/arena.c++
4	4	c++/src/capnp/arena.h
3	3	c++/src/capnp/benchmark/capnproto-common.h
3	3	c++/src/capnp/benchmark/common.h
3	3	c++/src/capnp/blob.h
3	3	c++/src/capnp/common.h
54	54	c++/src/capnp/dynamic.h
11	11	c++/src/capnp/generated-header-support.h
1	1	c++/src/capnp/layout-test.c++
1	1	c++/src/capnp/layout.c++
3	3	c++/src/capnp/layout.h
3	3	c++/src/capnp/list.h
1	1	c++/src/capnp/message.c++
3	3	c++/src/capnp/message.h
1	1	c++/src/capnp/schema-loader.c++
3	3	c++/src/capnp/schema-loader.h
3	3	c++/src/capnp/schema.h
3	3	c++/src/capnp/serialize-packed.h
3	3	c++/src/capnp/serialize-snappy.h
2	2	c++/src/capnp/serialize.h
2	2	c++/src/capnp/test-util.h
1	1	compiler/src/CxxGenerator.hs
4	4	compiler/src/c++-header.mustache
4	4	compiler/src/c++-source.mustache

--f1b07de7	2013-06-06T03:37:20-07:00	Kenton Varda	temporal@gmail.com	Update docs for namespace change.

f1b07de7
61	61	doc/cxx.md

--4a9d3471	2013-06-06T03:35:29-07:00	Kenton Varda	temporal@gmail.com	namespace capnproto -> capnp, phase 2

4a9d3471
0	0	c++/src/{capnproto => capnp}/arena.c++
0	0	c++/src/{capnproto => capnp}/arena.h
0	0	c++/src/{capnproto => capnp}/benchmark/capnproto-carsales.c++
0	0	c++/src/{capnproto => capnp}/benchmark/capnproto-catrank.c++
0	0	c++/src/{capnproto => capnp}/benchmark/capnproto-common.h
0	0	c++/src/{capnproto => capnp}/benchmark/capnproto-eval.c++
0	0	c++/src/{capnproto => capnp}/benchmark/carsales.capnp
1	1	c++/src/{capnproto => capnp}/benchmark/carsales.proto
0	0	c++/src/{capnproto => capnp}/benchmark/catrank.capnp
1	1	c++/src/{capnproto => capnp}/benchmark/catrank.proto
0	0	c++/src/{capnproto => capnp}/benchmark/common.h
0	0	c++/src/{capnproto => capnp}/benchmark/eval.capnp
1	1	c++/src/{capnproto => capnp}/benchmark/eval.proto
0	0	c++/src/{capnproto => capnp}/benchmark/null-carsales.c++
0	0	c++/src/{capnproto => capnp}/benchmark/null-catrank.c++
0	0	c++/src/{capnproto => capnp}/benchmark/null-common.h
0	0	c++/src/{capnproto => capnp}/benchmark/null-eval.c++
0	0	c++/src/{capnproto => capnp}/benchmark/protobuf-carsales.c++
0	0	c++/src/{capnproto => capnp}/benchmark/protobuf-catrank.c++
0	0	c++/src/{capnproto => capnp}/benchmark/protobuf-common.h
0	0	c++/src/{capnproto => capnp}/benchmark/protobuf-eval.c++
0	0	c++/src/{capnproto => capnp}/benchmark/runner.c++
0	0	c++/src/{capnproto => capnp}/blob-test.c++
0	0	c++/src/{capnproto => capnp}/blob.c++
0	0	c++/src/{capnproto => capnp}/blob.h
0	0	c++/src/{capnproto => capnp}/c++.capnp
0	0	c++/src/{capnproto => capnp}/capnpc.ekam-rule
0	0	c++/src/{capnproto => capnp}/common.h
0	0	c++/src/{capnproto => capnp}/compiler/capnpc-capnp.c++
0	0	c++/src/{capnproto => capnp}/dynamic-test.c++
0	0	c++/src/{capnproto => capnp}/dynamic.c++
0	0	c++/src/{capnproto => capnp}/dynamic.h
0	0	c++/src/{capnproto => capnp}/encoding-test.c++
0	0	c++/src/{capnproto => capnp}/generated-header-support.h
0	0	c++/src/{capnproto => capnp}/layout-test.c++
0	0	c++/src/{capnproto => capnp}/layout.c++
0	0	c++/src/{capnproto => capnp}/layout.h
0	0	c++/src/{capnproto => capnp}/list.c++
0	0	c++/src/{capnproto => capnp}/list.h
0	0	c++/src/{capnproto => capnp}/message-test.c++
0	0	c++/src/{capnproto => capnp}/message.c++
0	0	c++/src/{capnproto => capnp}/message.h
0	0	c++/src/{capnproto => capnp}/schema-loader-test.c++
0	0	c++/src/{capnproto => capnp}/schema-loader.c++
0	0	c++/src/{capnproto => capnp}/schema-loader.h
0	0	c++/src/{capnproto => capnp}/schema-test.c++
0	0	c++/src/{capnproto => capnp}/schema.c++
0	0	c++/src/{capnproto => capnp}/schema.capnp
0	0	c++/src/{capnproto => capnp}/schema.h
0	0	c++/src/{capnproto => capnp}/serialize-packed-test.c++
0	0	c++/src/{capnproto => capnp}/serialize-packed.c++
0	0	c++/src/{capnproto => capnp}/serialize-packed.h
0	0	c++/src/{capnproto => capnp}/serialize-snappy-test.c++
0	0	c++/src/{capnproto => capnp}/serialize-snappy.c++
0	0	c++/src/{capnproto => capnp}/serialize-snappy.h
0	0	c++/src/{capnproto => capnp}/serialize-test.c++
0	0	c++/src/{capnproto => capnp}/serialize.c++
0	0	c++/src/{capnproto => capnp}/serialize.h
0	0	c++/src/{capnproto => capnp}/stringify-test.c++
0	0	c++/src/{capnproto => capnp}/stringify.c++
0	0	c++/src/{capnproto => capnp}/test-import.capnp
0	0	c++/src/{capnproto => capnp}/test-util.c++
0	0	c++/src/{capnproto => capnp}/test-util.h
0	0	c++/src/{capnproto => capnp}/test.capnp

--0a49f998	2013-06-06T03:31:52-07:00	Kenton Varda	temporal@gmail.com	namespace capnproto -> capnp, phase 1

0a49f998
3	3	c++/src/capnproto/arena.c++
2	2	c++/src/capnproto/arena.h
5	5	c++/src/capnproto/benchmark/capnproto-carsales.c++
5	5	c++/src/capnproto/benchmark/capnproto-catrank.c++
5	5	c++/src/capnproto/benchmark/capnproto-common.h
5	5	c++/src/capnproto/benchmark/capnproto-eval.c++
2	2	c++/src/capnproto/benchmark/carsales.capnp
2	2	c++/src/capnproto/benchmark/catrank.capnp
2	2	c++/src/capnproto/benchmark/common.h
2	2	c++/src/capnproto/benchmark/eval.capnp
5	5	c++/src/capnproto/benchmark/null-carsales.c++
5	5	c++/src/capnproto/benchmark/null-catrank.c++
2	2	c++/src/capnproto/benchmark/null-common.h
5	5	c++/src/capnproto/benchmark/null-eval.c++
5	5	c++/src/capnproto/benchmark/protobuf-carsales.c++
5	5	c++/src/capnproto/benchmark/protobuf-catrank.c++
2	2	c++/src/capnproto/benchmark/protobuf-common.h
5	5	c++/src/capnproto/benchmark/protobuf-eval.c++
3	3	c++/src/capnproto/benchmark/runner.c++
2	2	c++/src/capnproto/blob-test.c++
2	2	c++/src/capnproto/blob.c++
2	2	c++/src/capnproto/blob.h
1	1	c++/src/capnproto/c++.capnp
2	2	c++/src/capnproto/common.h
3	3	c++/src/capnproto/compiler/capnpc-capnp.c++
2	2	c++/src/capnproto/dynamic-test.c++
2	2	c++/src/capnproto/dynamic.c++
10	10	c++/src/capnproto/dynamic.h
2	2	c++/src/capnproto/encoding-test.c++
2	2	c++/src/capnproto/generated-header-support.h
3	3	c++/src/capnproto/layout-test.c++
8	8	c++/src/capnproto/layout.c++
4	4	c++/src/capnproto/layout.h
2	2	c++/src/capnproto/list.c++
2	2	c++/src/capnproto/list.h
2	2	c++/src/capnproto/message-test.c++
2	2	c++/src/capnproto/message.c++
5	5	c++/src/capnproto/message.h
2	2	c++/src/capnproto/schema-loader-test.c++
2	2	c++/src/capnproto/schema-loader.c++
2	2	c++/src/capnproto/schema-loader.h
2	2	c++/src/capnproto/schema-test.c++
2	2	c++/src/capnproto/schema.c++
1	1	c++/src/capnproto/schema.capnp
3	3	c++/src/capnproto/schema.h
2	2	c++/src/capnproto/serialize-packed-test.c++
2	2	c++/src/capnproto/serialize-packed.c++
2	2	c++/src/capnproto/serialize-packed.h
2	2	c++/src/capnproto/serialize-snappy-test.c++
2	2	c++/src/capnproto/serialize-snappy.c++
2	2	c++/src/capnproto/serialize-snappy.h
2	2	c++/src/capnproto/serialize-test.c++
3	3	c++/src/capnproto/serialize.c++
2	2	c++/src/capnproto/serialize.h
2	2	c++/src/capnproto/stringify-test.c++
2	2	c++/src/capnproto/stringify.c++
2	2	c++/src/capnproto/test-util.c++
11	11	c++/src/capnproto/test-util.h
1	1	c++/src/capnproto/test.capnp
10	10	compiler/src/CxxGenerator.hs
62	62	compiler/src/c++-header.mustache
7	7	compiler/src/c++-source.mustache

--4dd9ac97	2013-06-06T03:24:35-07:00	Kenton Varda	temporal@gmail.com	Fix no-rtti.

4dd9ac97
2	2	c++/src/kj/common-test.c++

--31ef7c2d	2013-06-06T03:23:00-07:00	Kenton Varda	temporal@gmail.com	Fix GCC.

31ef7c2d
3	2	c++/Makefile.am
9	7	c++/src/kj/array-test.c++
1	2	c++/src/kj/array.h
7	0	c++/src/kj/common-test.c++
4	0	c++/src/kj/common.h
1	2	c++/src/kj/memory.h

--ec49e07a	2013-06-06T02:43:36-07:00	Kenton Varda	temporal@gmail.com	Use consistent naming style for structs that exist purely to specialize template aliases or functions.

ec49e07a
8	27	c++/src/capnproto/dynamic.h
33	33	c++/src/capnproto/generated-header-support.h
26	26	c++/src/capnproto/layout.h
10	22	c++/src/capnproto/list.h
0	4	c++/src/kj/common.h

--059c50d4	2013-06-06T02:29:22-07:00	Kenton Varda	temporal@gmail.com	Well, that wasn't supposed to work...

059c50d4
1	1	c++/src/capnproto/message.c++

--9d103817	2013-06-06T02:28:12-07:00	Kenton Varda	temporal@gmail.com	iterator -> Iterator.  You should be auto-ing it anyway.

9d103817
6	6	c++/src/capnproto/dynamic.h
24	24	c++/src/capnproto/list.h
9	9	c++/src/capnproto/schema.h

--9227a0f3	2013-06-06T02:19:44-07:00	Kenton Varda	temporal@gmail.com	Eliminate RemoveReference -- all uses turned out to be unnecessary or outright wrong.

9227a0f3
4	4	c++/src/capnproto/dynamic.c++
1	1	c++/src/capnproto/dynamic.h
3	3	c++/src/capnproto/list.h
1	1	c++/src/capnproto/schema.c++
3	3	c++/src/kj/array.h
13	8	c++/src/kj/common-test.c++
14	38	c++/src/kj/common.h
1	1	c++/src/kj/memory.h

--2fc62718	2013-06-06T01:58:20-07:00	Kenton Varda	temporal@gmail.com	Remove unnecessary CAPNPROTO_PRIVATEs.

2fc62718
0	1	c++/src/capnproto/benchmark/capnproto-common.h
0	2	c++/src/capnproto/compiler/capnpc-capnp.c++
0	1	c++/src/capnproto/dynamic-test.c++
0	1	c++/src/capnproto/dynamic.c++
0	1	c++/src/capnproto/encoding-test.c++
0	4	c++/src/capnproto/generated-header-support.h
0	1	c++/src/capnproto/schema-loader-test.c++
0	1	c++/src/capnproto/schema.c++
0	1	c++/src/capnproto/serialize-packed-test.c++
0	1	c++/src/capnproto/serialize-packed.c++
0	1	c++/src/capnproto/serialize-snappy-test.c++
0	1	c++/src/capnproto/serialize-snappy.c++
0	1	c++/src/capnproto/serialize-test.c++
0	1	c++/src/capnproto/serialize.c++
0	1	c++/src/capnproto/stringify-test.c++
0	1	c++/src/capnproto/stringify.c++

--664b5636	2013-06-06T01:51:49-07:00	Kenton Varda	temporal@gmail.com	Irrelevant cleanup.

664b5636
7	7	c++/src/capnproto/dynamic.h

--eafb3fbc	2013-06-06T01:37:34-07:00	Kenton Varda	temporal@gmail.com	Delete default constructor in namespace classes.

eafb3fbc
2	0	c++/src/capnproto/blob.h
5	0	c++/src/capnproto/dynamic.h
8	0	c++/src/capnproto/list.h
2	0	compiler/src/c++-header.mustache

--00616e70	2013-06-06T01:20:36-07:00	Kenton Varda	temporal@gmail.com	Replace all std::unique_ptr<T> with kj::Own<T>.

00616e70
50	37	c++/src/capnproto/arena.c++
4	5	c++/src/capnproto/arena.h
10	5	c++/src/capnproto/message.c++
2	3	c++/src/capnproto/message.h
2	1	c++/src/capnproto/serialize.c++
20	0	c++/src/kj/common-test.c++
9	0	c++/src/kj/common.h
4	6	c++/src/kj/exception.c++
1	1	c++/src/kj/exception.h
71	0	c++/src/kj/memory.h

--03974a96	2013-06-06T00:20:53-07:00	Kenton Varda	temporal@gmail.com	Correct 'segment' to 'section' in places that clearly meant 'section'.

03974a96
3	3	c++/src/capnproto/layout-test.c++
3	3	c++/src/capnproto/layout.c++
10	10	c++/src/capnproto/layout.h

--eba66ff5	2013-06-05T23:15:33-07:00	Kenton Varda	temporal@gmail.com	Enable Own<const T> and Array<const T>.

eba66ff5
21	0	c++/src/kj/array-test.c++
26	8	c++/src/kj/array.h
4	0	c++/src/kj/common.h
45	0	c++/src/kj/memory-test.c++
7	1	c++/src/kj/memory.h

--648839c3	2013-06-05T22:28:28-07:00	Kenton Varda	temporal@gmail.com	Enforce transitive constness for Maybe<T&> and Array<T>.

648839c3
33	12	c++/src/capnproto/blob.h
2	12	c++/src/capnproto/layout.h
1	1	c++/src/capnproto/test-util.h
17	0	c++/src/kj/common-test.c++
84	19	c++/src/kj/common.h

--b7e1266b	2013-06-05T18:27:56-07:00	Kenton Varda	temporal@gmail.com	Improve const-correctness of readers and builders.  We enforce transitive constness, meaning you should not be able to construct a mutable Builder from a const Builder (you can always convert them to Readers instead).

b7e1266b
47	46	c++/src/capnproto/dynamic.c++
91	90	c++/src/capnproto/dynamic.h
31	31	c++/src/capnproto/layout.c++
69	61	c++/src/capnproto/layout.h
30	30	c++/src/capnproto/list.h
45	41	c++/src/capnproto/schema-loader.c++
1	1	c++/src/capnproto/schema-loader.h
12	12	c++/src/capnproto/schema.c++
17	17	c++/src/capnproto/schema.h
10	10	c++/src/capnproto/stringify.c++
17	17	compiler/src/c++-header.mustache

--b4953e9d	2013-06-05T13:46:04-07:00	Kenton Varda	temporal@gmail.com	Retrofit blob readers/builders on top of kj::ArrayPtr and kj::StringPtr.

b4953e9d
5	5	c++/src/capnproto/benchmark/capnproto-catrank.c++
54	54	c++/src/capnproto/blob-test.c++
88	153	c++/src/capnproto/blob.h
9	29	c++/src/capnproto/dynamic.c++
0	1	c++/src/capnproto/dynamic.h
3	3	c++/src/capnproto/encoding-test.c++
12	10	c++/src/capnproto/layout.c++
2	2	c++/src/capnproto/layout.h
2	2	c++/src/capnproto/schema-loader-test.c++
35	14	c++/src/capnproto/serialize-packed-test.c++
12	4	c++/src/capnproto/stringify.c++
20	20	c++/src/capnproto/test-util.c++
8	4	c++/src/capnproto/test-util.h

--1b468272	2013-06-05T12:46:06-07:00	Kenton Varda	temporal@gmail.com	Misc tweaks.

1b468272
13	1	c++/src/kj/common.h
4	3	c++/src/kj/exception.c++
19	5	c++/src/kj/string.h

--c247947b	2013-06-04T04:16:16-07:00	Kenton Varda	temporal@gmail.com	Missing include, doesn't break build on Linux but reports suggest it breaks OSX?

c247947b
1	0	c++/src/kj/io.c++

--e5e66f13	2013-06-04T04:11:35-07:00	Kenton Varda	temporal@gmail.com	Warning-related tweaks.

e5e66f13
1	1	c++/src/capnproto/common.h
4	4	c++/src/kj/common.h
1	1	c++/src/kj/exception.c++

--d60914ca	2013-06-04T03:14:30-07:00	Kenton Varda	temporal@gmail.com	Include file/line of stack trace locations in exception description, if possible.

d60914ca
2	0	c++/src/kj/common.h
4	4	c++/src/kj/debug-test.c++
54	1	c++/src/kj/exception.c++

--6632dc8d	2013-06-04T01:42:11-07:00	Kenton Varda	temporal@gmail.com	Refactor exception handling a bunch.

6632dc8d
18	9	c++/src/kj/debug-test.c++
29	15	c++/src/kj/debug.c++
25	16	c++/src/kj/debug.h
95	32	c++/src/kj/exception.c++
26	31	c++/src/kj/exception.h
4	0	c++/src/kj/string.h

--cd02679f	2013-06-03T22:28:04-07:00	Kenton Varda	temporal@gmail.com	Don't include <exception> in exception.h, but still throw object implementing std::exception.

cd02679f
32	2	c++/src/kj/common.h
33	8	c++/src/kj/debug-test.c++
51	34	c++/src/kj/exception.c++
10	5	c++/src/kj/exception.h

--7a830031	2013-06-03T20:08:44-07:00	Kenton Varda	temporal@gmail.com	Fix outdated include guards.

7a830031
3	3	c++/src/kj/debug.h
3	3	c++/src/kj/units.h

--533ece10	2013-06-03T20:06:41-07:00	Kenton Varda	temporal@gmail.com	logging -> debug

533ece10
3	3	c++/Makefile.am
1	1	c++/src/capnproto/arena.c++
1	1	c++/src/capnproto/benchmark/capnproto-common.h
1	1	c++/src/capnproto/compiler/capnpc-capnp.c++
1	1	c++/src/capnproto/dynamic-test.c++
1	1	c++/src/capnproto/dynamic.c++
1	1	c++/src/capnproto/encoding-test.c++
1	1	c++/src/capnproto/layout.c++
1	1	c++/src/capnproto/message.c++
1	1	c++/src/capnproto/schema-loader-test.c++
1	1	c++/src/capnproto/schema-loader.c++
1	1	c++/src/capnproto/schema.c++
1	1	c++/src/capnproto/serialize-packed-test.c++
1	1	c++/src/capnproto/serialize-packed.c++
1	1	c++/src/capnproto/serialize-snappy-test.c++
1	1	c++/src/capnproto/serialize-snappy.c++
1	1	c++/src/capnproto/serialize-test.c++
1	1	c++/src/capnproto/serialize.c++
1	1	c++/src/capnproto/stringify-test.c++
1	1	c++/src/capnproto/stringify.c++
1	1	c++/src/kj/array-test.c++
1	1	c++/src/kj/common.c++
1	1	c++/src/kj/{logging-test.c++ => debug-test.c++}
1	1	c++/src/kj/{logging.c++ => debug.c++}
0	0	c++/src/kj/{logging.h => debug.h}
1	1	c++/src/kj/exception.c++
1	1	c++/src/kj/io.c++
1	1	c++/src/kj/string.c++

--db505f42	2013-06-03T20:02:35-07:00	Kenton Varda	temporal@gmail.com	Refactor assertion macros, specifically with regards to recoverability.

db505f42
7	3	c++/src/capnproto/arena.c++
41	34	c++/src/capnproto/dynamic.c++
94	79	c++/src/capnproto/layout.c++
1	1	c++/src/capnproto/message.c++
5	5	c++/src/capnproto/schema-loader.c++
7	9	c++/src/capnproto/serialize-packed.c++
2	1	c++/src/capnproto/serialize-snappy.c++
7	5	c++/src/capnproto/serialize.c++
3	1	c++/src/capnproto/stringify.c++
4	2	c++/src/kj/common.c++
1	1	c++/src/kj/common.h
2	3	c++/src/kj/exception.c++
0	1	c++/src/kj/exception.h
14	7	c++/src/kj/io.c++
28	6	c++/src/kj/logging-test.c++
24	34	c++/src/kj/logging.c++
92	165	c++/src/kj/logging.h

--850af66a	2013-06-03T13:46:20-07:00	Kenton Varda	temporal@gmail.com	Add KJ_ prefix to logging/assert macros.

850af66a
1	1	c++/src/capnproto/arena.c++
1	1	c++/src/capnproto/benchmark/capnproto-common.h
11	11	c++/src/capnproto/compiler/capnpc-capnp.c++
67	67	c++/src/capnproto/dynamic.c++
1	1	c++/src/capnproto/encoding-test.c++
24	23	c++/src/capnproto/layout.c++
7	7	c++/src/capnproto/message.c++
15	15	c++/src/capnproto/schema-loader.c++
18	18	c++/src/capnproto/schema.c++
2	2	c++/src/capnproto/serialize-packed-test.c++
11	11	c++/src/capnproto/serialize-packed.c++
2	2	c++/src/capnproto/serialize-snappy-test.c++
3	3	c++/src/capnproto/serialize-snappy.c++
1	1	c++/src/capnproto/serialize-test.c++
3	3	c++/src/capnproto/serialize.c++
3	3	c++/src/kj/array-test.c++
2	2	c++/src/kj/common.h
6	6	c++/src/kj/io.c++
16	16	c++/src/kj/logging-test.c++
37	37	c++/src/kj/logging.h
4	4	c++/src/kj/string.c++

--a7933e07	2013-06-03T13:26:44-07:00	Kenton Varda	temporal@gmail.com	Update docs to mention KJ.

a7933e07
19	16	doc/cxx.md

--5e4ec0b2	2013-06-03T13:05:25-07:00	Kenton Varda	temporal@gmail.com	Fix some recent bugs.

5e4ec0b2
1	1	c++/Makefile.am
5	3	c++/src/kj/logging.c++

--6d346575	2013-06-03T12:30:33-07:00	Kenton Varda	temporal@gmail.com	CHECK -> ASSERT

6d346575
2	2	c++/src/capnproto/arena.c++
2	2	c++/src/capnproto/compiler/capnpc-capnp.c++
25	25	c++/src/capnproto/dynamic.c++
1	1	c++/src/capnproto/encoding-test.c++
13	13	c++/src/capnproto/layout.c++
3	3	c++/src/capnproto/message.c++
3	3	c++/src/capnproto/schema-loader.c++
2	2	c++/src/capnproto/serialize-packed-test.c++
8	8	c++/src/capnproto/serialize-packed.c++
2	2	c++/src/capnproto/serialize-snappy-test.c++
3	3	c++/src/capnproto/serialize-snappy.c++
1	1	c++/src/capnproto/serialize-test.c++
1	1	c++/src/capnproto/serialize.c++
1	1	c++/src/capnproto/stringify.c++
3	3	c++/src/kj/array-test.c++
2	2	c++/src/kj/io.c++
9	9	c++/src/kj/logging-test.c++
14	14	c++/src/kj/logging.h
4	4	c++/src/kj/string.c++

--20272ec5	2013-06-01T12:29:51-07:00	Kenton Varda	temporal@gmail.com	PRECOND -> REQUIRE

20272ec5
1	1	c++/src/capnproto/benchmark/capnproto-common.h
5	5	c++/src/capnproto/blob.h
9	9	c++/src/capnproto/compiler/capnpc-capnp.c++
67	67	c++/src/capnproto/dynamic.c++
14	14	c++/src/capnproto/layout.c++
4	4	c++/src/capnproto/message.c++
4	4	c++/src/capnproto/schema-loader.c++
18	18	c++/src/capnproto/schema.c++
3	3	c++/src/capnproto/serialize-packed.c++
2	2	c++/src/capnproto/serialize.c++
6	6	c++/src/kj/array.h
1	1	c++/src/kj/common.c++
10	13	c++/src/kj/common.h
1	1	c++/src/kj/exception.c++
1	1	c++/src/kj/io.c++
1	1	c++/src/kj/logging-test.c++
10	10	c++/src/kj/logging.h
1	1	c++/src/kj/string.h
8	8	compiler/src/c++-header.mustache

--5b65179c	2013-05-31T04:52:20-07:00	Kenton Varda	temporal@gmail.com	type-safety -> units

5b65179c
3	3	c++/Makefile.am
1	1	c++/src/capnproto/common.h
1	1	c++/src/kj/{type-safety-test.c++ => units-test.c++}
1	1	c++/src/kj/{type-safety.c++ => units.c++}
1	1	c++/src/kj/{type-safety.h => units.h}

--5bec541e	2013-05-31T04:31:13-07:00	Kenton Varda	temporal@gmail.com	tweaks

5bec541e
1	1	c++/src/kj/array-test.c++
0	1	c++/src/kj/array.c++
0	5	c++/src/kj/common.c++
1	1	c++/src/kj/io.c++
4	4	c++/src/kj/io.h
0	2	c++/src/kj/type-safety.h

--4cbb1a4d	2013-05-31T02:22:43-07:00	Kenton Varda	temporal@gmail.com	Update Makefile.am

4cbb1a4d
26	16	c++/Makefile.am
1	2	c++/src/capnproto/serialize-packed.c++
2	0	c++/src/kj/common-test.c++

--36c3f8e9	2013-05-31T02:07:09-07:00	Kenton Varda	temporal@gmail.com	Stringification for all.

36c3f8e9
15	0	c++/src/capnproto/blob.h
7	10	c++/src/capnproto/compiler/capnpc-capnp.c++
21	0	c++/src/capnproto/dynamic.c++
23	1	c++/src/capnproto/dynamic.h
29	4	c++/src/capnproto/generated-header-support.h
1	0	c++/src/capnproto/layout.h
4	6	c++/src/capnproto/schema-loader-test.c++
3	1	c++/src/capnproto/schema.h
38	10	c++/src/capnproto/stringify-test.c++
22	6	c++/src/capnproto/stringify.c++
0	37	c++/src/capnproto/stringify.h
6	0	c++/src/capnproto/test.capnp
8	0	c++/src/kj/common.h
5	5	c++/src/kj/exception.c++
2	3	c++/src/kj/exception.h
6	6	c++/src/kj/logging.c++
2	2	c++/src/kj/logging.h
2	2	c++/src/kj/{util-test.c++ => string-test.c++}
281	0	c++/src/kj/string.c++
172	0	c++/src/kj/string.h
0	303	c++/src/kj/util.c++
0	182	c++/src/kj/util.h
4	0	compiler/src/Compiler.hs
3	0	compiler/src/CxxGenerator.hs
1	0	compiler/src/Semantics.hs
26	4	compiler/src/c++-header.mustache
4	0	compiler/src/c++-source.mustache

--47194adc	2013-05-30T23:55:51-07:00	Kenton Varda	temporal@gmail.com	Move FixedArray and CappedArray to array.h.

47194adc
66	0	c++/src/kj/array.h
0	80	c++/src/kj/util.h

--ad611c13	2013-05-30T23:28:00-07:00	Kenton Varda	temporal@gmail.com	Improve String.

ad611c13
1	1	c++/src/capnproto/stringify.c++
19	0	c++/src/kj/array-test.c++
34	8	c++/src/kj/array.h
9	1	c++/src/kj/common.h
8	9	c++/src/kj/exception.c++
8	7	c++/src/kj/exception.h
1	2	c++/src/kj/logging-test.c++
24	28	c++/src/kj/logging.c++
15	15	c++/src/kj/logging.h
11	0	c++/src/kj/memory.h
9	5	c++/src/kj/string.c++
155	13	c++/src/kj/string.h
4	9	c++/src/kj/util-test.c++
0	1	c++/src/kj/util.c++
12	18	c++/src/kj/util.h

--4958d3a4	2013-05-30T21:12:54-07:00	Kenton Varda	temporal@gmail.com	Improve heap allocation.

4958d3a4
4	4	c++/src/capnproto/compiler/capnpc-capnp.c++
1	1	c++/src/capnproto/schema-loader.c++
1	0	c++/src/capnproto/schema-loader.h
3	3	c++/src/capnproto/serialize-snappy.c++
1	1	c++/src/capnproto/serialize-test.c++
4	4	c++/src/capnproto/serialize.c++
287	0	c++/src/kj/array-test.c++
80	0	c++/src/kj/array.c++
335	54	c++/src/kj/array.h
2	2	c++/src/kj/common.h
1	1	c++/src/kj/exception.c++
1	0	c++/src/kj/exception.h
2	2	c++/src/kj/io.c++
1	1	c++/src/kj/logging.c++
72	30	c++/src/kj/memory.h
2	2	c++/src/kj/string.c++
4	4	c++/src/kj/util.h

--f9ee42ce	2013-05-30T03:57:48-07:00	Kenton Varda	temporal@gmail.com	Split array and string stuff out of type-safety.h.

f9ee42ce
1	0	c++/src/capnproto/generated-header-support.h
1	12	c++/src/kj/{type-safety.c++ => array.c++}
186	0	c++/src/kj/array.h
57	0	c++/src/kj/common.h
1	1	c++/src/kj/exception.h
1	1	c++/src/kj/io.h
6	6	c++/src/kj/logging.c++
1	10	c++/src/kj/{type-safety.c++ => memory.c++}
143	0	c++/src/kj/memory.h
1	3	c++/src/kj/{type-safety.c++ => string.c++}
38	8	c++/src/kj/{type-safety.c++ => string.h}
0	11	c++/src/kj/type-safety.c++
0	343	c++/src/kj/type-safety.h
2	1	c++/src/kj/util.h

--80f24a34	2013-05-30T02:36:30-07:00	Kenton Varda	temporal@gmail.com	tweaks

80f24a34
18	6	c++/src/kj/common.h
2	2	c++/src/kj/exception.c++
0	4	c++/src/kj/util.h

--bdb86c21	2013-05-29T23:57:34-07:00	Kenton Varda	temporal@gmail.com	Move Maybe into common.h and improve its interface.

bdb86c21
15	16	c++/src/capnproto/dynamic-test.c++
21	18	c++/src/capnproto/dynamic.c++
23	29	c++/src/capnproto/schema-test.c++
16	8	c++/src/capnproto/schema.c++
8	11	c++/src/capnproto/stringify.c++
11	6	c++/src/capnproto/test-util.c++
193	0	c++/src/kj/common-test.c++
277	4	c++/src/kj/common.h
16	8	c++/src/kj/exception.c++
3	3	c++/src/kj/exception.h
0	208	c++/src/kj/type-safety.h

--328c9a83	2013-05-29T20:06:44-07:00	Kenton Varda	temporal@gmail.com	kj/common.h

328c9a83
1	1	c++/src/capnproto/arena.h
1	1	c++/src/capnproto/blob.h
1	0	c++/src/capnproto/common.h
16	16	c++/src/capnproto/compiler/capnpc-capnp.c++
4	4	c++/src/capnproto/dynamic.c++
1	1	c++/src/capnproto/layout.h
1	1	c++/src/capnproto/list.h
2	2	c++/src/capnproto/message.h
1	1	c++/src/capnproto/serialize-packed.c++
1	1	c++/src/capnproto/serialize.c++
1	1	c++/src/capnproto/serialize.h
1	2	c++/src/kj/{macros.c++ => common.c++}
239	0	c++/src/kj/common.h
2	2	c++/src/kj/exception.c++
1	1	c++/src/kj/exception.h
3	3	c++/src/kj/io.h
2	2	c++/src/kj/logging.c++
0	125	c++/src/kj/macros.h
13	53	c++/src/kj/type-safety.h
3	3	compiler/src/c++-header.mustache

--ed6b71aa	2013-05-29T15:40:28-07:00	Kenton Varda	temporal@gmail.com	Also add io.{h,c++} to KJ.

ed6b71aa
12	12	c++/src/capnproto/benchmark/capnproto-common.h
219	0	c++/src/capnproto/common.h
5	5	c++/src/capnproto/compiler/capnpc-capnp.c++
3	3	c++/src/capnproto/serialize-packed-test.c++
10	9	c++/src/capnproto/serialize-packed.c++
15	15	c++/src/capnproto/serialize-packed.h
1	1	c++/src/capnproto/serialize-snappy-test.c++
1	1	c++/src/capnproto/serialize-snappy.c++
5	5	c++/src/capnproto/serialize-snappy.h
3	3	c++/src/capnproto/serialize-test.c++
3	3	c++/src/capnproto/serialize.c++
8	8	c++/src/capnproto/serialize.h
17	18	c++/src/{capnproto => kj}/io.c++
30	30	c++/src/{capnproto => kj}/io.h
1	0	c++/src/kj/type-safety.h

--c98eb066	2013-05-29T15:27:21-07:00	Kenton Varda	temporal@gmail.com	Spin off non-capnproto-specific stuff off into a separate library KJ (first pass).

c98eb066
6	6	c++/src/capnproto/arena.c++
25	25	c++/src/capnproto/arena.h
21	20	c++/src/capnproto/benchmark/capnproto-common.h
7	7	c++/src/capnproto/blob.h
38	36	c++/src/capnproto/compiler/capnpc-capnp.c++
5	5	c++/src/capnproto/dynamic-test.c++
9	9	c++/src/capnproto/dynamic.c++
7	7	c++/src/capnproto/dynamic.h
15	15	c++/src/capnproto/encoding-test.c++
2	2	c++/src/capnproto/generated-header-support.h
16	16	c++/src/capnproto/io.c++
32	32	c++/src/capnproto/io.h
5	5	c++/src/capnproto/layout-test.c++
52	52	c++/src/capnproto/layout.c++
22	22	c++/src/capnproto/layout.h
4	4	c++/src/capnproto/list.h
2	2	c++/src/capnproto/message-test.c++
11	11	c++/src/capnproto/message.c++
19	19	c++/src/capnproto/message.h
1	1	c++/src/capnproto/schema-loader-test.c++
19	19	c++/src/capnproto/schema-loader.c++
4	4	c++/src/capnproto/schema-loader.h
2	2	c++/src/capnproto/schema-test.c++
11	11	c++/src/capnproto/schema.c++
6	6	c++/src/capnproto/schema.h
7	7	c++/src/capnproto/serialize-packed-test.c++
14	13	c++/src/capnproto/serialize-packed.c++
11	10	c++/src/capnproto/serialize-packed.h
5	5	c++/src/capnproto/serialize-snappy-test.c++
14	13	c++/src/capnproto/serialize-snappy.c++
23	22	c++/src/capnproto/serialize-snappy.h
20	20	c++/src/capnproto/serialize-test.c++
17	16	c++/src/capnproto/serialize.c++
17	17	c++/src/capnproto/serialize.h
1	1	c++/src/capnproto/stringify-test.c++
8	8	c++/src/capnproto/stringify.c++
1	1	c++/src/capnproto/stringify.h
3	3	c++/src/{capnproto => kj}/exception.c++
10	10	c++/src/{capnproto => kj}/exception.h
3	3	c++/src/{capnproto => kj}/logging-test.c++
6	6	c++/src/{capnproto => kj}/logging.c++
25	29	c++/src/{capnproto => kj}/logging.h
3	3	c++/src/{capnproto => kj}/macros.c++
34	34	c++/src/{capnproto => kj}/macros.h
2	2	c++/src/{capnproto => kj}/type-safety-test.c++
2	2	c++/src/{capnproto => kj}/type-safety.c++
31	207	c++/src/{capnproto => kj}/type-safety.h
3	3	c++/src/{capnproto => kj}/util-test.c++
3	3	c++/src/{capnproto => kj}/util.c++
9	14	c++/src/{capnproto => kj}/util.h
13	13	compiler/src/c++-header.mustache

--7bef010c	2013-05-25T00:12:09-07:00	Kenton Varda	temporal@gmail.com	tweak

7bef010c
5	3	doc/install.md

--cd3374d4	2013-05-25T00:00:30-07:00	Kenton Varda	temporal@gmail.com	More clang updates.

cd3374d4
12	10	c++/Makefile.ekam
1	1	c++/configure.ac
17	6	c++/src/capnproto/benchmark/runner.c++
4	2	doc/cxx.md
4	2	doc/install.md

--7c4b96b5	2013-05-24T21:50:33-07:00	Kenton Varda	temporal@gmail.com	Make GDB work more nicely on Ekam-built binaries.

7c4b96b5
1	0	c++/ekam-provider/c++header
1	0	c++/ekam-provider/canonical
4	0	c++/ekam-provider/this-dir-is-to-trick-gdb.txt

--abf4ed59	2013-05-24T21:43:12-07:00	Kenton Varda	temporal@gmail.com	Support Clang compiler.

abf4ed59
6	0	c++/Makefile.ekam
2	1	c++/src/capnproto/compiler/capnpc-capnp.c++
28	28	c++/src/capnproto/dynamic.c++
8	7	c++/src/capnproto/dynamic.h
1	1	c++/src/capnproto/exception.h
11	1	c++/src/capnproto/generated-header-support.h
1	1	c++/src/capnproto/io.c++
2	4	c++/src/capnproto/layout.h
4	4	c++/src/capnproto/list.h
1	1	c++/src/capnproto/logging.c++
24	2	c++/src/capnproto/macros.h
2	2	c++/src/capnproto/message.h
7	7	c++/src/capnproto/schema-loader.c++
2	1	c++/src/capnproto/schema.h
22	22	c++/src/capnproto/serialize-snappy-test.c++
2	2	c++/src/capnproto/serialize.c++
4	4	c++/src/capnproto/type-safety.h
2	2	c++/src/capnproto/util.h
1	1	compiler/src/c++-header.mustache
18	1	compiler/src/c++-source.mustache

--eeae230c	2013-05-23T11:50:10-07:00	Kenton Varda	temporal@gmail.com	Review and classify TODOs.

eeae230c
11	11	c++/src/capnproto/arena.c++
4	4	c++/src/capnproto/arena.h
0	1	c++/src/capnproto/benchmark/capnproto-carsales.c++
0	1	c++/src/capnproto/benchmark/capnproto-eval.c++
1	1	c++/src/capnproto/benchmark/common.h
0	1	c++/src/capnproto/compiler/capnpc-capnp.c++
1	1	c++/src/capnproto/io.c++
0	4	c++/src/capnproto/io.h
0	1	c++/src/capnproto/layout-test.c++
1	1	c++/src/capnproto/layout.c++
3	3	c++/src/capnproto/layout.h
2	2	c++/src/capnproto/logging.c++
1	1	c++/src/capnproto/message-test.c++
0	4	c++/src/capnproto/schema.capnp
1	1	c++/src/capnproto/serialize-packed-test.c++
1	1	c++/src/capnproto/serialize-packed.c++
1	1	c++/src/capnproto/serialize-snappy-test.c++
1	1	c++/src/capnproto/serialize-snappy.c++
1	1	c++/src/capnproto/serialize-test.c++
3	2	c++/src/capnproto/serialize.c++
3	3	c++/src/capnproto/type-safety.h
1	1	c++/src/capnproto/util.h

--d7f3123c	2013-05-21T20:23:09-07:00	Kenton Varda	temporal@gmail.com	SchemaLoader -- lets you load and use schemas that aren't compiled in.

d7f3123c
3	0	c++/Makefile.am
94	94	c++/src/capnproto/compiler/capnpc-capnp.c++
53	429	c++/src/capnproto/dynamic-test.c++
0	16	c++/src/capnproto/dynamic.c++
4	12	c++/src/capnproto/dynamic.h
28	0	c++/src/capnproto/encoding-test.c++
11	0	c++/src/capnproto/exception.c++
4	0	c++/src/capnproto/exception.h
8	0	c++/src/capnproto/generated-header-support.h
1	1	c++/src/capnproto/layout.c++
7	10	c++/src/capnproto/logging.h
16	0	c++/src/capnproto/message.c++
35	5	c++/src/capnproto/message.h
224	0	c++/src/capnproto/schema-loader-test.c++
1139	0	c++/src/capnproto/schema-loader.c++
110	0	c++/src/capnproto/schema-loader.h
12	0	c++/src/capnproto/schema.c++
29	0	c++/src/capnproto/schema.h
452	0	c++/src/capnproto/test-util.c++
10	0	c++/src/capnproto/test-util.h
12	2	compiler/src/c++-header.mustache
2	1	compiler/src/c++-source.mustache

--bf04264d	2013-05-21T04:00:32-07:00	Kenton Varda	temporal@gmail.com	Implement ability to easily attach context to an exception on the way up the stack.

bf04264d
35	13	c++/src/capnproto/exception.c++
29	1	c++/src/capnproto/exception.h
43	4	c++/src/capnproto/logging-test.c++
22	0	c++/src/capnproto/logging.c++
60	0	c++/src/capnproto/logging.h
2	0	c++/src/capnproto/type-safety.c++
143	0	c++/src/capnproto/type-safety.h

--9058a3ae	2013-05-18T01:02:36-07:00	Kenton Varda	temporal@gmail.com	ARRRRGHHHH, these files should have been part of an earlier commit.

9058a3ae
152	0	c++/src/capnproto/stringify-test.c++
193	0	c++/src/capnproto/stringify.c++
37	0	c++/src/capnproto/stringify.h

--2331da3e	2013-05-18T01:02:03-07:00	Kenton Varda	temporal@gmail.com	Gracefully handle the case where the schema contains types from a newer version of Cap'n Proto that we don't know about yet.

2331da3e
42	46	c++/src/capnproto/dynamic.c++
12	5	c++/src/capnproto/dynamic.h
2	2	c++/src/capnproto/schema.c++
3	4	c++/src/capnproto/schema.capnp

--a1e067fb	2013-05-17T22:38:48-07:00	Kenton Varda	temporal@gmail.com	Rename 'trusted' messages to 'unchecked', since they don't have to be quite so trusted anymore.

a1e067fb
7	7	c++/src/capnproto/dynamic.c++
3	3	c++/src/capnproto/encoding-test.c++
6	6	c++/src/capnproto/generated-header-support.h
2	2	c++/src/capnproto/layout-test.c++
5	5	c++/src/capnproto/layout.c++
9	9	c++/src/capnproto/layout.h
17	12	c++/src/capnproto/message.h
1	1	c++/src/capnproto/schema.c++

--de15e658	2013-05-17T22:25:35-07:00	Kenton Varda	temporal@gmail.com	Don't trust trusted messages so much.  Just trust that the pointers are valid and in-bounds, but don't assume the data matches the schema.  This makes it easier to safely create a 'trusted' message: just copy any message into a MessageBuilder, and if it ends up all in one segment, it's safe to use.

de15e658
51	140	c++/src/capnproto/layout.c++
2	2	c++/src/capnproto/layout.h

--d7081cca	2013-05-17T21:51:56-07:00	Kenton Varda	temporal@gmail.com	totalSizeInWords() method on generated struct readers/builders returns total size of the struct, not counting far pointer overhead.  Useful for allocating space for a flat copy.  Also a couple misc tweaks.

d7081cca
10	0	c++/src/capnproto/arena.c++
8	0	c++/src/capnproto/arena.h
3	0	c++/src/capnproto/encoding-test.c++
3	3	c++/src/capnproto/exception.c++
4	4	c++/src/capnproto/exception.h
158	0	c++/src/capnproto/layout.c++
7	0	c++/src/capnproto/layout.h
2	2	c++/src/capnproto/logging-test.c++
6	6	c++/src/capnproto/logging.c++
2	0	c++/src/capnproto/message.h
7	2	compiler/src/c++-header.mustache
0	1	compiler/src/c++-source.mustache

--ecdd2ae4	2013-05-17T16:36:27-07:00	Kenton Varda	temporal@gmail.com	Add debugString() method to generated struct types.

ecdd2ae4
3	0	c++/Makefile.am
6	0	c++/src/capnproto/blob.h
19	4	c++/src/capnproto/dynamic-test.c++
140	0	c++/src/capnproto/dynamic.c++
15	2	c++/src/capnproto/dynamic.h
9	0	c++/src/capnproto/generated-header-support.h
8	0	c++/src/capnproto/layout.c++
4	0	c++/src/capnproto/layout.h
1	0	c++/src/capnproto/schema.h
4	4	c++/src/capnproto/test-util.c++
1	1	c++/src/capnproto/test.capnp
9	0	c++/src/capnproto/type-safety.c++
37	2	c++/src/capnproto/type-safety.h
1	0	c++/src/capnproto/util.h
6	0	compiler/src/c++-header.mustache

--5872cc4f	2013-05-16T20:17:21-07:00	Kenton Varda	temporal@gmail.com	These CHECKs should be recoverable...

5872cc4f
3	3	c++/src/capnproto/layout.c++

--2a37f18c	2013-05-16T20:00:17-07:00	Kenton Varda	temporal@gmail.com	When init()ing or set()ing a pointer that is already initialized, zero out the old value.

2a37f18c
18	0	c++/src/capnproto/encoding-test.c++
130	0	c++/src/capnproto/layout.c++

--e5dc9924	2013-05-16T17:31:52-07:00	Kenton Varda	temporal@gmail.com	When upgrading objects in builder, make sure to zero out the old location.

e5dc9924
63	22	c++/src/capnproto/encoding-test.c++
19	5	c++/src/capnproto/layout.c++

--35adf54b	2013-05-16T04:37:02-07:00	Kenton Varda	temporal@gmail.com	Implement ability to set() struct and list fields by deep-copying from a corresponding Reader.  This copy requires no schema knowledge.

35adf54b
10	34	c++/src/capnproto/dynamic.c++
0	3	c++/src/capnproto/dynamic.h
93	33	c++/src/capnproto/encoding-test.c++
11	6	c++/src/capnproto/generated-header-support.h
129	2	c++/src/capnproto/layout.c++
10	0	c++/src/capnproto/layout.h
43	48	c++/src/capnproto/list.h
6	0	c++/src/capnproto/message.c++
14	0	c++/src/capnproto/message.h
6	6	c++/src/capnproto/test-util.c++
19	4	compiler/src/c++-header.mustache

--d43aec91	2013-05-16T00:33:14-07:00	Kenton Varda	temporal@gmail.com	When getting a list from a builder, if the list elements are too small, upgrade it.

d43aec91
44	7	c++/src/capnproto/dynamic.c++
291	5	c++/src/capnproto/encoding-test.c++
4	4	c++/src/capnproto/layout-test.c++
357	20	c++/src/capnproto/layout.c++
25	5	c++/src/capnproto/layout.h
8	8	c++/src/capnproto/list.h
2	2	c++/src/capnproto/test.capnp
13	0	c++/src/capnproto/type-safety.h

--917f459e	2013-05-15T11:43:42-07:00	Kenton Varda	temporal@gmail.com	Mass rename 'reference' -> 'pointer'.  Been meaning to do this for a while -- all the documentation talks about 'pointers', not 'references'.

917f459e
34	34	c++/src/capnproto/dynamic.c++
8	8	c++/src/capnproto/dynamic.h
15	15	c++/src/capnproto/generated-header-support.h
26	26	c++/src/capnproto/layout-test.c++
341	341	c++/src/capnproto/layout.c++
68	68	c++/src/capnproto/layout.h
25	25	c++/src/capnproto/list.h
3	3	c++/src/capnproto/message.c++
1	1	c++/src/capnproto/serialize-packed-test.c++
16	16	c++/src/capnproto/type-safety.h
18	18	compiler/src/Compiler.hs
4	4	compiler/src/CxxGenerator.hs
11	11	compiler/src/Semantics.hs
34	34	compiler/src/WireFormat.hs
13	13	compiler/src/c++-header.mustache

--e550bee1	2013-05-14T17:52:23-07:00	Kenton Varda	temporal@gmail.com	When an under-sized struct is found while traversing a builder, upgrade it to the expected size.  This is needed to allow easy copying from readers to builders.  Next, this will need to be implemented for lists as well.

e550bee1
249	0	c++/src/capnproto/encoding-test.c++
96	12	c++/src/capnproto/layout.c++
5	0	c++/src/capnproto/macros.h
16	0	c++/src/capnproto/test.capnp

--0da638c0	2013-05-14T01:05:28-07:00	Kenton Varda	temporal@gmail.com	Nope, Red Carpet does NOT work.  Back to Maruku, which also does not work, but in a way that is easier to work around.

0da638c0
0	2	doc/_config.yml
0	2	doc/cxx.md

--8da4ae92	2013-05-14T00:55:15-07:00	Kenton Varda	temporal@gmail.com	Apparently lsi is off by default now?

8da4ae92
1	1	doc/push-site.sh

--fc1b2faa	2013-05-14T00:54:28-07:00	Kenton Varda	temporal@gmail.com	Update docs to describe dynamic API and compiler plugins.

fc1b2faa
3	0	c++/src/capnproto/dynamic.h
2	0	doc/_config.yml
185	1	doc/cxx.md
50	5	doc/otherlang.md
1	1	doc/push-site.sh

--45c23897	2013-05-13T21:00:29-07:00	Kenton Varda	temporal@gmail.com	Fix bug with dynamic unions.

45c23897
8	0	c++/src/capnproto/dynamic-test.c++
1	1	c++/src/capnproto/schema.c++
15	0	c++/src/capnproto/test.capnp
6	4	compiler/src/CxxGenerator.hs

--6e335427	2013-05-13T20:45:19-07:00	Kenton Varda	temporal@gmail.com	Mark some methods const.  Eventually they should all be const, but that's a TODO...

6e335427
2	2	c++/src/capnproto/dynamic.c++
8	8	c++/src/capnproto/dynamic.h

--150ce1b6	2013-05-13T20:17:53-07:00	Kenton Varda	temporal@gmail.com	Allow dynamically setting enum values using text literals.

150ce1b6
2	2	c++/src/capnproto/dynamic-test.c++
25	5	c++/src/capnproto/dynamic.c++
3	1	c++/src/capnproto/dynamic.h
17	0	doc/cxx.md

--f4d98110	2013-05-13T19:44:05-07:00	Kenton Varda	temporal@gmail.com	Add a test.

f4d98110
17	0	c++/src/capnproto/dynamic-test.c++

--aabaeeda	2013-05-13T19:27:20-07:00	Kenton Varda	temporal@gmail.com	Tweak preconditions in dynamic.c++.

aabaeeda
46	43	c++/src/capnproto/dynamic.c++

--b731cf8f	2013-05-13T15:28:17-07:00	Kenton Varda	temporal@gmail.com	Better check that schema matches exactly here.

b731cf8f
4	10	c++/src/capnproto/dynamic.c++
4	4	c++/src/capnproto/dynamic.h

--e5e34217	2013-05-13T15:15:00-07:00	Kenton Varda	temporal@gmail.com	Remove no-longer-needed index field from schema.capnp.

e5e34217
0	5	c++/src/capnproto/schema.capnp
5	7	compiler/src/WireFormat.hs

--252b516e	2013-05-13T15:10:10-07:00	Kenton Varda	temporal@gmail.com	Fix up Makefile.am.

252b516e
34	12	c++/Makefile.am

--07b979a3	2013-05-13T14:57:50-07:00	Kenton Varda	temporal@gmail.com	Test Dynamic API.

07b979a3
6	0	c++/Makefile.am
585	26	c++/src/capnproto/dynamic-test.c++
258	116	c++/src/capnproto/dynamic.c++
116	67	c++/src/capnproto/dynamic.h
14	7	c++/src/capnproto/layout.c++
1	1	c++/src/capnproto/layout.h
24	0	c++/src/capnproto/schema.c++
16	0	c++/src/capnproto/schema.h
1	1	compiler/src/CxxGenerator.hs
1	1	compiler/src/WireFormat.hs

--08d73bef	2013-05-13T11:11:11-07:00	Kenton Varda	temporal@gmail.com	Refactor dynamic API using new schema API.

08d73bef
162	0	c++/src/capnproto/dynamic-test.c++
332	606	c++/src/capnproto/dynamic.c++
135	347	c++/src/capnproto/dynamic.h
2	1	c++/src/capnproto/generated-header-support.h
7	7	c++/src/capnproto/message.h
15	15	c++/src/capnproto/schema-test.c++
9	9	c++/src/capnproto/schema.c++
16	4	c++/src/capnproto/schema.h
27	54	compiler/src/c++-header.mustache

--e7b9e4da	2013-05-12T21:54:16-07:00	Kenton Varda	temporal@gmail.com	Schema convenience interface.

e7b9e4da
37	0	c++/src/capnproto/blob-test.c++
2	6	c++/src/capnproto/blob.h
21	0	c++/src/capnproto/generated-header-support.h
2	2	c++/src/capnproto/message.h
276	0	c++/src/capnproto/schema-test.c++
264	0	c++/src/capnproto/schema.c++
410	0	c++/src/capnproto/schema.h
12	0	c++/src/capnproto/test.capnp
45	1	compiler/src/CxxGenerator.hs
6	1	compiler/src/c++-source.mustache

--80722b03	2013-05-11T17:06:33-07:00	Kenton Varda	temporal@gmail.com	Revamp dynamic struct getters/setters to not distinguish unions.  Add converience versions that take string names.

80722b03
2	2	c++/src/capnproto/blob-test.c++
0	4	c++/src/capnproto/blob.h
218	58	c++/src/capnproto/dynamic.c++
73	60	c++/src/capnproto/dynamic.h
6	0	c++/src/capnproto/list.h
5	5	c++/src/capnproto/schema.capnp
5	4	compiler/src/WireFormat.hs

--449f4b23	2013-05-11T01:17:02-07:00	Kenton Varda	temporal@gmail.com	Allow automatic conversions between numeric types in DynamicValue.

449f4b23
115	20	c++/src/capnproto/dynamic.c++
151	100	c++/src/capnproto/dynamic.h

--4b771dcd	2013-05-10T23:39:38-07:00	Kenton Varda	temporal@gmail.com	Dynamic API mostly done...  not tested.  This commit actually starts embedding the schema data in the generated code.

4b771dcd
8	0	c++/src/capnproto/blob.h
96	19	c++/src/capnproto/dynamic.c++
77	37	c++/src/capnproto/dynamic.h
30	9	c++/src/capnproto/generated-header-support.h
24	0	c++/src/capnproto/list.h
7	4	c++/src/capnproto/type-safety.h
2	1	compiler/src/Compiler.hs
51	8	compiler/src/CxxGenerator.hs
23	6	compiler/src/Main.hs
27	11	compiler/src/WireFormat.hs
13	0	compiler/src/c++-header.mustache
23	0	compiler/src/c++-source.mustache

--b2edb433	2013-05-10T18:18:43-07:00	Kenton Varda	temporal@gmail.com	More dynamic API WIP.

b2edb433
3	0	c++/src/capnproto/arena.h
640	61	c++/src/capnproto/dynamic.c++
246	89	c++/src/capnproto/dynamic.h
3	1	c++/src/capnproto/generated-header-support.h
2	2	c++/src/capnproto/layout-test.c++
6	6	c++/src/capnproto/layout.c++
3	3	c++/src/capnproto/layout.h
1	2	c++/src/capnproto/list.h
3	3	c++/src/capnproto/message.c++
26	2	c++/src/capnproto/message.h
5	0	c++/src/capnproto/schema.capnp
7	6	compiler/src/WireFormat.hs
43	0	compiler/src/c++-header.mustache

--18cfa132	2013-05-09T20:25:50-07:00	Kenton Varda	temporal@gmail.com	Dynamic API WIP.

18cfa132
616	0	c++/src/capnproto/dynamic.c++
815	0	c++/src/capnproto/dynamic.h
16	3	c++/src/capnproto/generated-header-support.h
2	0	compiler/src/CxxGenerator.hs
5	3	compiler/src/c++-header.mustache

--1a515be7	2013-05-09T16:53:17-07:00	Kenton Varda	temporal@gmail.com	Simplify generated code by using PointerHelpers templates.

1a515be7
45	40	c++/src/capnproto/generated-header-support.h
4	4	c++/src/capnproto/layout.h
75	67	c++/src/capnproto/list.h
8	0	compiler/src/CxxGenerator.hs
64	374	compiler/src/c++-header.mustache

--e4784bc8	2013-05-09T15:51:06-07:00	Kenton Varda	temporal@gmail.com	Various refactoring and cleanup.

e4784bc8
22	11	c++/src/capnproto/generated-header-support.h
37	21	c++/src/capnproto/layout.c++
125	77	c++/src/capnproto/layout.h
41	148	c++/src/capnproto/list.h
2	2	c++/src/capnproto/message.h
2	2	c++/src/capnproto/type-safety.h
49	24	compiler/src/c++-header.mustache
0	2	compiler/src/c++-source.mustache

--f017105e	2013-05-09T14:05:10-07:00	Kenton Varda	temporal@gmail.com	Various stuff in support of dynamic API.

f017105e
22	1	c++/src/capnproto/generated-header-support.h
71	0	c++/src/capnproto/layout.c++
41	18	c++/src/capnproto/layout.h
1	1	c++/src/capnproto/list.h
27	7	c++/src/capnproto/type-safety.h

--5ab5e2a3	2013-05-07T17:51:33-07:00	Kenton Varda	temporal@gmail.com	Restore ability to upgrade from List(Bool) to List(T) where T is a struct whose @0 field is of type Bool.  I previously disallowed this to reduce complexity, but it turned out to actually increase complexity.

5ab5e2a3
135	1	c++/src/capnproto/encoding-test.c++
105	133	c++/src/capnproto/layout.c++
89	72	c++/src/capnproto/layout.h
1	1	c++/src/capnproto/message.c++
6	2	c++/src/capnproto/test-util.c++
7	1	c++/src/capnproto/test.capnp
24	3	c++/src/capnproto/type-safety.h
2	2	compiler/src/Compiler.hs
1	1	compiler/src/CxxGenerator.hs
1	1	compiler/src/Semantics.hs
7	6	doc/encoding.md
2	3	doc/language.md

--9e3eb675	2013-05-07T13:20:42-07:00	Kenton Varda	temporal@gmail.com	Starting on dynamic message manipulation (manipluating messages without knowing the schema, or without compiling in the schema).

9e3eb675
6	3	c++/src/capnproto/arena.h
177	1	c++/src/capnproto/layout.c++
77	1	c++/src/capnproto/layout.h
26	2	c++/src/capnproto/list.h
158	0	c++/src/capnproto/type-safety.h

--de33baaf	2013-05-05T20:37:44-07:00	Kenton Varda	temporal@gmail.com	Simplify more after removing inline types.

de33baaf
12	8	c++/src/capnproto/layout-test.c++
68	73	c++/src/capnproto/layout.c++
40	82	c++/src/capnproto/layout.h
9	0	c++/src/capnproto/type-safety.h
9	1	compiler/src/CxxGenerator.hs
3	2	compiler/src/c++-header.mustache

--7197456b	2013-05-03T23:43:48-07:00	Kenton Varda	temporal@gmail.com	Delete Code Friday:  Inline structs/lists/data are too complicated for not enough benefit.  There goes a week of my life that I'll never get back.

7197456b
35	446	c++/src/capnproto/encoding-test.c++
0	89	c++/src/capnproto/layout.c++
2	165	c++/src/capnproto/layout.h
0	181	c++/src/capnproto/list.h
59	913	c++/src/capnproto/test-util.c++
4	6	c++/src/capnproto/test-util.h
8	249	c++/src/capnproto/test.capnp
7	4	compiler/src/Compiler.hs
1	1	compiler/src/Lexer.hs

--de742607	2013-05-03T22:37:51-07:00	Kenton Varda	temporal@gmail.com	Implement code generator plugins.  The Cap'n Proto compiler, when given -o foo, invokes the binary capnp-foo and passes the schema, in Cap'n Proto format, to its stdin.  The binary is executed with the current working directory set to the desired output directory, so all it has to do is write the files.

de742607
617	0	c++/src/capnproto/compiler/capnpc-capnp.c++
12	0	c++/src/capnproto/message.h
319	0	c++/src/capnproto/schema.capnp
13	1	c++/src/capnproto/type-safety.h
14	0	c++/src/capnproto/util.c++
41	3	c++/src/capnproto/util.h
2	1	compiler/capnproto-compiler.cabal
1	0	compiler/src/Compiler.hs
4	1	compiler/src/CxxGenerator.hs
60	22	compiler/src/Main.hs
19	5	compiler/src/Semantics.hs
378	14	compiler/src/WireFormat.hs
1	1	doc/language.md

--0fb40a47	2013-04-30T22:33:03-07:00	Kenton Varda	temporal@gmail.com	Specify how derived IDs are generated.

0fb40a47
6	4	doc/language.md

--ebd60adb	2013-04-30T18:37:37-07:00	Kenton Varda	temporal@gmail.com	Add IDs to benchmark schemas.

ebd60adb
2	0	c++/src/capnproto/benchmark/carsales.capnp
2	0	c++/src/capnproto/benchmark/catrank.capnp
2	0	c++/src/capnproto/benchmark/eval.capnp

--af03c043	2013-04-30T17:43:21-07:00	Kenton Varda	temporal@gmail.com	Add note about ID collisions.

af03c043
5	0	doc/language.md

--dd299bd6	2013-04-30T17:21:31-07:00	Kenton Varda	temporal@gmail.com	Document IDs and 'Object' type.

dd299bd6
1	1	doc/_plugins/capnp_lexer.py
50	1	doc/language.md

--2c8595bc	2013-04-30T15:57:12-07:00	Kenton Varda	temporal@gmail.com	Redo IDs.  They now look like ordinals, except that they are 64-bit unique integers.

2c8595bc
1	1	c++/src/capnproto/c++.capnp
2	0	c++/src/capnproto/test-import.capnp
2	0	c++/src/capnproto/test.capnp
2	1	compiler/capnproto-compiler.cabal
60	59	compiler/src/Compiler.hs
3	3	compiler/src/CxxGenerator.hs
16	13	compiler/src/Grammar.hs
23	2	compiler/src/Main.hs
47	18	compiler/src/Parser.hs
19	53	compiler/src/Semantics.hs
7	0	compiler/src/Util.hs
23	28	compiler/src/WireFormat.hs

--567c2de2	2013-04-29T16:18:44-07:00	Kenton Varda	temporal@gmail.com	Implement 'Object' field type, which can be any pointer type.  The caller specifies the type when calling the accessors.

567c2de2
85	0	c++/src/capnproto/encoding-test.c++
66	0	c++/src/capnproto/generated-header-support.h
118	3	c++/src/capnproto/list.h
4	0	c++/src/capnproto/test.capnp
10	1	compiler/src/Compiler.hs
6	0	compiler/src/CxxGenerator.hs
2	0	compiler/src/Semantics.hs
41	0	compiler/src/c++-header.mustache

--268a2235	2013-04-28T20:32:19-07:00	Kenton Varda	temporal@gmail.com	Document inline types, new struct list encoding rules, etc.

268a2235
1	1	doc/_plugins/capnp_lexer.py
29	0	doc/encoding.md
67	4	doc/language.md
9	0	doc/otherlang.md

--1a2d78ea	2013-04-28T20:19:43-07:00	Kenton Varda	temporal@gmail.com	Detect and disallow List(Inline(Bool, n)) as it is not currently implemented correctly (and may be difficult to implement correctly-yet-efficiencly).

1a2d78ea
2	0	compiler/src/Compiler.hs

--5f1bd21b	2013-04-28T17:39:40-07:00	Kenton Varda	temporal@gmail.com	Require fixed struct data section size to be in bytes, not words, for clarity.

5f1bd21b
4	4	c++/src/capnproto/test.capnp
2	2	compiler/src/Compiler.hs
2	6	compiler/src/Parser.hs
2	2	compiler/src/Semantics.hs

--d63388ce	2013-04-28T17:31:23-07:00	Kenton Varda	temporal@gmail.com	Correctly handle inline fields that aren't present in the parent struct (i.e. because we're reading an older version of the struct that lacked those fields).

d63388ce
231	0	c++/src/capnproto/encoding-test.c++
106	4	c++/src/capnproto/layout.c++
13	62	c++/src/capnproto/layout.h
133	0	c++/src/capnproto/test-util.c++
10	0	compiler/src/Compiler.hs
14	1	compiler/src/Semantics.hs

--03359f01	2013-04-27T03:19:10-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'master' of https://github.com/kentonv/capnproto

03359f01
--ebce1a49	2013-04-27T03:18:07-07:00	Kenton Varda	temporal@gmail.com	Implemented InlineData, added a bunch of tests for list of lists and such, and fixed tons of bugs.

ebce1a49
5	0	c++/src/capnproto/blob.h
35	260	c++/src/capnproto/encoding-test.c++
8	1	c++/src/capnproto/exception.c++
65	1	c++/src/capnproto/layout.h
206	17	c++/src/capnproto/list.h
14	0	c++/src/capnproto/logging-test.c++
831	0	c++/src/capnproto/test-util.c++
25	20	c++/src/capnproto/test-util.h
50	2	c++/src/capnproto/test.capnp
1	0	c++/src/capnproto/util.c++
33	11	c++/src/capnproto/util.h
21	1	compiler/src/Compiler.hs
45	2	compiler/src/CxxGenerator.hs
16	0	compiler/src/Semantics.hs
16	20	compiler/src/WireFormat.hs
136	72	compiler/src/c++-header.mustache

--475d7f53	2013-04-26T13:09:45-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #9 from zined/hygiene_gitignore

ignore /compiler/dist from cabal install
475d7f53
--5dba6d43	2013-04-26T21:57:35+02:00	zined	zined@adrianer.de	ignore /compiler/dist from cabal install

5dba6d43
2	0	.gitignore

--71afa600	2013-04-26T02:36:09-07:00	Kenton Varda	temporal@gmail.com	Fix warning.

71afa600
1	1	compiler/src/Compiler.hs

--5f08f50d	2013-04-26T02:33:55-07:00	Kenton Varda	temporal@gmail.com	Get rid of stupid hacks to allow single-bit structs.

5f08f50d
7	47	c++/src/capnproto/encoding-test.c++
8	8	c++/src/capnproto/layout-test.c++
51	43	c++/src/capnproto/layout.c++
80	98	c++/src/capnproto/layout.h
27	35	c++/src/capnproto/test.capnp
3	3	compiler/src/Compiler.hs
9	9	compiler/src/CxxGenerator.hs
3	4	compiler/src/Parser.hs
4	4	compiler/src/Semantics.hs
8	8	compiler/src/c++-header.mustache

--dcfd0915	2013-04-26T00:56:20-07:00	Kenton Varda	temporal@gmail.com	Add comment.

dcfd0915
2	0	c++/src/capnproto/test.capnp

--630c2519	2013-04-26T00:55:38-07:00	Kenton Varda	temporal@gmail.com	Some tests for lists of small structs, which are encoded as primitive lists.

630c2519
68	0	c++/src/capnproto/encoding-test.c++
28	2	c++/src/capnproto/test.capnp

--eab15190	2013-04-26T00:28:15-07:00	Kenton Varda	temporal@gmail.com	Runtime support and tests for inline lists.

eab15190
178	0	c++/src/capnproto/encoding-test.c++
15	13	c++/src/capnproto/layout-test.c++
96	53	c++/src/capnproto/layout.c++
205	57	c++/src/capnproto/layout.h
14	15	c++/src/capnproto/list.h
78	2	c++/src/capnproto/test.capnp
15	0	c++/src/capnproto/type-safety.h
19	2	compiler/src/Compiler.hs
28	0	compiler/src/CxxGenerator.hs
3	2	compiler/src/Semantics.hs
5	2	compiler/src/WireFormat.hs
125	6	compiler/src/c++-header.mustache

--13ab0872	2013-04-25T05:36:57-07:00	Kenton Varda	temporal@gmail.com	Compile inline lists (TODO: code generation).

13ab0872
30	15	compiler/src/Compiler.hs
2	1	compiler/src/CxxGenerator.hs
9	2	compiler/src/Grammar.hs
5	1	compiler/src/Parser.hs
28	13	compiler/src/Semantics.hs
154	52	compiler/src/WireFormat.hs
14	4	compiler/src/c++-header.mustache

--7f20d533	2013-04-24T23:43:53-07:00	Kenton Varda	temporal@gmail.com	Implement inline structs.

7f20d533
368	59	c++/src/capnproto/encoding-test.c++
21	31	c++/src/capnproto/layout.c++
88	14	c++/src/capnproto/layout.h
3	0	c++/src/capnproto/test-util.h
139	1	c++/src/capnproto/test.capnp
5	0	c++/src/capnproto/type-safety.h
7	0	compiler/capnproto-compiler.cabal
288	108	compiler/src/Compiler.hs
27	9	compiler/src/CxxGenerator.hs
4	3	compiler/src/Grammar.hs
1	0	compiler/src/Lexer.hs
34	1	compiler/src/Parser.hs
117	84	compiler/src/Semantics.hs
1	0	compiler/src/Token.hs
167	127	compiler/src/WireFormat.hs
29	0	compiler/src/c++-header.mustache

--9e7acd4b	2013-04-20T12:06:45-07:00	Kenton Varda	temporal@gmail.com	Fix some warnings.

9e7acd4b
0	2	c++/src/capnproto/layout-test.c++
1	0	c++/src/capnproto/serialize-packed.c++

--5b8035fa	2013-04-19T20:57:46-07:00	Kenton Varda	temporal@gmail.com	Cleanup:  Remove some redundant fields in descriptor structures.

5b8035fa
7	35	compiler/src/Compiler.hs
4	4	compiler/src/CxxGenerator.hs
14	29	compiler/src/Semantics.hs

--5d83e1db	2013-04-19T20:46:16-07:00	Kenton Varda	temporal@gmail.com	Fix warnings.

5d83e1db
4	8	compiler/src/Compiler.hs

--d6019da7	2013-04-19T20:44:20-07:00	Kenton Varda	temporal@gmail.com	oops

d6019da7
1	0	compiler/src/Compiler.hs

--1cd5a240	2013-04-19T20:41:44-07:00	Kenton Varda	temporal@gmail.com	Avoid generating #includes for imports that are used only for their annotations.

1cd5a240
2	0	compiler/src/Compiler.hs
5	1	compiler/src/CxxGenerator.hs
51	0	compiler/src/Semantics.hs

--dc51ed6b	2013-04-19T19:54:13-07:00	Kenton Varda	temporal@gmail.com	Support 'inf' and 'nan' as float/double literals.

dc51ed6b
27	4	c++/src/capnproto/test-util.c++
2	2	c++/src/capnproto/test.capnp
8	0	compiler/src/Compiler.hs
9	14	compiler/src/Parser.hs

--9baabb1d	2013-04-19T18:56:20-07:00	Kenton Varda	temporal@gmail.com	Fully implement and test 'using'.

9baabb1d
11	0	c++/src/capnproto/encoding-test.c++
1	0	c++/src/capnproto/test-util.h
8	0	c++/src/capnproto/test.capnp
12	2	compiler/src/Parser.hs

--08c0a048	2013-04-19T18:37:45-07:00	Kenton Varda	temporal@gmail.com	Cleanup: alias -> using

08c0a048
12	12	compiler/src/Compiler.hs
3	3	compiler/src/Grammar.hs
3	3	compiler/src/Parser.hs
18	18	compiler/src/Semantics.hs

--6b61f9c4	2013-04-19T18:31:35-07:00	Kenton Varda	temporal@gmail.com	Cleanup:  enum value -> enumerant

6b61f9c4
15	15	compiler/src/Compiler.hs
6	6	compiler/src/CxxGenerator.hs
5	5	compiler/src/Grammar.hs
4	5	compiler/src/Parser.hs
18	18	compiler/src/Semantics.hs
1	1	compiler/src/WireFormat.hs
6	6	compiler/src/c++-header.mustache
2	2	doc/language.md

--5a19e0a1	2013-04-19T05:18:52-07:00	Kenton Varda	temporal@gmail.com	Write some crappy docs on annotations, and some other tweaks.

5a19e0a1
3	0	c++/src/capnproto/benchmark/carsales.capnp
3	0	c++/src/capnproto/benchmark/catrank.capnp
3	0	c++/src/capnproto/benchmark/eval.capnp
1	1	c++/src/capnproto/c++.capnp
1	1	c++/src/capnproto/capnpc.ekam-rule
2	3	compiler/src/Parser.hs
16	5	doc/_plugins/capnp_lexer.py
19	0	doc/cxx.md
69	0	doc/language.md
1	0	doc/stylesheets/pygment_trac.css

--d3e5540c	2013-04-19T03:32:38-07:00	Kenton Varda	temporal@gmail.com	Fix bugs in annotations, implement ability to set C++ namespace via annotations.

d3e5540c
3	0	c++/Makefile.am
27	0	c++/src/capnproto/c++.capnp
17	8	c++/src/capnproto/test-util.h
4	0	c++/src/capnproto/test.capnp
69	49	compiler/src/Compiler.hs
18	4	compiler/src/CxxGenerator.hs
4	4	compiler/src/Parser.hs
78	19	compiler/src/Semantics.hs
8	1	compiler/src/Util.hs

--4d121574	2013-04-19T00:01:07-07:00	Kenton Varda	temporal@gmail.com	Implement annotations.

4d121574
136	85	compiler/src/Compiler.hs
66	30	compiler/src/Grammar.hs
3	1	compiler/src/Lexer.hs
87	46	compiler/src/Parser.hs
90	65	compiler/src/Semantics.hs
3	1	compiler/src/Token.hs

--7a7e0b64	2013-04-19T00:00:41-07:00	Kenton Varda	temporal@gmail.com	Oops, add missing file from imports change and update Makefile.am.

7a7e0b64
5	2	c++/Makefile.am
28	0	c++/src/capnproto/test-import.capnp

--fddbce4d	2013-04-17T23:33:49-07:00	Kenton Varda	temporal@gmail.com	Implement imports.

fddbce4d
10	1	c++/src/capnproto/encoding-test.c++
15	1	compiler/src/Compiler.hs
10	0	compiler/src/CxxGenerator.hs
67	16	compiler/src/Main.hs
0	5	compiler/src/Parser.hs
11	2	compiler/src/c++-header.mustache

--525d723b	2013-04-17T20:35:04-07:00	Kenton Varda	temporal@gmail.com	Update benchmark for new union syntax.

525d723b
14	14	c++/src/capnproto/benchmark/capnproto-eval.c++
8	6	c++/src/capnproto/benchmark/eval.capnp
2	1	compiler/capnproto-compiler.cabal
45	11	compiler/src/Compiler.hs
25	0	compiler/src/Grammar.hs
62	16	compiler/src/Main.hs

--5986724f	2013-04-16T18:20:46-07:00	Kenton Varda	temporal@gmail.com	Update docs for unions.  Also allow setters for void values to omit the parameter.

5986724f
1	0	c++/src/capnproto/test-util.c++
3	0	compiler/src/CxxGenerator.hs
1	1	compiler/src/c++-header.mustache
1	1	doc/_layouts/page.html
71	0	doc/cxx.md
12	11	doc/language.md

--0df5fb63	2013-04-16T17:37:00-07:00	Kenton Varda	temporal@gmail.com	Improve unions.  Members of a union are now scoped within the union, although they share ordinal space with the parent struct.

0df5fb63
84	80	c++/src/capnproto/encoding-test.c++
58	52	c++/src/capnproto/test.capnp
34	24	compiler/src/Compiler.hs
23	5	compiler/src/CxxGenerator.hs
4	3	compiler/src/Grammar.hs
21	18	compiler/src/Parser.hs
18	16	compiler/src/Semantics.hs
139	119	compiler/src/c++-header.mustache
2	0	compiler/src/c++-source.mustache

--e48068e2	2013-04-16T11:32:34-07:00	Kenton Varda	temporal@gmail.com	Fix .cabal file.

e48068e2
0	1	compiler/capnproto-compiler.cabal

--6819f272	2013-04-16T11:28:24-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'scrap-parser-boilerplate' of https://github.com/alekstorm/capnproto

6819f272
--2c4c98e3	2013-04-15T16:02:26-07:00	Kenton Varda	temporal@gmail.com	Support nested types in C++ generator.

2c4c98e3
14	0	c++/src/capnproto/encoding-test.c++
23	0	c++/src/capnproto/test.capnp
52	7	compiler/src/CxxGenerator.hs
61	40	compiler/src/c++-header.mustache
6	4	compiler/src/c++-source.mustache

--b4a4ce90	2013-04-15T16:02:15-07:00	Kenton Varda	temporal@gmail.com	Oops, there are not 65 bits in a far pointer.

b4a4ce90
1	1	doc/encoding.md

--f60e7ce0	2013-04-15T02:05:26-07:00	Alek Storm	alek.storm@gmail.com	[compiler] Scrap token-matching boilerplate in Parser.hs

f60e7ce0
3	2	compiler/capnproto-compiler.cabal
14	14	compiler/src/Parser.hs
6	3	compiler/src/Token.hs

--4e089f54	2013-04-15T01:27:35-07:00	Kenton Varda	temporal@gmail.com	Check CAPNPROTO_PRIVATE in arena.h.

4e089f54
6	5	c++/src/capnproto/arena.h
1	0	c++/src/capnproto/layout-test.c++

--64286a5f	2013-04-15T01:25:29-07:00	Kenton Varda	temporal@gmail.com	Document C++ implementation lessons learned from Protobufs.

64286a5f
44	0	doc/cxx.md

--32192e58	2013-04-15T00:19:42-07:00	Kenton Varda	temporal@gmail.com	Update Makefile.am for recent changes.

32192e58
8	0	c++/Makefile.am

--53ba1139	2013-04-14T23:34:05-07:00	Kenton Varda	temporal@gmail.com	Update docs to mention how to register exception callbacks.

53ba1139
1	2	doc/cxx.md

--bb7d1dff	2013-04-14T23:24:59-07:00	Kenton Varda	temporal@gmail.com	Get rid of redundant ErrorReporter that goes in ReaderOptions.  Registering an ExceptionCallback is a better approach.

bb7d1dff
3	22	c++/src/capnproto/arena.c++
3	27	c++/src/capnproto/arena.h
61	83	c++/src/capnproto/layout.c++
5	52	c++/src/capnproto/message.c++
0	35	c++/src/capnproto/message.h
4	6	c++/src/capnproto/serialize.c++

--5dcbfe3a	2013-04-14T22:43:25-07:00	Kenton Varda	temporal@gmail.com	Replace most CAPNPROTO_ASSERTs with the new logging/error macros.  Also add a SYSCALL macro and use it.  Also add commentary.

5dcbfe3a
5	3	c++/src/capnproto/arena.c++
3	1	c++/src/capnproto/benchmark/capnproto-common.h
7	8	c++/src/capnproto/blob.h
3	1	c++/src/capnproto/encoding-test.c++
7	2	c++/src/capnproto/exception.c++
7	0	c++/src/capnproto/exception.h
18	74	c++/src/capnproto/io.c++
21	21	c++/src/capnproto/layout.c++
12	6	c++/src/capnproto/list.h
32	0	c++/src/capnproto/logging-test.c++
98	13	c++/src/capnproto/logging.c++
179	0	c++/src/capnproto/logging.h
13	8	c++/src/capnproto/macros.c++
13	10	c++/src/capnproto/macros.h
9	23	c++/src/capnproto/message.c++
5	3	c++/src/capnproto/serialize-packed-test.c++
42	28	c++/src/capnproto/serialize-packed.c++
5	3	c++/src/capnproto/serialize-snappy-test.c++
9	6	c++/src/capnproto/serialize-snappy.c++
4	2	c++/src/capnproto/serialize-test.c++
15	6	c++/src/capnproto/serialize.c++
6	6	c++/src/capnproto/type-safety.h
1	0	c++/src/capnproto/util-test.c++
6	6	c++/src/capnproto/util.c++
31	5	c++/src/capnproto/util.h
9	9	compiler/src/c++-header.mustache

--bdc568b8	2013-04-14T16:03:44-07:00	Kenton Varda	temporal@gmail.com	Tweak previous change.

bdc568b8
6	0	c++/src/capnproto/exception.h
3	3	c++/src/capnproto/logging.c++
9	9	c++/src/capnproto/logging.h

--93e030e3	2013-04-14T05:59:37-07:00	Kenton Varda	temporal@gmail.com	Implement better exception strategy and neat-o new logging/assert macros.

93e030e3
149	0	c++/src/capnproto/exception.c++
137	0	c++/src/capnproto/exception.h
118	0	c++/src/capnproto/logging-test.c++
153	0	c++/src/capnproto/logging.c++
140	0	c++/src/capnproto/logging.h
6	39	c++/src/capnproto/macros.c++
3	1	c++/src/capnproto/macros.h
88	10	c++/src/capnproto/type-safety.h
11	40	c++/src/capnproto/{macros.c++ => util-test.c++}
289	0	c++/src/capnproto/util.c++
189	0	c++/src/capnproto/util.h

--d6567127	2013-04-12T23:17:24-07:00	Kenton Varda	temporal@gmail.com	Refuse to read messages with excessive segment counts or messages whose total size exceeds the traversal limit, before allocating any space.  This is important for security.

d6567127
35	0	c++/src/capnproto/serialize-test.c++
10	0	c++/src/capnproto/serialize.c++

--753882f9	2013-04-11T16:11:03-07:00	Kenton Varda	temporal@gmail.com	Organize encoding docs a bit better.

753882f9
36	15	doc/encoding.md
0	1	doc/push-site.sh

--c426cf86	2013-04-11T15:46:39-07:00	Kenton Varda	temporal@gmail.com	Implementation now matches encoding docs, so remove the statement to the contrary.

c426cf86
1	2	doc/encoding.md

--9c0223f1	2013-04-11T15:43:20-07:00	Kenton Varda	temporal@gmail.com	Tweak benchmark runner output.

9c0223f1
2	1	c++/src/capnproto/benchmark/runner.c++

--5579ec34	2013-04-11T15:41:00-07:00	Kenton Varda	temporal@gmail.com	Update far pointer implementation to match spec.  Also adjust the spec slightly so that you can tell whether a far pointer is a double-far before you dereference it.

5579ec34
40	42	c++/src/capnproto/layout.c++
15	13	doc/encoding.md

--42951751	2013-04-11T13:23:00-07:00	Kenton Varda	temporal@gmail.com	Fix and test compiler's encoding of unions.  Also update list pointer encoding to match docs.

42951751
29	0	c++/src/capnproto/encoding-test.c++
5	5	c++/src/capnproto/layout.c++
7	0	c++/src/capnproto/test.capnp
8	7	compiler/src/Compiler.hs
4	1	compiler/src/CxxGenerator.hs
1	1	compiler/src/Main.hs
6	3	compiler/src/Semantics.hs
5	10	compiler/src/WireFormat.hs
1	1	compiler/src/c++-header.mustache

--eb8404a1	2013-04-11T02:59:06-07:00	Kenton Varda	temporal@gmail.com	Fully implement unions.

eb8404a1
11	7	c++/src/capnproto/benchmark/capnproto-eval.c++
6	8	c++/src/capnproto/benchmark/eval.capnp
145	0	c++/src/capnproto/encoding-test.c++
1	0	c++/src/capnproto/message-test.c++
75	0	c++/src/capnproto/test.capnp
56	36	compiler/src/Compiler.hs
16	1	compiler/src/CxxGenerator.hs
9	10	compiler/src/Semantics.hs
112	2	compiler/src/c++-header.mustache
2	1	doc/encoding.md

--e33b08f9	2013-04-10T10:25:15-07:00	Kenton Varda	temporal@gmail.com	Add benchmarking mode for measuring improvement from a change.  Also, fix a bug.

e33b08f9
5	3	c++/src/capnproto/benchmark/capnproto-common.h
110	8	c++/src/capnproto/benchmark/runner.c++
18	6	c++/src/capnproto/message.c++
2	0	c++/src/capnproto/message.h

--f966fc41	2013-04-09T16:15:36-07:00	Kenton Varda	temporal@gmail.com	Store primitive fields XOR'd with their defaults.

f966fc41
74	56	c++/src/capnproto/layout-test.c++
51	58	c++/src/capnproto/layout.c++
146	31	c++/src/capnproto/layout.h
2	3	c++/src/capnproto/list.h
7	8	c++/src/capnproto/message.c++
7	8	c++/src/capnproto/message.h
1	1	c++/src/capnproto/test.capnp
39	43	compiler/src/CxxGenerator.hs
30	53	compiler/src/WireFormat.hs
12	14	compiler/src/c++-header.mustache
1	7	compiler/src/c++-source.mustache

--f3c4121b	2013-04-06T12:18:08-07:00	Kenton Varda	temporal@gmail.com	Merge pull request #7 from dtrodrigues/typo-fix

Fixed typo in "operation"
f3c4121b
--0a306847	2013-04-06T15:57:03-03:00	Dustin Rodrigues	dust.rod@gmail.com	Fixed typo in "operation"
0a306847
1	1	doc/cxx.md

--668c002a	2013-04-05T14:06:19-07:00	Kenton Varda	temporal@gmail.com	Update docs for new capnpc command line.

668c002a
1	4	doc/cxx.md

--dbc3d6dc	2013-04-05T14:03:29-07:00	Kenton Varda	temporal@gmail.com	Flesh out capnpc command-line interface.

dbc3d6dc
1	1	c++/Makefile.am
1	1	c++/src/capnproto/capnpc.ekam-rule
2	2	compiler/capnproto-compiler.cabal
6	1	compiler/src/CxxGenerator.hs
79	33	compiler/src/Main.hs
3	1	compiler/src/Semantics.hs

--99bdcc1b	2013-04-05T12:13:16-07:00	Kenton Varda	temporal@gmail.com	Merge branch 'check-language' of https://github.com/mosesn/capnproto

Supports choosing output languages on the command line.

99bdcc1b
--718b5c05	2013-04-04T22:34:37-04:00	Moses Nakamura	nnythm@gmail.com	supports the api kenton suggested

718b5c05
25	5	compiler/src/Main.hs

--7a00f5c2	2013-04-04T16:42:04-07:00	Kenton Varda	temporal@gmail.com	tweak

7a00f5c2
3	3	doc/encoding.md

--95be334d	2013-04-04T16:38:47-07:00	Kenton Varda	temporal@gmail.com	Update implemented pointer format to match docs:  Don't store field count in struct pointers because it isn't needed.  Instead extend data and pointer section sizes to 16 bits, which should be enough for anyone.  Also, store offsets from the end of the pointer rather than the beginning, because this makes it possible for them to be zero, which compresses better.  In particular, the root reference will always have a zero offset, so this will shave a byte off of very small packed messages.

95be334d
1	1	c++/src/capnproto/encoding-test.c++
6	19	c++/src/capnproto/layout-test.c++
31	38	c++/src/capnproto/layout.c++
10	57	c++/src/capnproto/layout.h
4	2	c++/src/capnproto/serialize-packed-test.c++
6	0	c++/src/capnproto/serialize.c++
5	7	compiler/src/WireFormat.hs
2	2	doc/encoding.md

--8ac9494c	2013-04-04T15:11:56-07:00	Kenton Varda	temporal@gmail.com	Relax restriction that text can't contain NUL characters.

8ac9494c
7	4	doc/encoding.md

--a6aa9d6a	2013-04-03T19:54:09-07:00	Kenton Varda	temporal@gmail.com	Make enum syntax match docs, make enum lists work correctly, add enum tests, enforce maximum ordinals on enum values and interface methods, change the maximum field ordinal to 16-bit to match docs (now all ordinal limits match).

a6aa9d6a
9	9	c++/src/capnproto/benchmark/carsales.capnp
5	5	c++/src/capnproto/benchmark/eval.capnp
35	29	c++/src/capnproto/list.h
8	0	c++/src/capnproto/test-util.c++
18	7	c++/src/capnproto/test.capnp
11	7	compiler/src/Compiler.hs
6	21	compiler/src/Parser.hs
4	8	compiler/src/Semantics.hs

--34067cd7	2013-04-02T23:52:02-04:00	Moses Nakamura	nnythm@gmail.com	omg it's magic

34067cd7
1	2	compiler/src/Main.hs

--4feb123d	2013-04-02T23:49:33-04:00	Moses Nakamura	nnythm@gmail.com	remembered some list sugar, stripped a println

4feb123d
1	3	compiler/src/Main.hs

--38481431	2013-04-02T23:46:58-04:00	Moses Nakamura	nnythm@gmail.com	fixed whitespace error, tried to clean up names

38481431
6	7	compiler/src/Main.hs

--0411f046	2013-04-02T23:32:00-04:00	Moses Nakamura	nnythm@gmail.com	checks that the user wants c++

0411f046
19	7	compiler/src/Main.hs

--9ebc3020	2013-04-02T13:26:23-07:00	Kenton Varda	temporal@gmail.com	Fix up adaptive sidebar positioning for new layout.

9ebc3020
2	2	doc/_layouts/page.html
7	5	doc/stylesheets/stylesheet.css

--9d7232e8	2013-04-02T02:53:48-07:00	Amy Wibowo	amy.wibowo@airbnb.com	[style] updating layout and adding header assets

9d7232e8
7	12	doc/_layouts/page.html
-	-	doc/images/captain_proto.png
-	-	doc/images/infinitely_faster.png
27	27	doc/stylesheets/stylesheet.css

--970b5f46	2013-04-02T00:17:43-07:00	Kenton Varda	temporal@gmail.com	Err, oops.

970b5f46
5	7	doc/README.md

--c7fe7ad7	2013-04-02T00:16:08-07:00	Kenton Varda	temporal@gmail.com	Let's make that Markdown.

c7fe7ad7
0	0	doc/{README => README.md}

--47d6c423	2013-04-02T00:14:33-07:00	Kenton Varda	temporal@gmail.com	Add a readme explaining how to edit docs.

47d6c423
27	0	doc/README

--07dca38c	2013-04-01T14:27:48-07:00	Kenton Varda	temporal@gmail.com	Tweak end of front page.

07dca38c
5	3	doc/index.md

--4802eee2	2013-04-01T14:10:39-07:00	Kenton Varda	temporal@gmail.com	Doc proof-read.

4802eee2
12	3	doc/_layouts/page.html
22	19	doc/cxx.md
45	21	doc/encoding.md
61	13	doc/install.md
15	12	doc/language.md
13	9	doc/stylesheets/stylesheet.css

--db57d130	2013-04-01T11:03:48-07:00	Kenton Varda	temporal@gmail.com	Add jekyll config file.

db57d130
1	0	doc/_config.yml

--f12c1941	2013-04-01T10:58:13-07:00	Kenton Varda	temporal@gmail.com	Tweak push script.

f12c1941
1	1	doc/push-site.sh

--cfb85295	2013-04-01T10:57:21-07:00	Kenton Varda	temporal@gmail.com	Tweak push script.

cfb85295
3	1	doc/push-site.sh

--0532363b	2013-04-01T10:54:35-07:00	Kenton Varda	temporal@gmail.com	More doc tweaks.

0532363b
3	0	.gitignore
18	12	doc/_layouts/page.html
17	0	doc/index.md
2	2	doc/install.md
53	0	doc/push-site.sh
59	47	doc/stylesheets/stylesheet.css

--7bb9f28d	2013-04-01T00:37:11-07:00	Kenton Varda	temporal@gmail.com	Doc tweaks.

7bb9f28d
85	4	doc/_layouts/page.html
1	1	doc/cxx.md
2	2	doc/index.md
1	1	doc/install.md
97	12	doc/stylesheets/stylesheet.css

--87906482	2013-03-31T22:08:05-07:00	Kenton Varda	temporal@gmail.com	Also warn for GCC < 4.7.

87906482
5	1	c++/src/capnproto/macros.h

--9a62fd23	2013-03-31T22:03:26-07:00	Kenton Varda	temporal@gmail.com	Install headers to correct place, and try to detect if C++11 was not enabled.

9a62fd23
3	1	c++/Makefile.am
6	0	c++/src/capnproto/macros.h

--02f54b0c	2013-03-31T20:04:23-07:00	Kenton Varda	temporal@gmail.com	Docs written, need review.

02f54b0c
6	1	README.md
1	0	doc/_layouts/page.html
280	0	doc/cxx.md
55	0	doc/encoding.md
-	-	doc/images/groups-logo.png
23	5	doc/install.md
1	11	doc/language.md
9	0	doc/rpc.md
32	1	doc/stylesheets/stylesheet.css

--1590c336	2013-03-30T05:16:30-07:00	Kenton Varda	temporal@gmail.com	More docs.

1590c336
1	0	doc/_layouts/page.html
224	0	doc/encoding.md
5	17	doc/index.md
7	6	doc/install.md
11	0	doc/otherlang.md
16	0	doc/rpc.md

--871d90c6	2013-03-30T04:27:02-07:00	Kenton Varda	temporal@gmail.com	More docs.

871d90c6
3	3	doc/_layouts/page.html
25	3	doc/_plugins/capnp_lexer.py
19	1	doc/install.md
23	1	doc/language.md

--7eb36033	2013-03-30T04:26:49-07:00	Kenton Varda	temporal@gmail.com	More of naming capnpc correctly.

7eb36033
1	1	c++/src/capnproto/capnpc.ekam-rule

--0270e415	2013-03-30T01:10:59-07:00	Kenton Varda	temporal@gmail.com	Name capnpc correctly.

0270e415
1	1	compiler/capnproto-compiler.cabal

--e3a08e66	2013-03-30T00:59:47-07:00	Kenton Varda	temporal@gmail.com	More docs.

e3a08e66
26	0	doc/_layouts/page.html
9	14	doc/index.md
96	0	doc/install.md
0	1	doc/javascripts/main.js
11	7	doc/stylesheets/stylesheet.css

--a296ddd8	2013-03-30T00:47:32-07:00	Kenton Varda	temporal@gmail.com	Work with protobuf 2.5.0.

a296ddd8
1	0	c++/src/capnproto/benchmark/protobuf-common.h

--88064543	2013-03-30T00:45:50-07:00	Kenton Varda	temporal@gmail.com	setup-ekam script.

88064543
3	0	.gitignore
6	4	c++/Makefile.ekam
94	0	c++/setup-ekam.sh

--cb44370e	2013-03-29T22:09:51-07:00	Kenton Varda	temporal@gmail.com	Started on docs.

cb44370e
4	0	.gitignore
70	0	doc/_layouts/page.html
31	0	doc/_plugins/capnp_lexer.py
-	-	doc/images/bg_hr.png
-	-	doc/images/blacktocat.png
-	-	doc/images/icon_download.png
-	-	doc/images/infinity-times-faster.png
-	-	doc/images/sprite_download.png
93	0	doc/index.md
1	0	doc/javascripts/main.js
300	0	doc/language.md
74	0	doc/stylesheets/pygment_trac.css
484	0	doc/stylesheets/stylesheet.css

--ced6a707	2013-03-29T21:49:27-07:00	Kenton Varda	temporal@gmail.com	Including sys time doesn't really make sense here.

ced6a707
8	8	c++/src/capnproto/benchmark/runner.c++

--8bb5a9c3	2013-03-28T19:45:16-07:00	Kenton Varda	temporal@gmail.com	Initial README and LICENSE.

8bb5a9c3
23	0	LICENSE
2	0	README.md

--36b60fc1	2013-03-28T19:34:41-07:00	Kenton Varda	temporal@gmail.com	Fix various autotools problems.

36b60fc1
15	5	c++/Makefile.am
1	1	c++/configure.ac

--a29e7e5d	2013-03-28T18:57:22-07:00	Kenton Varda	temporal@gmail.com	autoconf build

a29e7e5d
22	0	.gitignore
101	0	c++/Makefile.am
35	0	c++/configure.ac
366	0	c++/m4/acx_pthread.m4
107	0	c++/m4/ax_cxx_compile_stdcxx_11.m4
1	9	c++/src/capnproto/blob-test.c++
0	2	c++/src/capnproto/serialize-packed.c++
19	0	c++/src/capnproto/test-util.h

--41d2b217	2013-03-28T16:57:51-07:00	Kenton Varda	temporal@gmail.com	oops

41d2b217
7	6	c++/src/capnproto/layout.h

--0fd36d34	2013-03-28T16:55:50-07:00	Kenton Varda	temporal@gmail.com	Rename wire-format -> layout.

0fd36d34
1	1	c++/src/capnproto/generated-header-support.h
1	1	c++/src/capnproto/{wire-format-test.c++ => layout-test.c++}
1	1	c++/src/capnproto/{wire-format.c++ => layout.c++}
0	0	c++/src/capnproto/{wire-format.h => layout.h}
1	1	c++/src/capnproto/list.h
1	1	c++/src/capnproto/message.h
1	1	c++/src/capnproto/serialize-packed.c++
1	1	c++/src/capnproto/serialize-snappy.c++
1	1	c++/src/capnproto/serialize.c++

--7b187dbd	2013-03-28T16:33:04-07:00	Kenton Varda	temporal@gmail.com	More benchmark updates, delete unused descriptor code.

7b187dbd
2	0	c++/src/capnproto/benchmark/capnproto-carsales.c++
6	0	c++/src/capnproto/benchmark/capnproto-common.h
2	0	c++/src/capnproto/benchmark/common.h
46	27	c++/src/capnproto/benchmark/null-carsales.c++
32	19	c++/src/capnproto/benchmark/null-common.h
2	0	c++/src/capnproto/benchmark/protobuf-carsales.c++
8	0	c++/src/capnproto/benchmark/protobuf-common.h
77	50	c++/src/capnproto/benchmark/runner.c++
0	72	c++/src/capnproto/descriptor-test.c++
0	30	c++/src/capnproto/descriptor.c++
0	273	c++/src/capnproto/descriptor.h
0	2	c++/src/capnproto/generated-header-support.h
0	1	c++/src/capnproto/list.h
0	1	c++/src/capnproto/wire-format-test.c++
0	1	c++/src/capnproto/wire-format.c++
76	4	c++/src/capnproto/wire-format.h

--4dd3161d	2013-03-28T07:08:12-07:00	Kenton Varda	temporal@gmail.com	Benchmark improvements.

4dd3161d
12	9	c++/src/capnproto/benchmark/capnproto-common.h
16	6	c++/src/capnproto/benchmark/runner.c++

--eb710512	2013-03-28T07:07:48-07:00	Kenton Varda	temporal@gmail.com	FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU-

eb710512
1	1	c++/src/capnproto/serialize-snappy.c++

--53cc6ec8	2013-03-28T04:53:27-07:00	Kenton Varda	temporal@gmail.com	Packed serialization -- removes the zeros.

53cc6ec8
109	22	c++/src/capnproto/benchmark/capnproto-common.h
3	0	c++/src/capnproto/benchmark/common.h
2	1	c++/src/capnproto/benchmark/null-common.h
2	1	c++/src/capnproto/benchmark/protobuf-common.h
23	11	c++/src/capnproto/benchmark/runner.c++
355	0	c++/src/capnproto/io.c++
280	0	c++/src/capnproto/io.h
11	0	c++/src/capnproto/macros.h
1	1	c++/src/capnproto/message.c++
546	0	c++/src/capnproto/serialize-packed-test.c++
470	0	c++/src/capnproto/serialize-packed.c++
123	0	c++/src/capnproto/serialize-packed.h
95	31	c++/src/capnproto/serialize-snappy-test.c++
113	211	c++/src/capnproto/serialize-snappy.c++
58	30	c++/src/capnproto/serialize-snappy.h
8	155	c++/src/capnproto/serialize.c++
1	102	c++/src/capnproto/serialize.h
79	0	c++/src/capnproto/test-util.c++
3	0	c++/src/capnproto/test-util.h
2	2	c++/src/capnproto/type-safety.h

--7b330237	2013-03-26T15:51:29-07:00	Kenton Varda	temporal@gmail.com	Tweaks.

7b330237
2	3	c++/src/capnproto/benchmark/capnproto-catrank.c++
2	4	c++/src/capnproto/benchmark/null-catrank.c++
3	2	c++/src/capnproto/benchmark/protobuf-catrank.c++
5	2	c++/src/capnproto/benchmark/runner.c++

--e950e6bf	2013-03-26T15:03:48-07:00	Kenton Varda	temporal@gmail.com	oops

e950e6bf
2	2	c++/src/capnproto/benchmark/runner.c++

--4a32903c	2013-03-26T15:02:53-07:00	Kenton Varda	temporal@gmail.com	Separate benchmark cases into separate binaries in order to compare binary sizes for each case.

4a32903c
0	586	c++/src/capnproto/benchmark/benchmark-null.c++
140	0	c++/src/capnproto/benchmark/capnproto-carsales.c++
143	0	c++/src/capnproto/benchmark/capnproto-catrank.c++
5	321	c++/src/capnproto/benchmark/{benchmark-capnproto.c++ => capnproto-common.h}
125	0	c++/src/capnproto/benchmark/capnproto-eval.c++
0	40	c++/src/capnproto/benchmark/{benchmark.capnp => carsales.capnp}
0	36	c++/src/capnproto/benchmark/{benchmark.proto => carsales.proto}
0	85	c++/src/capnproto/benchmark/{benchmark.capnp => catrank.capnp}
34	0	c++/src/capnproto/benchmark/catrank.proto
9	26	c++/src/capnproto/benchmark/{benchmark-common.h => common.h}
0	69	c++/src/capnproto/benchmark/{benchmark.capnp => eval.capnp}
0	69	c++/src/capnproto/benchmark/{benchmark.proto => eval.proto}
184	0	c++/src/capnproto/benchmark/null-carsales.c++
171	0	c++/src/capnproto/benchmark/null-catrank.c++
162	0	c++/src/capnproto/benchmark/null-common.h
157	0	c++/src/capnproto/benchmark/null-eval.c++
141	0	c++/src/capnproto/benchmark/protobuf-carsales.c++
131	0	c++/src/capnproto/benchmark/protobuf-catrank.c++
1	304	c++/src/capnproto/benchmark/{benchmark-protobuf.c++ => protobuf-common.h}
120	0	c++/src/capnproto/benchmark/protobuf-eval.c++
44	34	c++/src/capnproto/benchmark/{benchmark-runner.c++ => runner.c++}

--98873d06	2013-03-26T14:08:26-07:00	Kenton Varda	temporal@gmail.com	Remove iostream from prod sources.

98873d06
3	3	c++/src/capnproto/arena.c++

--46bf6129	2013-03-26T14:04:48-07:00	Kenton Varda	temporal@gmail.com	Factor out benchmark common code.

46bf6129
33	236	c++/src/capnproto/benchmark/benchmark-capnproto.c++
297	0	c++/src/capnproto/benchmark/benchmark-common.h
49	65	c++/src/capnproto/benchmark/benchmark-null.c++
28	248	c++/src/capnproto/benchmark/benchmark-protobuf.c++
0	49	c++/src/capnproto/benchmark/fast-random.h

--43c59cc3	2013-03-26T12:50:32-07:00	Kenton Varda	temporal@gmail.com	Benchmark case: car sales

43c59cc3
3	3	c++/Makefile.ekam
127	18	c++/src/capnproto/benchmark/benchmark-capnproto.c++
180	22	c++/src/capnproto/benchmark/benchmark-null.c++
127	17	c++/src/capnproto/benchmark/benchmark-protobuf.c++
19	8	c++/src/capnproto/benchmark/benchmark-runner.c++
57	0	c++/src/capnproto/benchmark/benchmark.capnp
57	0	c++/src/capnproto/benchmark/benchmark.proto
19	28	c++/src/capnproto/benchmark/{benchmark.proto => fast-random.h}

--f8b5d71d	2013-03-25T21:26:40-07:00	Kenton Varda	temporal@gmail.com	Fancy benchmark harness.

f8b5d71d
76	14	c++/src/capnproto/benchmark/benchmark-capnproto.c++
444	0	c++/src/capnproto/benchmark/benchmark-null.c++
15	8	c++/src/capnproto/benchmark/benchmark-protobuf.c++
462	0	c++/src/capnproto/benchmark/benchmark-runner.c++
10	2	c++/src/capnproto/message.c++
3	0	c++/src/capnproto/message.h

--50c229bb	2013-03-25T13:12:46-07:00	Kenton Varda	temporal@gmail.com	Improve eval benchmark message structure to waste fewer objects (for both protobuf and capnproto, but this turns out to help capnproto more than protobufs).

50c229bb
39	19	c++/src/capnproto/benchmark/benchmark-capnproto.c++
36	18	c++/src/capnproto/benchmark/benchmark-protobuf.c++
15	9	c++/src/capnproto/benchmark/benchmark.capnp
11	9	c++/src/capnproto/benchmark/benchmark.proto

--cb655884	2013-03-22T07:22:08-07:00	Kenton Varda	temporal@gmail.com	tweak

cb655884
4	1	c++/Makefile.ekam
2	1	c++/src/capnproto/benchmark/benchmark-capnproto.c++

--c571aad0	2013-03-22T06:35:15-07:00	Kenton Varda	temporal@gmail.com	CatRank benchmark case.

c571aad0
153	21	c++/src/capnproto/benchmark/benchmark-capnproto.c++
146	26	c++/src/capnproto/benchmark/benchmark-protobuf.c++
12	0	c++/src/capnproto/benchmark/benchmark.capnp
12	0	c++/src/capnproto/benchmark/benchmark.proto

--178b5fdd	2013-03-22T05:00:17-07:00	Kenton Varda	temporal@gmail.com	Snappy serialization.

178b5fdd
2	2	c++/Makefile.ekam
133	46	c++/src/capnproto/benchmark/benchmark-capnproto.c++
182	62	c++/src/capnproto/benchmark/benchmark-protobuf.c++
52	0	c++/src/capnproto/message-test.c++
194	0	c++/src/capnproto/serialize-snappy-test.c++
305	0	c++/src/capnproto/serialize-snappy.c++
82	0	c++/src/capnproto/serialize-snappy.h
18	4	c++/src/capnproto/serialize.c++
3	7	c++/src/capnproto/serialize.h
1	1	c++/src/capnproto/type-safety.h

--2bcb6e69	2013-03-22T01:07:56-07:00	Kenton Varda	temporal@gmail.com	Simplify reuse strategy, add reuse comparisons to benchmarks.

2bcb6e69
0	20	c++/src/capnproto/arena.c++
0	5	c++/src/capnproto/arena.h
120	56	c++/src/capnproto/benchmark/benchmark-capnproto.c++
141	64	c++/src/capnproto/benchmark/benchmark-protobuf.c++
27	13	c++/src/capnproto/message.c++
10	11	c++/src/capnproto/message.h
33	127	c++/src/capnproto/serialize-test.c++
133	175	c++/src/capnproto/serialize.c++
41	133	c++/src/capnproto/serialize.h
4	0	c++/src/capnproto/type-safety.h

--15aa868b	2013-03-20T17:25:31-07:00	Kenton Varda	temporal@gmail.com	Initial benchmarks, and some performance improvements.

15aa868b
5	0	c++/Makefile.ekam
22	2	c++/src/capnproto/arena.c++
17	0	c++/src/capnproto/arena.h
365	0	c++/src/capnproto/benchmark/benchmark-capnproto.c++
422	0	c++/src/capnproto/benchmark/benchmark-protobuf.c++
42	0	c++/src/capnproto/benchmark/benchmark.capnp
44	0	c++/src/capnproto/benchmark/benchmark.proto
11	7	c++/src/capnproto/message.c++
12	1	c++/src/capnproto/message.h
60	6	c++/src/capnproto/serialize.c++
17	2	c++/src/capnproto/serialize.h
11	0	compiler/src/CxxGenerator.hs
8	0	compiler/src/c++-header.mustache

--203a16cc	2013-03-18T18:52:36-07:00	Kenton Varda	temporal@gmail.com	Basic serialization.

203a16cc
24	220	c++/src/capnproto/encoding-test.c++
388	0	c++/src/capnproto/serialize-test.c++
371	0	c++/src/capnproto/serialize.c++
337	0	c++/src/capnproto/serialize.h
10	79	c++/src/capnproto/{encoding-test.c++ => test-util.c++}
44	0	c++/src/capnproto/test-util.h

--9c3cb05f	2013-03-18T15:44:16-07:00	Kenton Varda	temporal@gmail.com	Another iteration of refactoring the Message classes.

9c3cb05f
21	11	c++/src/capnproto/arena.c++
5	6	c++/src/capnproto/arena.h
35	33	c++/src/capnproto/encoding-test.c++
0	112	c++/src/capnproto/message-internal.h
140	147	c++/src/capnproto/message.c++
193	103	c++/src/capnproto/message.h
73	2	c++/src/capnproto/type-safety.h
6	3	c++/src/capnproto/wire-format-test.c++
20	20	c++/src/capnproto/wire-format.c++
11	11	c++/src/capnproto/wire-format.h

--fe29fa08	2013-03-16T00:24:17-07:00	Kenton Varda	temporal@gmail.com	Better Arena design.  Allows incremental reads.

fe29fa08
121	45	c++/src/capnproto/arena.c++
74	61	c++/src/capnproto/arena.h
8	16	c++/src/capnproto/encoding-test.c++
0	3	c++/src/capnproto/list.h
4	1	c++/src/capnproto/macros.c++
24	9	c++/src/capnproto/message-internal.h
138	51	c++/src/capnproto/message.c++
75	57	c++/src/capnproto/message.h
6	0	c++/src/capnproto/type-safety.h
3	5	c++/src/capnproto/wire-format-test.c++

--6a72d324	2013-03-15T18:38:29-07:00	Kenton Varda	temporal@gmail.com	Rename the 'Message' interfaces to Arena and make them internal.  Make a new, intuitive 'Message' interface for creating / reading messages.

6a72d324
130	0	c++/src/capnproto/arena.c++
112	103	c++/src/capnproto/{message.h => arena.h}
58	28	c++/src/capnproto/encoding-test.c++
20	27	c++/src/capnproto/macros.c++
97	0	c++/src/capnproto/message-internal.h
101	45	c++/src/capnproto/message.c++
110	188	c++/src/capnproto/message.h
50	0	c++/src/capnproto/type-safety.h
37	32	c++/src/capnproto/wire-format-test.c++
36	30	c++/src/capnproto/wire-format.c++
3	5	c++/src/capnproto/wire-format.h

--20b1ea55	2013-03-13T20:46:50-07:00	Kenton Varda	temporal@gmail.com	Encoding test.  Bug fixes.  It works.

20b1ea55
5	4	c++/src/capnproto/blob-test.c++
19	1	c++/src/capnproto/blob.h
2	2	c++/src/capnproto/capnpc.ekam-rule
209	158	c++/src/capnproto/encoding-test.c++
75	2	c++/src/capnproto/list.h
30	1	c++/src/capnproto/message.h
142	0	c++/src/capnproto/test.capnp
8	0	c++/src/capnproto/type-safety.h
12	13	c++/src/capnproto/wire-format.c++
32	0	c++/src/capnproto/wire-format.h
1	0	compiler/capnproto-compiler.cabal
7	3	compiler/src/CxxGenerator.hs
11	5	compiler/src/Lexer.hs
20	13	compiler/src/Parser.hs
4	2	compiler/src/Semantics.hs
7	4	compiler/src/Token.hs
19	9	compiler/src/WireFormat.hs
26	0	compiler/src/c++-header.mustache

--b4f80598	2013-03-12T22:56:30-07:00	Kenton Varda	temporal@gmail.com	Text and data blobs.

b4f80598
89	0	c++/src/capnproto/blob-test.c++
30	0	c++/src/capnproto/blob.c++
202	0	c++/src/capnproto/blob.h
3	0	c++/src/capnproto/encoding-test.c++
99	15	c++/src/capnproto/list.h
252	0	c++/src/capnproto/wire-format.c++
46	0	c++/src/capnproto/wire-format.h
21	7	compiler/src/CxxGenerator.hs
36	2	compiler/src/c++-header.mustache

--8b7e9096	2013-03-12T18:15:05-07:00	Kenton Varda	temporal@gmail.com	Lists working.

8b7e9096
141	8	c++/src/capnproto/encoding-test.c++
133	58	c++/src/capnproto/list.h
2	2	c++/src/capnproto/wire-format-test.c++
3	3	c++/src/capnproto/wire-format.c++
2	3	c++/src/capnproto/wire-format.h
20	16	compiler/src/CxxGenerator.hs
8	5	compiler/src/c++-header.mustache
2	0	compiler/src/c++-source.mustache

--271c4728	2013-03-11T22:36:20-07:00	Kenton Varda	temporal@gmail.com	Basic code generation starting to work.  My machine just did something weird so I'm submitting and pushing in case of imminant hardware failure...

271c4728
52	0	c++/src/capnproto/capnpc.ekam-rule
97	0	c++/src/capnproto/encoding-test.c++
34	0	c++/src/capnproto/generated-header-support.h
28	0	c++/src/capnproto/list.c++
246	0	c++/src/capnproto/list.h
4	1	compiler/capnproto-compiler.cabal
4	4	compiler/src/Compiler.hs
44	36	compiler/src/CxxGenerator.hs
6	3	compiler/src/Main.hs
4	0	compiler/src/Semantics.hs
4	2	compiler/src/Util.hs
172	19	compiler/src/WireFormat.hs
96	36	compiler/src/c++-header.mustache
53	0	compiler/src/c++-source.mustache

--a1f2e061	2013-03-08T05:13:18-08:00	Kenton Varda	temporal@gmail.com	Working on C++ code generator, need to sleep now though.

a1f2e061
9	2	compiler/capnproto-compiler.cabal
178	16	compiler/src/Compiler.hs
205	0	compiler/src/CxxGenerator.hs
4	4	compiler/src/Lexer.hs
7	1	compiler/src/Main.hs
9	1	compiler/src/Parser.hs
102	4	compiler/src/Semantics.hs
2	0	compiler/src/Token.hs
15	5	compiler/src/Util.hs
78	0	compiler/src/WireFormat.hs
139	0	compiler/src/c++-header.mustache

--ed97f68a	2013-03-07T14:05:58-08:00	Kenton Varda	temporal@gmail.com	Enforce naming style, to make code generation more robust.

ed97f68a
26	3	compiler/src/Lexer.hs
28	15	compiler/src/Parser.hs
1	0	compiler/src/Token.hs

--1884e7eb	2013-03-06T16:09:51-08:00	Kenton Varda	temporal@gmail.com	Clean up WireReference and add a sign bit to offset.

1884e7eb
1	1	c++/src/capnproto/wire-format-test.c++
112	109	c++/src/capnproto/wire-format.c++

--79b7f287	2013-03-06T12:24:30-08:00	Kenton Varda	temporal@gmail.com	Allow far references to be in a segment separate from either the source or target.

79b7f287
150	102	c++/src/capnproto/wire-format.c++

--952ae5c5	2013-03-05T15:12:37-08:00	Kenton Varda	temporal@gmail.com	Remove byte/word default constructors and rely on calloc for zero-initialization.

952ae5c5
9	5	c++/src/capnproto/message.c++
2	2	c++/src/capnproto/type-safety.h

--edad34c4	2013-03-05T00:28:49-08:00	Kenton Varda	temporal@gmail.com	Initialize from default values.

edad34c4
22	22	c++/src/capnproto/wire-format-test.c++
195	36	c++/src/capnproto/wire-format.c++
41	25	c++/src/capnproto/wire-format.h

--90eae25e	2013-03-04T19:26:02-08:00	Kenton Varda	temporal@gmail.com	Improve how struct lists work.

90eae25e
42	14	c++/src/capnproto/descriptor.h
1	1	c++/src/capnproto/message.c++
2	0	c++/src/capnproto/type-safety.h
86	3	c++/src/capnproto/wire-format-test.c++
120	77	c++/src/capnproto/wire-format.c++
13	21	c++/src/capnproto/wire-format.h

--e9fa0685	2013-03-04T15:28:57-08:00	Kenton Varda	temporal@gmail.com	Tweaks.

e9fa0685
8	17	c++/src/capnproto/wire-format-test.c++
1	1	c++/src/capnproto/wire-format.c++

--64a0ca66	2013-03-03T22:20:37-08:00	Kenton Varda	temporal@gmail.com	Testing and bug-fixing.

64a0ca66
61	0	c++/src/capnproto/message.c++
10	0	c++/src/capnproto/message.h
45	37	c++/src/capnproto/type-safety.h
198	5	c++/src/capnproto/wire-format-test.c++
16	11	c++/src/capnproto/wire-format.c++

--648d267d	2013-03-03T07:01:58-08:00	Kenton Varda	temporal@gmail.com	Finish rewriting WireFormat.

648d267d
9	16	c++/src/capnproto/descriptor-test.c++
28	58	c++/src/capnproto/type-safety.h
93	0	c++/src/capnproto/wire-format-test.c++
122	130	c++/src/capnproto/wire-format.c++
50	28	c++/src/capnproto/wire-format.h

--36a60467	2013-03-02T03:59:32-08:00	Kenton Varda	temporal@gmail.com	Moar type-safety, rewriting WireFormat to avoid descriptors (incomplete), decided struct pointers should point at the beginning of the struct after all.

36a60467
2	2	c++/src/capnproto/descriptor-test.c++
83	73	c++/src/capnproto/descriptor.h
7	166	c++/src/capnproto/macros.h
18	40	c++/src/capnproto/message.h
12	12	c++/src/capnproto/{unit-test.c++ => type-safety-test.c++}
1	1	c++/src/capnproto/{unit.c++ => type-safety.c++}
504	0	c++/src/capnproto/type-safety.h
0	178	c++/src/capnproto/unit.h
217	236	c++/src/capnproto/wire-format.c++
158	240	c++/src/capnproto/wire-format.h

--dd46a758	2013-03-01T06:24:38-08:00	Kenton Varda	temporal@gmail.com	Type-safe quantities catch bugs.

dd46a758
79	0	c++/src/capnproto/descriptor-test.c++
22	9	c++/src/capnproto/descriptor.h
167	0	c++/src/capnproto/macros.h
71	58	c++/src/capnproto/message.h
32	29	c++/src/capnproto/{macros.h => unit-test.c++}
28	0	c++/src/capnproto/unit.c++
178	0	c++/src/capnproto/unit.h
127	116	c++/src/capnproto/wire-format.c++
109	78	c++/src/capnproto/wire-format.h

--92a64de2	2013-02-28T18:01:05-08:00	Kenton Varda	temporal@gmail.com	Standardize on Builder/Reader naming scheme.

92a64de2
40	39	c++/src/capnproto/wire-format.c++
89	88	c++/src/capnproto/wire-format.h

--fce74ba5	2013-02-28T17:50:09-08:00	Kenton Varda	temporal@gmail.com	Iterate on C++ runtime.

fce74ba5
0	147	c++/src/capnproto/arena.h
3	2	c++/src/capnproto/{arena.c++ => message.c++}
248	0	c++/src/capnproto/message.h
99	87	c++/src/capnproto/wire-format.c++
81	85	c++/src/capnproto/wire-format.h

--1768fc16	2013-02-26T05:13:37-08:00	Kenton Varda	temporal@gmail.com	maxFieldNumber is 254, not 255.

1768fc16
7	2	compiler/src/Semantics.hs

--c0921532	2013-02-26T05:10:59-08:00	Kenton Varda	temporal@gmail.com	Starting work on C++ runtime.

c0921532
12	0	c++/Makefile.ekam
30	0	c++/src/capnproto/arena.c++
147	0	c++/src/capnproto/arena.h
30	0	c++/src/capnproto/descriptor.c++
222	0	c++/src/capnproto/descriptor.h
78	0	c++/src/capnproto/macros.c++
64	0	c++/src/capnproto/macros.h
655	0	c++/src/capnproto/wire-format.c++
489	0	c++/src/capnproto/wire-format.h

--fa8ca65d	2013-02-18T18:01:30-08:00	Kenton Varda	temporal@gmail.com	Reserve 'on'.

fa8ca65d
1	0	compiler/src/Lexer.hs
1	0	compiler/src/Parser.hs
2	1	compiler/src/Token.hs

--edd07d5a	2013-02-18T17:42:44-08:00	Kenton Varda	temporal@gmail.com	Oops, don't print field number running out error redundantly.

edd07d5a
1	1	compiler/src/Parser.hs

--fb31458e	2013-02-18T17:34:04-08:00	Kenton Varda	temporal@gmail.com	Disallow retroactive unionization.

fb31458e
17	3	compiler/src/Compiler.hs
1	0	compiler/src/Semantics.hs

--3c418b99	2013-02-18T16:48:28-08:00	Kenton Varda	temporal@gmail.com	Max field number warning.

3c418b99
1	0	compiler/src/Lexer.hs
24	5	compiler/src/Parser.hs
2	1	compiler/src/Semantics.hs
1	0	compiler/src/Token.hs

--897276d9	2013-02-18T16:11:47-08:00	Kenton Varda	temporal@gmail.com	Unions

897276d9
57	18	compiler/src/Compiler.hs
4	2	compiler/src/Grammar.hs
7	1	compiler/src/Lexer.hs
38	16	compiler/src/Parser.hs
31	11	compiler/src/Semantics.hs
6	0	compiler/src/Token.hs

--4b4c3970	2013-02-16T16:14:37-08:00	Kenton Varda	temporal@gmail.com	More misc stuff.

4b4c3970
46	29	compiler/src/Compiler.hs
7	10	compiler/src/Main.hs
45	24	compiler/src/Semantics.hs
8	5	compiler/src/Util.hs

--f0877237	2013-02-16T04:47:57-08:00	Kenton Varda	temporal@gmail.com	Bunch of little things.

f0877237
2	1	compiler/capnproto-compiler.cabal
89	19	compiler/src/Compiler.hs
14	2	compiler/src/Grammar.hs
1	0	compiler/src/Lexer.hs
23	2	compiler/src/Main.hs
57	22	compiler/src/Parser.hs
11	3	compiler/src/Semantics.hs
8	1	compiler/src/Token.hs
6	15	compiler/src/{Main.hs => Util.hs}

--2e3f671c	2013-02-15T19:30:07-08:00	Kenton Varda	temporal@gmail.com	class -> struct

2e3f671c
19	19	compiler/src/Compiler.hs
1	1	compiler/src/Grammar.hs
1	1	compiler/src/Lexer.hs
9	9	compiler/src/Parser.hs
23	23	compiler/src/Semantics.hs
1	1	compiler/src/Token.hs

--22a75445	2013-02-15T19:14:20-08:00	Kenton Varda	temporal@gmail.com	Compile semantic descriptors.

22a75445
3	1	compiler/capnproto-compiler.cabal
391	0	compiler/src/Compiler.hs
18	14	compiler/src/Grammar.hs
1	0	compiler/src/Lexer.hs
13	1	compiler/src/Main.hs
39	27	compiler/src/Parser.hs
309	0	compiler/src/Semantics.hs
1	11	compiler/src/Token.hs

--6bb49ca7	2013-02-12T07:26:34-08:00	Kenton Varda	temporal@gmail.com	Day 1:  Learn Haskell, write a parser.

6bb49ca7
2	0	compiler/Setup.hs
21	0	compiler/capnproto-compiler.cabal
54	0	compiler/src/Grammar.hs
113	0	compiler/src/Lexer.hs
27	0	compiler/src/Main.hs
242	0	compiler/src/Parser.hs
65	0	compiler/src/Token.hs
